; generated by ARM C/C++ Compiler, 5.03 [Build 24]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\MEDIA_USB_KEY\main.o --asm_dir=.\listing\ --list_dir=.\listing\ --depend=.\MEDIA_USB_KEY\main.d --cpu=Cortex-M4 --apcs=interwork -I.\Libraries -I.\Utilities -I.\Libraries\CMSIS\ST\STM32F4xx\Include -I.\inc -I.\src -I.\Libraries\STM32F4xx_StdPeriph_Driver -I.\Libraries\STM32_USB_HOST_Library -I.\Libraries\STM32_USB_OTG_Driver -I.\Utilities\STM32F4-Discovery -I.\Libraries\CMSIS -I.\Utilities\Third_Party\fat_fs -IC:\Keil4\ARM\RV31\INC -IC:\Keil4\ARM\CMSIS\Include -IC:\Keil4\ARM\Inc\ST\STM32F4xx -D__MICROLIB -DUSE_STDPERIPH_DRIVER -DUSE_USB_OTG_FS -DSTM32F4XX -DMEDIA_USB_KEY -D__FPU_PRESENT=0 --omf_browse=.\MEDIA_USB_KEY\main.crf src\main.c]
                          THUMB

                          AREA ||i.ADC3_CH12_DMA_Config||, CODE, READONLY, ALIGN=2

                  ADC3_CH12_DMA_Config PROC
;;;137    
;;;138    void ADC3_CH12_DMA_Config(void)
000000  b570              PUSH     {r4-r6,lr}
;;;139    {
000002  b09c              SUB      sp,sp,#0x70
;;;140      ADC_InitTypeDef       ADC_InitStructure;
;;;141      ADC_CommonInitTypeDef ADC_CommonInitStructure;
;;;142      DMA_InitTypeDef       DMA_InitStructure;
;;;143      GPIO_InitTypeDef      GPIO_InitStructure;
;;;144    
;;;145      // Enable ADC3, DMA2 and GPIO clocks **************************************
;;;146      RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_DMA2 | RCC_AHB1Periph_GPIOC, ENABLE);
000004  2101              MOVS     r1,#1
000006  482e              LDR      r0,|L1.192|
000008  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;147      RCC_APB2PeriphClockCmd(RCC_APB2Periph_ADC3, ENABLE);
00000c  2101              MOVS     r1,#1
00000e  0288              LSLS     r0,r1,#10
000010  f7fffffe          BL       RCC_APB2PeriphClockCmd
;;;148    
;;;149      // DMA2 Stream0 channel0 configuration ************************************
;;;150      DMA_InitStructure.DMA_Channel = DMA_Channel_2;  
000014  f04f6080          MOV      r0,#0x4000000
;;;151      DMA_InitStructure.DMA_PeripheralBaseAddr = (uint32_t)ADC3_DR_ADDRESS;
000018  9000              STR      r0,[sp,#0]
00001a  482a              LDR      r0,|L1.196|
;;;152      DMA_InitStructure.DMA_Memory0BaseAddr = (uint32_t)&ADC3ConvertedValue;
00001c  9001              STR      r0,[sp,#4]
00001e  482a              LDR      r0,|L1.200|
;;;153      DMA_InitStructure.DMA_DIR = DMA_DIR_PeripheralToMemory;
;;;154      DMA_InitStructure.DMA_BufferSize = 1;
000020  a902              ADD      r1,sp,#8
000022  2400              MOVS     r4,#0                 ;153
000024  2501              MOVS     r5,#1
000026  c131              STM      r1!,{r0,r4,r5}
;;;155      DMA_InitStructure.DMA_PeripheralInc = DMA_PeripheralInc_Disable;
;;;156      DMA_InitStructure.DMA_MemoryInc = DMA_MemoryInc_Disable;
;;;157      DMA_InitStructure.DMA_PeripheralDataSize = DMA_PeripheralDataSize_HalfWord;
000028  02e8              LSLS     r0,r5,#11
00002a  e9cd4006          STRD     r4,r0,[sp,#0x18]
;;;158      DMA_InitStructure.DMA_MemoryDataSize = DMA_MemoryDataSize_HalfWord;
00002e  0080              LSLS     r0,r0,#2
;;;159      DMA_InitStructure.DMA_Mode = DMA_Mode_Circular;
000030  9008              STR      r0,[sp,#0x20]
000032  1140              ASRS     r0,r0,#5
;;;160      DMA_InitStructure.DMA_Priority = DMA_Priority_High;
000034  9009              STR      r0,[sp,#0x24]
000036  a90a              ADD      r1,sp,#0x28
000038  9405              STR      r4,[sp,#0x14]         ;157
00003a  0240              LSLS     r0,r0,#9
00003c  c131              STM      r1!,{r0,r4,r5}
;;;161      DMA_InitStructure.DMA_FIFOMode = DMA_FIFOMode_Disable;         
;;;162      DMA_InitStructure.DMA_FIFOThreshold = DMA_FIFOThreshold_HalfFull;
;;;163      DMA_InitStructure.DMA_MemoryBurst = DMA_MemoryBurst_Single;
;;;164      DMA_InitStructure.DMA_PeripheralBurst = DMA_PeripheralBurst_Single;
;;;165      DMA_Init(DMA2_Stream0, &DMA_InitStructure);
00003e  4e23              LDR      r6,|L1.204|
000040  940d              STR      r4,[sp,#0x34]         ;164
000042  4669              MOV      r1,sp
000044  4630              MOV      r0,r6
000046  940e              STR      r4,[sp,#0x38]
000048  f7fffffe          BL       DMA_Init
;;;166      DMA_Cmd(DMA2_Stream0, ENABLE);
00004c  2101              MOVS     r1,#1
00004e  4630              MOV      r0,r6
000050  f7fffffe          BL       DMA_Cmd
;;;167    
;;;168     // Configure ADC3 Channel12 pin as analog input ****************************
;;;169      GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;
000054  2004              MOVS     r0,#4
;;;170      GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AN;
000056  9019              STR      r0,[sp,#0x64]
000058  2003              MOVS     r0,#3
00005a  f88d0068          STRB     r0,[sp,#0x68]
;;;171      GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL ;
00005e  f88d406b          STRB     r4,[sp,#0x6b]
;;;172      GPIO_Init(GPIOC, &GPIO_InitStructure);
000062  a919              ADD      r1,sp,#0x64
000064  481a              LDR      r0,|L1.208|
000066  f7fffffe          BL       GPIO_Init
;;;173    
;;;174      // ADC Common Init *********************************************************
;;;175      ADC_CommonInitStructure.ADC_Mode = ADC_Mode_Independent;
;;;176      ADC_CommonInitStructure.ADC_Prescaler = ADC_Prescaler_Div2;
00006a  9415              STR      r4,[sp,#0x54]
;;;177      ADC_CommonInitStructure.ADC_DMAAccessMode = ADC_DMAAccessMode_Disabled;
00006c  9416              STR      r4,[sp,#0x58]
;;;178      ADC_CommonInitStructure.ADC_TwoSamplingDelay = ADC_TwoSamplingDelay_5Cycles;
00006e  9417              STR      r4,[sp,#0x5c]
;;;179      ADC_CommonInit(&ADC_CommonInitStructure);
000070  a815              ADD      r0,sp,#0x54
000072  9418              STR      r4,[sp,#0x60]
000074  f7fffffe          BL       ADC_CommonInit
;;;180    
;;;181     // ADC3 Init ***************************************************************
;;;182      ADC_InitStructure.ADC_Resolution = ADC_Resolution_12b;
;;;183      ADC_InitStructure.ADC_ScanConvMode = DISABLE;
000078  940f              STR      r4,[sp,#0x3c]
00007a  f88d4040          STRB     r4,[sp,#0x40]
;;;184      ADC_InitStructure.ADC_ContinuousConvMode = ENABLE;
;;;185      ADC_InitStructure.ADC_ExternalTrigConvEdge = ADC_ExternalTrigConvEdge_None;
;;;186      ADC_InitStructure.ADC_DataAlign = ADC_DataAlign_Right;
00007e  9411              STR      r4,[sp,#0x44]
;;;187      ADC_InitStructure.ADC_NbrOfConversion = 1;
000080  9413              STR      r4,[sp,#0x4c]
;;;188      ADC_Init(ADC3, &ADC_InitStructure);
000082  4c10              LDR      r4,|L1.196|
000084  f88d5041          STRB     r5,[sp,#0x41]         ;184
000088  3c4c              SUBS     r4,r4,#0x4c
00008a  f88d5050          STRB     r5,[sp,#0x50]         ;187
00008e  a90f              ADD      r1,sp,#0x3c
000090  4620              MOV      r0,r4
000092  f7fffffe          BL       ADC_Init
;;;189    
;;;190      // ADC3 regular channel12 configuration ***********************************
;;;191      ADC_RegularChannelConfig(ADC3, ADC_Channel_12, 1, ADC_SampleTime_3Cycles);
000096  2300              MOVS     r3,#0
000098  2201              MOVS     r2,#1
00009a  210c              MOVS     r1,#0xc
00009c  4620              MOV      r0,r4
00009e  f7fffffe          BL       ADC_RegularChannelConfig
;;;192    
;;;193     // Enable DMA request after last transfer (Single-ADC mode)
;;;194      ADC_DMARequestAfterLastTransferCmd(ADC3, ENABLE);
0000a2  2101              MOVS     r1,#1
0000a4  4620              MOV      r0,r4
0000a6  f7fffffe          BL       ADC_DMARequestAfterLastTransferCmd
;;;195    
;;;196      // Enable ADC3 DMA 
;;;197      ADC_DMACmd(ADC3, ENABLE);
0000aa  2101              MOVS     r1,#1
0000ac  4620              MOV      r0,r4
0000ae  f7fffffe          BL       ADC_DMACmd
;;;198    
;;;199      // Enable ADC3 
;;;200      ADC_Cmd(ADC3, ENABLE);
0000b2  2101              MOVS     r1,#1
0000b4  4620              MOV      r0,r4
0000b6  f7fffffe          BL       ADC_Cmd
;;;201    }
0000ba  b01c              ADD      sp,sp,#0x70
0000bc  bd70              POP      {r4-r6,pc}
;;;202    
                          ENDP

0000be  0000              DCW      0x0000
                  |L1.192|
                          DCD      0x00400004
                  |L1.196|
                          DCD      0x4001224c
                  |L1.200|
                          DCD      ||.data||+0xc
                  |L1.204|
                          DCD      0x40026410
                  |L1.208|
                          DCD      0x40020800

                          AREA ||i.TIM_LED_Config||, CODE, READONLY, ALIGN=2

                  TIM_LED_Config PROC
;;;1782     */
;;;1783   static void TIM_LED_Config(void)
000000  b570              PUSH     {r4-r6,lr}
;;;1784   {
000002  b08a              SUB      sp,sp,#0x28
;;;1785     TIM_OCInitTypeDef  TIM_OCInitStructure;
;;;1786     TIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure;
;;;1787     NVIC_InitTypeDef NVIC_InitStructure;
;;;1788     uint16_t prescalervalue = 0;
;;;1789     
;;;1790     /* TIM4 clock enable */
;;;1791     RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM4, ENABLE);
000004  2101              MOVS     r1,#1
000006  2004              MOVS     r0,#4
000008  f7fffffe          BL       RCC_APB1PeriphClockCmd
;;;1792     
;;;1793     NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);
00000c  f44f60a0          MOV      r0,#0x500
000010  f7fffffe          BL       NVIC_PriorityGroupConfig
;;;1794     
;;;1795     /* Enable the TIM3 gloabal Interrupt */
;;;1796     NVIC_InitStructure.NVIC_IRQChannel = TIM4_IRQn;
000014  201e              MOVS     r0,#0x1e
000016  f88d0020          STRB     r0,[sp,#0x20]
;;;1797     NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
00001a  2400              MOVS     r4,#0
00001c  f88d4021          STRB     r4,[sp,#0x21]
;;;1798     NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
000020  f88d4022          STRB     r4,[sp,#0x22]
;;;1799     NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
000024  2501              MOVS     r5,#1
000026  f88d5023          STRB     r5,[sp,#0x23]
;;;1800     NVIC_Init(&NVIC_InitStructure);
00002a  a808              ADD      r0,sp,#0x20
00002c  f7fffffe          BL       NVIC_Init
;;;1801   
;;;1802     /* Initialize Leds mounted on STM324F4-EVAL board */
;;;1803     STM_EVAL_LEDInit(LED3);
000030  2001              MOVS     r0,#1
000032  f7fffffe          BL       STM_EVAL_LEDInit
;;;1804     STM_EVAL_LEDInit(LED4);
000036  2000              MOVS     r0,#0
000038  f7fffffe          BL       STM_EVAL_LEDInit
;;;1805     STM_EVAL_LEDInit(LED6);
00003c  2003              MOVS     r0,#3
00003e  f7fffffe          BL       STM_EVAL_LEDInit
;;;1806     
;;;1807     /* Compute the prescaler value */
;;;1808     prescalervalue = (uint16_t) ((SystemCoreClock ) / 550000) - 1;
000042  481a              LDR      r0,|L2.172|
000044  491a              LDR      r1,|L2.176|
;;;1809     
;;;1810     /* Time base configuration */
;;;1811     TIM_TimeBaseStructure.TIM_Period = 65535;
;;;1812     TIM_TimeBaseStructure.TIM_Prescaler = prescalervalue;
;;;1813     TIM_TimeBaseStructure.TIM_ClockDivision = 0;
;;;1814     TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;
;;;1815     TIM_TimeBaseInit(TIM4, &TIM_TimeBaseStructure);
000046  4e1b              LDR      r6,|L2.180|
000048  6800              LDR      r0,[r0,#0]            ;1808  ; SystemCoreClock
00004a  f8ad401c          STRH     r4,[sp,#0x1c]         ;1813
00004e  fbb0f0f1          UDIV     r0,r0,r1              ;1808
000052  1e40              SUBS     r0,r0,#1              ;1808
000054  f64f71ff          MOV      r1,#0xffff            ;1811
000058  f8ad0014          STRH     r0,[sp,#0x14]         ;1812
00005c  9106              STR      r1,[sp,#0x18]         ;1812
00005e  f8ad4016          STRH     r4,[sp,#0x16]         ;1814
000062  a905              ADD      r1,sp,#0x14
000064  4630              MOV      r0,r6
000066  f7fffffe          BL       TIM_TimeBaseInit
;;;1816     
;;;1817     /* Enable TIM4 Preload register on ARR */
;;;1818     TIM_ARRPreloadConfig(TIM4, ENABLE);
00006a  2101              MOVS     r1,#1
00006c  4630              MOV      r0,r6
00006e  f7fffffe          BL       TIM_ARRPreloadConfig
;;;1819     
;;;1820     /* TIM PWM1 Mode configuration: Channel */
;;;1821     TIM_OCInitStructure.TIM_OCMode = TIM_OCMode_Timing;
;;;1822     TIM_OCInitStructure.TIM_OutputState = TIM_OutputState_Enable;
;;;1823     TIM_OCInitStructure.TIM_Pulse = CCR_Val;
000072  4811              LDR      r0,|L2.184|
000074  f8ad4000          STRH     r4,[sp,#0]            ;1821
000078  f8ad5002          STRH     r5,[sp,#2]            ;1822
00007c  8940              LDRH     r0,[r0,#0xa]  ; CCR_Val
;;;1824     TIM_OCInitStructure.TIM_OCPolarity = TIM_OCPolarity_High;
00007e  9002              STR      r0,[sp,#8]
000080  f8ad400c          STRH     r4,[sp,#0xc]
;;;1825     
;;;1826     /* Output Compare PWM1 Mode configuration: Channel2 */
;;;1827     TIM_OC1Init(TIM4, &TIM_OCInitStructure);
000084  4669              MOV      r1,sp
000086  4630              MOV      r0,r6
000088  f7fffffe          BL       TIM_OC1Init
;;;1828     TIM_OC1PreloadConfig(TIM4, TIM_OCPreload_Disable);
00008c  2100              MOVS     r1,#0
00008e  4630              MOV      r0,r6
000090  f7fffffe          BL       TIM_OC1PreloadConfig
;;;1829       
;;;1830     /* TIM Interrupts enable */
;;;1831     TIM_ITConfig(TIM4, TIM_IT_CC1 , ENABLE);
000094  2201              MOVS     r2,#1
000096  2102              MOVS     r1,#2
000098  4630              MOV      r0,r6
00009a  f7fffffe          BL       TIM_ITConfig
;;;1832     
;;;1833     /* TIM4 enable counter */
;;;1834     TIM_Cmd(TIM4, ENABLE);
00009e  2101              MOVS     r1,#1
0000a0  4630              MOV      r0,r6
0000a2  f7fffffe          BL       TIM_Cmd
;;;1835   }
0000a6  b00a              ADD      sp,sp,#0x28
0000a8  bd70              POP      {r4-r6,pc}
;;;1836   
                          ENDP

0000aa  0000              DCW      0x0000
                  |L2.172|
                          DCD      SystemCoreClock
                  |L2.176|
                          DCD      0x00086470
                  |L2.180|
                          DCD      0x40000800
                  |L2.184|
                          DCD      ||.data||

                          AREA ||i.UART2Init||, CODE, READONLY, ALIGN=2

                  UART2Init PROC
;;;203    
;;;204    void UART2Init(void)
000000  b570              PUSH     {r4-r6,lr}
;;;205    {
;;;206    
;;;207       GPIO_InitTypeDef GPIO_InitStructure;
;;;208       USART_InitTypeDef USART_InitStructure;
;;;209    
;;;210       RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2, ENABLE);    	// 1.
000002  2101              MOVS     r1,#1
000004  b086              SUB      sp,sp,#0x18           ;205
000006  0448              LSLS     r0,r1,#17
000008  f7fffffe          BL       RCC_APB1PeriphClockCmd
;;;211       RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOD,ENABLE); 			// 2.
00000c  2101              MOVS     r1,#1
00000e  2008              MOVS     r0,#8
000010  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;212    
;;;213       GPIO_PinAFConfig  ( GPIOD, GPIO_PinSource5 , GPIO_AF_USART2) ;
000014  4e1c              LDR      r6,|L3.136|
000016  2207              MOVS     r2,#7
000018  2105              MOVS     r1,#5
00001a  4630              MOV      r0,r6
00001c  f7fffffe          BL       GPIO_PinAFConfig
;;;214       GPIO_PinAFConfig  ( GPIOD, GPIO_PinSource6 , GPIO_AF_USART2) ;   
000020  2207              MOVS     r2,#7
000022  2106              MOVS     r1,#6
000024  4630              MOV      r0,r6
000026  f7fffffe          BL       GPIO_PinAFConfig
;;;215       // 
;;;216       //     //  Tx
;;;217         GPIO_InitStructure.GPIO_Pin = GPIO_Pin_5;
;;;218         GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF; // alternate function!
00002a  2502              MOVS     r5,#2
00002c  2020              MOVS     r0,#0x20              ;217
00002e  f88d5004          STRB     r5,[sp,#4]
;;;219       GPIO_InitStructure.GPIO_OType = GPIO_OType_PP ;
000032  2400              MOVS     r4,#0
000034  9000              STR      r0,[sp,#0]            ;218
000036  f88d4006          STRB     r4,[sp,#6]
;;;220         GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
00003a  f88d5005          STRB     r5,[sp,#5]
;;;221         GPIO_Init(GPIOD, &GPIO_InitStructure);
00003e  4669              MOV      r1,sp
000040  4630              MOV      r0,r6
000042  f7fffffe          BL       GPIO_Init
;;;222       ////
;;;223    
;;;224       //     // Rx
;;;225         GPIO_InitStructure.GPIO_Pin = GPIO_Pin_6;
000046  2040              MOVS     r0,#0x40
;;;226         GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF; //GPIO_Mode_IN;
000048  9000              STR      r0,[sp,#0]
00004a  f88d5004          STRB     r5,[sp,#4]
;;;227         GPIO_Init(GPIOD, &GPIO_InitStructure);
00004e  4669              MOV      r1,sp
000050  4630              MOV      r0,r6
000052  f7fffffe          BL       GPIO_Init
;;;228       //
;;;229         USART_InitStructure.USART_BaudRate = 9600;
000056  f44f5016          MOV      r0,#0x2580
;;;230         USART_InitStructure.USART_WordLength = USART_WordLength_8b;
00005a  f8ad400c          STRH     r4,[sp,#0xc]
00005e  9002              STR      r0,[sp,#8]
;;;231         USART_InitStructure.USART_StopBits = USART_StopBits_1;
000060  f8ad400e          STRH     r4,[sp,#0xe]
;;;232         USART_InitStructure.USART_Parity = USART_Parity_No;
000064  f8ad4010          STRH     r4,[sp,#0x10]
;;;233         USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
000068  f8ad4014          STRH     r4,[sp,#0x14]
;;;234         USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
00006c  200c              MOVS     r0,#0xc
;;;235    
;;;236       USART_Init(USART2, &USART_InitStructure);
00006e  4c07              LDR      r4,|L3.140|
000070  f8ad0012          STRH     r0,[sp,#0x12]         ;234
000074  a902              ADD      r1,sp,#8
000076  4620              MOV      r0,r4
000078  f7fffffe          BL       USART_Init
;;;237    	 
;;;238    	 // enable interrupt on sended data
;;;239    	//	USART_ITConfig(USART2, USART_IT_TC, ENABLE);
;;;240    		// enable interrupt on received data
;;;241    //	  USART_ITConfig(USART2, USART_IT_RXNE, ENABLE);//?????????? ?????????? ?? ?????
;;;242    
;;;243    //RCC->APB2ENR |= RCC_APB2ENR_IOPAEN;   //???????????? GPIO
;;;244    //RCC->APB2ENR |= RCC_APB2ENR_AFIOEN;   //???????????? ?????????????? ??????? GPIO
;;;245    //RCC->APB2ENR |= RCC_APB2ENR_USART1EN; //???????????? ?????? USART1
;;;246    
;;;247       USART_Cmd(USART2, ENABLE); // enable USART2
00007c  2101              MOVS     r1,#1
00007e  4620              MOV      r0,r4
000080  f7fffffe          BL       USART_Cmd
;;;248    
;;;249    }
000084  b006              ADD      sp,sp,#0x18
000086  bd70              POP      {r4-r6,pc}
;;;250    
                          ENDP

                  |L3.136|
                          DCD      0x40020c00
                  |L3.140|
                          DCD      0x40004400

                          AREA ||i.USART2_IRQHandler||, CODE, READONLY, ALIGN=2

                  USART2_IRQHandler PROC
;;;71     
;;;72     void USART2_IRQHandler(void)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;73     { 
;;;74     
;;;75         	
;;;76     				if(USART_GetITStatus(USART2, USART_IT_RXNE) != RESET)		  // приняли
000004  4f2e              LDR      r7,|L4.192|
000006  f2405825          MOV      r8,#0x525
00000a  4641              MOV      r1,r8
00000c  4638              MOV      r0,r7
00000e  f7fffffe          BL       USART_GetITStatus
;;;77     					{		u8 tmp=0;
;;;78     						USART_ClearITPendingBit(USART2, USART_IT_RXNE);
;;;79     				
;;;80     						tmp=USART_ReceiveData (USART2);
;;;81     						if (tmp==0x3A)
;;;82     								tekpr=0;
000012  4d2c              LDR      r5,|L4.196|
000014  2600              MOVS     r6,#0                 ;76
000016  b320              CBZ      r0,|L4.98|
000018  4641              MOV      r1,r8                 ;78
00001a  4638              MOV      r0,r7                 ;78
00001c  f7fffffe          BL       USART_ClearITPendingBit
000020  4638              MOV      r0,r7                 ;80
000022  f7fffffe          BL       USART_ReceiveData
000026  b2c4              UXTB     r4,r0                 ;80
000028  2c3a              CMP      r4,#0x3a              ;81
00002a  d003              BEQ      |L4.52|
;;;83     	
;;;84     						if (tekpr==1)
00002c  7a68              LDRB     r0,[r5,#9]  ; tekpr
00002e  2801              CMP      r0,#1
000030  d002              BEQ      |L4.56|
000032  e006              B        |L4.66|
                  |L4.52|
000034  726e              STRB     r6,[r5,#9]            ;82
000036  e00f              B        |L4.88|
                  |L4.56|
;;;85     								if (tmp!=address)
000038  7968              LDRB     r0,[r5,#5]  ; address
00003a  4284              CMP      r4,r0
00003c  d001              BEQ      |L4.66|
;;;86     								{
;;;87     									tekpr=0;
00003e  726e              STRB     r6,[r5,#9]
;;;88     									rxsize=0;
000040  71ee              STRB     r6,[r5,#7]
                  |L4.66|
;;;89     								}
;;;90     						
;;;91     						if (tmp==0x0D)
000042  2c0d              CMP      r4,#0xd
000044  d108              BNE      |L4.88|
;;;92     						{
;;;93     							rxsize=tekpr;
000046  7a68              LDRB     r0,[r5,#9]  ; tekpr
000048  71e8              STRB     r0,[r5,#7]
;;;94     							USART_ITConfig(USART2, USART_IT_RXNE, DISABLE);
00004a  2200              MOVS     r2,#0
00004c  4641              MOV      r1,r8
00004e  4638              MOV      r0,r7
000050  f7fffffe          BL       USART_ITConfig
;;;95     							new_komand=1;
000054  2001              MOVS     r0,#1
000056  7128              STRB     r0,[r5,#4]
                  |L4.88|
;;;96     						}
;;;97     						RxBuffer[tekpr]=tmp;
000058  491b              LDR      r1,|L4.200|
00005a  7a68              LDRB     r0,[r5,#9]  ; tekpr
00005c  540c              STRB     r4,[r1,r0]
;;;98     						tekpr++;
00005e  1c40              ADDS     r0,r0,#1
000060  7268              STRB     r0,[r5,#9]
                  |L4.98|
;;;99     				//		GPIOD->ODR ^= tx_pin_en;
;;;100    				//		GPIOD->ODR ^= rx_pin_en;
;;;101    						
;;;102    
;;;103    					}
;;;104    //Transmission complete interrupt								 // чтото передали
;;;105            if(USART_GetITStatus(USART2, USART_IT_TC) != RESET)
000062  f2406426          MOV      r4,#0x626
000066  4621              MOV      r1,r4
000068  4638              MOV      r0,r7
00006a  f7fffffe          BL       USART_GetITStatus
00006e  2800              CMP      r0,#0
000070  d024              BEQ      |L4.188|
;;;106            {
;;;107    		
;;;108    					USART_ClearITPendingBit(USART2, USART_IT_TC);//очищаем признак прерывания
000072  4621              MOV      r1,r4
000074  4638              MOV      r0,r7
000076  f7fffffe          BL       USART_ClearITPendingBit
;;;109    					
;;;110    					if (txsize>tekper)
00007a  79a8              LDRB     r0,[r5,#6]  ; txsize
00007c  7a29              LDRB     r1,[r5,#8]  ; tekper
00007e  4288              CMP      r0,r1
000080  d904              BLS      |L4.140|
;;;111    						USART_SendData(USART2,TxBuffer[tekper]);
000082  4811              LDR      r0,|L4.200|
000084  f10000ff          ADD      r0,r0,#0xff
000088  5c41              LDRB     r1,[r0,r1]
00008a  e002              B        |L4.146|
                  |L4.140|
;;;112    					else
;;;113    					{
;;;114    						if (txsize==tekper)
00008c  d105              BNE      |L4.154|
;;;115    								USART_SendData(USART2, 0x0D);
00008e  f04f010d          MOV      r1,#0xd
                  |L4.146|
000092  4638              MOV      r0,r7
000094  f7fffffe          BL       USART_SendData
000098  e009              B        |L4.174|
                  |L4.154|
;;;116    						else
;;;117    						{
;;;118    							GPIO_WriteBit(GPIOD, rx_pin_en, Bit_RESET); 
00009a  2200              MOVS     r2,#0
00009c  2108              MOVS     r1,#8
00009e  480b              LDR      r0,|L4.204|
0000a0  f7fffffe          BL       GPIO_WriteBit
;;;119    							USART_ITConfig(USART2, USART_IT_RXNE, ENABLE);
0000a4  2201              MOVS     r2,#1
0000a6  4641              MOV      r1,r8
0000a8  4638              MOV      r0,r7
0000aa  f7fffffe          BL       USART_ITConfig
                  |L4.174|
;;;120    						}
;;;121    						//
;;;122    //						GPIOD->ODR ^= tx_pin_en;
;;;123    		//					GPIOD->ODR ^= rx_pin_en;
;;;124    					}
;;;125    					if (tekper>TxBufferSize-1)
0000ae  7a28              LDRB     r0,[r5,#8]  ; tekper
0000b0  28fe              CMP      r0,#0xfe
0000b2  d900              BLS      |L4.182|
;;;126    						tekper=0;
0000b4  722e              STRB     r6,[r5,#8]
                  |L4.182|
;;;127    					tekper++;
0000b6  7a28              LDRB     r0,[r5,#8]  ; tekper
0000b8  1c40              ADDS     r0,r0,#1
0000ba  7228              STRB     r0,[r5,#8]
                  |L4.188|
;;;128    					
;;;129    			 
;;;130    					//					GPIOA->BSRR=GPIO_BSRR_BR11|GPIO_BSRR_BR12; // настроиться на прием
;;;131            }
;;;132    
;;;133    
;;;134    
;;;135    }
0000bc  e8bd81f0          POP      {r4-r8,pc}
;;;136    
                          ENDP

                  |L4.192|
                          DCD      0x40004400
                  |L4.196|
                          DCD      ||.data||
                  |L4.200|
                          DCD      ||.bss||+0x544
                  |L4.204|
                          DCD      0x40020c00

                          AREA ||i.delay_spi||, CODE, READONLY, ALIGN=1

                  delay_spi PROC
;;;467    
;;;468    void delay_spi(u32 kol)
000000  2100              MOVS     r1,#0
;;;469    {
000002  e001              B        |L5.8|
                  |L5.4|
;;;470    	u32 i=0;
;;;471    
;;;472    
;;;473    	for (i=0;i<kol;i++)
;;;474    				__ASM volatile ("nop");
000004  bf00              NOP      
000006  1c49              ADDS     r1,r1,#1              ;473
                  |L5.8|
000008  4281              CMP      r1,r0                 ;473
00000a  d3fb              BCC      |L5.4|
;;;475    }
00000c  4770              BX       lr
;;;476    
                          ENDP


                          AREA ||i.indicate||, CODE, READONLY, ALIGN=2

                  indicate PROC
;;;1352   
;;;1353   void indicate(u8 numb_ind,u16 chislo_new)
000000  e92d5ffc          PUSH     {r2-r12,lr}
;;;1354   {
;;;1355   		 	uint16_t  pin=0;
000004  2500              MOVS     r5,#0
000006  460a              MOV      r2,r1                 ;1354
;;;1356   			u16 chislo=chislo_new; //indicators[numb_ind].chislo;
;;;1357   			u8 i=0, zn[6], null=1, simb=0;
000008  f04f0901          MOV      r9,#1
;;;1358   			u32   maximum=0;
;;;1359   			
;;;1360   
;;;1361   
;;;1362   			switch (numb_ind)
00000c  2805              CMP      r0,#5
00000e  d20d              BCS      |L6.44|
000010  e8dff000          TBB      [pc,r0]
000014  03050709          DCB      0x03,0x05,0x07,0x09
000018  0b00              DCB      0x0b,0x00
;;;1363   			{
;;;1364   				case 0x00:  // CS0
;;;1365   					pin=GPIO_Pin_0;
00001a  2501              MOVS     r5,#1
;;;1366   					break;
00001c  e006              B        |L6.44|
;;;1367   
;;;1368   				case 0x01:  // CS1
;;;1369   					pin=GPIO_Pin_1;
00001e  2502              MOVS     r5,#2
;;;1370   					break;
000020  e004              B        |L6.44|
;;;1371   
;;;1372   				case 0x02:  // CS2
;;;1373   					pin=GPIO_Pin_2;
000022  2504              MOVS     r5,#4
;;;1374   					break;
000024  e002              B        |L6.44|
;;;1375   
;;;1376   				case 0x03:  // CS3
;;;1377   					pin=GPIO_Pin_3;
000026  2508              MOVS     r5,#8
;;;1378   					break;
000028  e000              B        |L6.44|
;;;1379   
;;;1380   				case 0x04:  // CS4
;;;1381   					pin=GPIO_Pin_4;
00002a  2510              MOVS     r5,#0x10
                  |L6.44|
;;;1382   					break;								
;;;1383   			}
;;;1384   			
;;;1385   			switch (indicators[numb_ind].kol_cifr)
00002c  eb000140          ADD      r1,r0,r0,LSL #1
000030  485c              LDR      r0,|L6.420|
000032  eb000681          ADD      r6,r0,r1,LSL #2
000036  7870              LDRB     r0,[r6,#1]
000038  2806              CMP      r0,#6
00003a  d212              BCS      |L6.98|
00003c  e8dff000          TBB      [pc,r0]
000040  03050709          DCB      0x03,0x05,0x07,0x09
000044  0c0f              DCB      0x0c,0x0f
;;;1386   			{
;;;1387   				case 0x00:  // CS0
;;;1388   					maximum=1;
000046  2101              MOVS     r1,#1
;;;1389   					break;
000048  e00d              B        |L6.102|
;;;1390   				case 0x01:  // CS0
;;;1391   					maximum=10;
00004a  210a              MOVS     r1,#0xa
;;;1392   					break;			
00004c  e00b              B        |L6.102|
;;;1393   				case 0x02:  // CS0
;;;1394   					maximum=100;
00004e  2164              MOVS     r1,#0x64
;;;1395   					break;
000050  e009              B        |L6.102|
;;;1396   				case 0x03:  // CS0
;;;1397   					maximum=1000;
000052  f44f717a          MOV      r1,#0x3e8
;;;1398   					break;
000056  e006              B        |L6.102|
;;;1399   				case 0x04:  // CS0
;;;1400   					maximum=10000;
000058  f2427110          MOV      r1,#0x2710
;;;1401   					break;
00005c  e003              B        |L6.102|
;;;1402   				case 0x05:  // CS0
;;;1403   					maximum=100000;
00005e  4952              LDR      r1,|L6.424|
;;;1404   					break;	
000060  e001              B        |L6.102|
                  |L6.98|
;;;1405   				
;;;1406   				default:  // CS0
;;;1407   					maximum=10^(indicators[numb_ind].kol_cifr);
000062  f080010a          EOR      r1,r0,#0xa
                  |L6.102|
;;;1408   					break;					
;;;1409   			}
;;;1410   			
;;;1411   /*
;;;1412   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      //   GPIOB.2
;;;1413   				delay_spi(100);
;;;1414   				spi_send(0x0f);delay_spi(100);
;;;1415   				spi_send(0x00); delay_spi(100);
;;;1416   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      //   GPIOB.2
;;;1417   				delay_spi(1000);
;;;1418   			*/
;;;1419   /*
;;;1420   			// registr intensivnost
;;;1421   			GPIO_WriteBit(GPIOA, pin, Bit_RESET);      //   GPIOA.0			
;;;1422   			delay_spi(100);
;;;1423   			spi_send(0x0A);	
;;;1424   			delay_spi(100);
;;;1425   			spi_send(0xFF);																	
;;;1426   			delay_spi(100);			
;;;1427   			GPIO_WriteBit(GPIOA, pin, Bit_SET);      //   GPIOA.0
;;;1428   	*/		
;;;1429   			if (chislo>=maximum)   // reflow
;;;1430   			{			
;;;1431   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      
000066  f8dfa144          LDR      r10,|L6.428|
;;;1432   				delay_spi(zad_spi);
00006a  f8df8144          LDR      r8,|L6.432|
00006e  428a              CMP      r2,r1                 ;1429
000070  d345              BCC      |L6.254|
000072  2200              MOVS     r2,#0                 ;1431
000074  4629              MOV      r1,r5                 ;1431
000076  4654              MOV      r4,r10                ;1431
000078  4650              MOV      r0,r10                ;1431
00007a  f7fffffe          BL       GPIO_WriteBit
00007e  4647              MOV      r7,r8
000080  f8d80014          LDR      r0,[r8,#0x14]  ; zad_spi
000084  f7fffffe          BL       delay_spi
;;;1433   				spi_send(1);delay_spi(zad_spi);
000088  2001              MOVS     r0,#1
00008a  f7fffffe          BL       spi_send
00008e  6978              LDR      r0,[r7,#0x14]  ; zad_spi
000090  f7fffffe          BL       delay_spi
;;;1434   				spi_send(0x4F); delay_spi(zad_spi);		
000094  204f              MOVS     r0,#0x4f
000096  f7fffffe          BL       spi_send
00009a  6978              LDR      r0,[r7,#0x14]  ; zad_spi
00009c  f7fffffe          BL       delay_spi
;;;1435   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      
0000a0  2201              MOVS     r2,#1
0000a2  4629              MOV      r1,r5
0000a4  4620              MOV      r0,r4
0000a6  f7fffffe          BL       GPIO_WriteBit
;;;1436   			  delay_spi(zad_spi2);	
0000aa  69b8              LDR      r0,[r7,#0x18]  ; zad_spi2
0000ac  f7fffffe          BL       delay_spi
;;;1437   				
;;;1438   				for (i=2;i<indicators[numb_ind].kol_cifr+1;i++)  {
0000b0  2402              MOVS     r4,#2
0000b2  46d0              MOV      r8,r10                ;1431
0000b4  e01d              B        |L6.242|
                  |L6.182|
;;;1439   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      
0000b6  2200              MOVS     r2,#0
0000b8  4629              MOV      r1,r5
0000ba  4640              MOV      r0,r8
0000bc  f7fffffe          BL       GPIO_WriteBit
;;;1440   				delay_spi(zad_spi);
0000c0  6978              LDR      r0,[r7,#0x14]  ; zad_spi
0000c2  f7fffffe          BL       delay_spi
;;;1441   				spi_send((u8) i);delay_spi(zad_spi);
0000c6  4620              MOV      r0,r4
0000c8  f7fffffe          BL       spi_send
0000cc  6978              LDR      r0,[r7,#0x14]  ; zad_spi
0000ce  f7fffffe          BL       delay_spi
;;;1442   				spi_send(0); delay_spi(zad_spi);		
0000d2  2000              MOVS     r0,#0
0000d4  f7fffffe          BL       spi_send
0000d8  6978              LDR      r0,[r7,#0x14]  ; zad_spi
0000da  f7fffffe          BL       delay_spi
;;;1443   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      
0000de  2201              MOVS     r2,#1
0000e0  4629              MOV      r1,r5
0000e2  4640              MOV      r0,r8
0000e4  f7fffffe          BL       GPIO_WriteBit
;;;1444   			  delay_spi(zad_spi2);			}					
0000e8  69b8              LDR      r0,[r7,#0x18]  ; zad_spi2
0000ea  f7fffffe          BL       delay_spi
0000ee  1c64              ADDS     r4,r4,#1              ;1438
0000f0  b2e4              UXTB     r4,r4                 ;1438
                  |L6.242|
0000f2  7870              LDRB     r0,[r6,#1]            ;1438
0000f4  1c40              ADDS     r0,r0,#1              ;1438
0000f6  42a0              CMP      r0,r4                 ;1438
0000f8  d8dd              BHI      |L6.182|
                  |L6.250|
;;;1445   				return ;
;;;1446   			}	
;;;1447   
;;;1448   			for (i=indicators[numb_ind].kol_cifr;i>0;i--)
;;;1449   			{	
;;;1450   					zn[i]=(u8) (chislo%10);
;;;1451   					chislo=chislo/10;
;;;1452   			}
;;;1453   
;;;1454   			for (i=1;i<indicators[numb_ind].kol_cifr+1;i++)
;;;1455   			{	
;;;1456   						simb=symb_code[zn[i]];
;;;1457   				
;;;1458   						if ((indicators[numb_ind].kol_cifr-i)==indicators[numb_ind].pol_zap)
;;;1459   							simb+=0x80;
;;;1460   				
;;;1461   						if ((simb==0x7E)&(null))
;;;1462   							simb=0;
;;;1463   						else
;;;1464   							null=0;
;;;1465   						
;;;1466   						if (i==indicators[numb_ind].kol_cifr)
;;;1467   							simb&=0x7F;
;;;1468   	
;;;1469   						GPIO_WriteBit(GPIOA, pin, Bit_RESET);     	delay_spi(zad_spi);
;;;1470   						spi_send((u8) i);delay_spi(zad_spi);
;;;1471   						spi_send(simb); delay_spi(zad_spi);			
;;;1472   						GPIO_WriteBit(GPIOA, pin, Bit_SET);    			delay_spi(zad_spi2);				
;;;1473   			}
;;;1474   }
0000fa  e8bd9ffc          POP      {r2-r12,pc}
                  |L6.254|
0000fe  210a              MOVS     r1,#0xa               ;1391
000100  46eb              MOV      r11,sp                ;1357
000102  e008              B        |L6.278|
                  |L6.260|
000104  4613              MOV      r3,r2                 ;1450
000106  fbb2f2f1          UDIV     r2,r2,r1              ;1450
00010a  fb013412          MLS      r4,r1,r2,r3           ;1450
00010e  f80b4000          STRB     r4,[r11,r0]           ;1450
000112  1e40              SUBS     r0,r0,#1              ;1448
000114  b2c0              UXTB     r0,r0                 ;1448
                  |L6.278|
000116  2800              CMP      r0,#0                 ;1448
000118  d1f4              BNE      |L6.260|
00011a  2701              MOVS     r7,#1                 ;1454
00011c  e03c              B        |L6.408|
                  |L6.286|
00011e  4a24              LDR      r2,|L6.432|
000120  f81b1007          LDRB     r1,[r11,r7]           ;1456
000124  321c              ADDS     r2,r2,#0x1c           ;1456
000126  5c54              LDRB     r4,[r2,r1]            ;1456
000128  7a32              LDRB     r2,[r6,#8]            ;1458
00012a  1bc1              SUBS     r1,r0,r7              ;1458
00012c  4291              CMP      r1,r2                 ;1458
00012e  d101              BNE      |L6.308|
000130  3480              ADDS     r4,r4,#0x80           ;1459
000132  b2e4              UXTB     r4,r4                 ;1459
                  |L6.308|
000134  2c7e              CMP      r4,#0x7e              ;1461
000136  d005              BEQ      |L6.324|
000138  2100              MOVS     r1,#0                 ;1461
                  |L6.314|
00013a  ea110f09          TST      r1,r9                 ;1461
00013e  d003              BEQ      |L6.328|
000140  2400              MOVS     r4,#0                 ;1462
000142  e003              B        |L6.332|
                  |L6.324|
000144  2101              MOVS     r1,#1                 ;1461
000146  e7f8              B        |L6.314|
                  |L6.328|
000148  f04f0900          MOV      r9,#0                 ;1464
                  |L6.332|
00014c  42b8              CMP      r0,r7                 ;1466
00014e  d101              BNE      |L6.340|
000150  f004047f          AND      r4,r4,#0x7f           ;1467
                  |L6.340|
000154  2200              MOVS     r2,#0                 ;1469
000156  4629              MOV      r1,r5                 ;1469
000158  4650              MOV      r0,r10                ;1469
00015a  f7fffffe          BL       GPIO_WriteBit
00015e  f8d80014          LDR      r0,[r8,#0x14]         ;1469  ; zad_spi
000162  f7fffffe          BL       delay_spi
000166  4638              MOV      r0,r7                 ;1470
000168  f7fffffe          BL       spi_send
00016c  f8d80014          LDR      r0,[r8,#0x14]         ;1470  ; zad_spi
000170  f7fffffe          BL       delay_spi
000174  4620              MOV      r0,r4                 ;1471
000176  f7fffffe          BL       spi_send
00017a  f8d80014          LDR      r0,[r8,#0x14]         ;1471  ; zad_spi
00017e  f7fffffe          BL       delay_spi
000182  2201              MOVS     r2,#1                 ;1472
000184  4629              MOV      r1,r5                 ;1472
000186  4650              MOV      r0,r10                ;1472
000188  f7fffffe          BL       GPIO_WriteBit
00018c  f8d80018          LDR      r0,[r8,#0x18]         ;1472  ; zad_spi2
000190  f7fffffe          BL       delay_spi
000194  1c7f              ADDS     r7,r7,#1              ;1454
000196  b2ff              UXTB     r7,r7                 ;1454
                  |L6.408|
000198  7870              LDRB     r0,[r6,#1]            ;1454
00019a  1c41              ADDS     r1,r0,#1              ;1454
00019c  42b9              CMP      r1,r7                 ;1454
00019e  d8be              BHI      |L6.286|
0001a0  e7ab              B        |L6.250|
;;;1475   
                          ENDP

0001a2  0000              DCW      0x0000
                  |L6.420|
                          DCD      ||.bss||+0x742
                  |L6.424|
                          DCD      0x000186a0
                  |L6.428|
                          DCD      0x40020000
                  |L6.432|
                          DCD      ||.data||

                          AREA ||i.indicate_lin||, CODE, READONLY, ALIGN=2

                  indicate_lin PROC
;;;497    
;;;498    void indicate_lin(u8 numb_ind,u16 zn, u16 maks, u16 max_kol_st)
000000  e92d43fe          PUSH     {r1-r9,lr}
;;;499    {
000004  461d              MOV      r5,r3
000006  460b              MOV      r3,r1
;;;500    		uint16_t  pin=0;
;;;501    		const u8 tabl[9]={0,1,3,7,0xf,0x1f,0x3f,0x7f,0xff};
000008  a19d              ADR      r1,|L7.640|
00000a  2400              MOVS     r4,#0                 ;500
00000c  e9d16700          LDRD     r6,r7,[r1,#0]
000010  6889              LDR      r1,[r1,#8]
000012  9600              STR      r6,[sp,#0]
000014  e9cd7101          STRD     r7,r1,[sp,#4]
;;;502    		u8 viv=0;
;;;503    //		u16  zad_spi=1000,zad_spi2=10000;
;;;504    
;;;505    	 tmp=(u32) (max_kol_st*zn);
000018  4e9c              LDR      r6,|L7.652|
00001a  fb05f103          MUL      r1,r5,r3
;;;506    	 kol=(u8) (tmp/maks);
;;;507    
;;;508    	
;;;509    
;;;510    		  switch (numb_ind)
00001e  2805              CMP      r0,#5
000020  6131              STR      r1,[r6,#0x10]         ;506  ; tmp
000022  fbb1f1f2          UDIV     r1,r1,r2              ;506
000026  b2c9              UXTB     r1,r1                 ;506
000028  70b1              STRB     r1,[r6,#2]            ;506
00002a  d20d              BCS      |L7.72|
00002c  e8dff000          TBB      [pc,r0]
000030  03050709          DCB      0x03,0x05,0x07,0x09
000034  0b00              DCB      0x0b,0x00
;;;511    			{
;;;512    				case 0x00:  // CS0
;;;513    					pin=GPIO_Pin_0;
000036  2401              MOVS     r4,#1
;;;514    					break;
000038  e006              B        |L7.72|
;;;515    
;;;516    				case 0x01:  // CS1
;;;517    					pin=GPIO_Pin_1;
00003a  2402              MOVS     r4,#2
;;;518    					break;
00003c  e004              B        |L7.72|
;;;519    
;;;520    				case 0x02:  // CS2
;;;521    					pin=GPIO_Pin_2;
00003e  2404              MOVS     r4,#4
;;;522    					break;
000040  e002              B        |L7.72|
;;;523    
;;;524    				case 0x03:  // CS3
;;;525    					pin=GPIO_Pin_3;
000042  2408              MOVS     r4,#8
;;;526    					break;
000044  e000              B        |L7.72|
;;;527    
;;;528    				case 0x04:  // CS4
;;;529    					pin=GPIO_Pin_4;
000046  2410              MOVS     r4,#0x10
                  |L7.72|
;;;530    					break;								
;;;531    			}
;;;532    	
;;;533    		if (kol>max_kol_st)
;;;534    		{
;;;535    			if (max_kol_st=28)
;;;536    			{
;;;537    				GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(zad_spi);
000048  f8df8244          LDR      r8,|L7.656|
00004c  42a9              CMP      r1,r5                 ;533
00004e  d96b              BLS      |L7.296|
000050  2200              MOVS     r2,#0
000052  4621              MOV      r1,r4
000054  4640              MOV      r0,r8
000056  f7fffffe          BL       GPIO_WriteBit
00005a  6970              LDR      r0,[r6,#0x14]  ; zad_spi
00005c  f7fffffe          BL       delay_spi
;;;538    				spi_send((u8)0x01);											delay_spi(zad_spi);
000060  2001              MOVS     r0,#1
000062  f7fffffe          BL       spi_send
000066  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000068  f7fffffe          BL       delay_spi
;;;539    				spi_send((u8) 0); 										delay_spi(zad_spi);	
00006c  2000              MOVS     r0,#0
00006e  f7fffffe          BL       spi_send
000072  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000074  f7fffffe          BL       delay_spi
;;;540    				GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(zad_spi2);
000078  2201              MOVS     r2,#1
00007a  4621              MOV      r1,r4
00007c  4640              MOV      r0,r8
00007e  f7fffffe          BL       GPIO_WriteBit
000082  69b0              LDR      r0,[r6,#0x18]  ; zad_spi2
000084  f7fffffe          BL       delay_spi
;;;541    
;;;542    				GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(zad_spi);
000088  2200              MOVS     r2,#0
00008a  4621              MOV      r1,r4
00008c  4640              MOV      r0,r8
00008e  f7fffffe          BL       GPIO_WriteBit
000092  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000094  f7fffffe          BL       delay_spi
;;;543    				spi_send((u8)0x02);											delay_spi(zad_spi);
000098  2002              MOVS     r0,#2
00009a  f7fffffe          BL       spi_send
00009e  6970              LDR      r0,[r6,#0x14]  ; zad_spi
0000a0  f7fffffe          BL       delay_spi
;;;544    				spi_send((u8) 0); 										delay_spi(zad_spi);	
0000a4  2000              MOVS     r0,#0
0000a6  f7fffffe          BL       spi_send
0000aa  6970              LDR      r0,[r6,#0x14]  ; zad_spi
0000ac  f7fffffe          BL       delay_spi
;;;545    				GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(zad_spi2);
0000b0  2201              MOVS     r2,#1
0000b2  4621              MOV      r1,r4
0000b4  4640              MOV      r0,r8
0000b6  f7fffffe          BL       GPIO_WriteBit
0000ba  69b0              LDR      r0,[r6,#0x18]  ; zad_spi2
0000bc  f7fffffe          BL       delay_spi
;;;546    
;;;547    				GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(zad_spi);
0000c0  2200              MOVS     r2,#0
0000c2  4621              MOV      r1,r4
0000c4  4640              MOV      r0,r8
0000c6  f7fffffe          BL       GPIO_WriteBit
0000ca  6970              LDR      r0,[r6,#0x14]  ; zad_spi
0000cc  f7fffffe          BL       delay_spi
;;;548    				spi_send((u8)0x03);											delay_spi(zad_spi);
0000d0  2003              MOVS     r0,#3
0000d2  f7fffffe          BL       spi_send
0000d6  6970              LDR      r0,[r6,#0x14]  ; zad_spi
0000d8  f7fffffe          BL       delay_spi
;;;549    				spi_send((u8) 0); 										delay_spi(zad_spi);	
0000dc  2000              MOVS     r0,#0
0000de  f7fffffe          BL       spi_send
0000e2  6970              LDR      r0,[r6,#0x14]  ; zad_spi
0000e4  f7fffffe          BL       delay_spi
;;;550    				GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(zad_spi2);				
0000e8  2201              MOVS     r2,#1
0000ea  4621              MOV      r1,r4
0000ec  4640              MOV      r0,r8
0000ee  f7fffffe          BL       GPIO_WriteBit
0000f2  69b0              LDR      r0,[r6,#0x18]  ; zad_spi2
0000f4  f7fffffe          BL       delay_spi
;;;551    				
;;;552    				GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(zad_spi);
0000f8  2200              MOVS     r2,#0
0000fa  4621              MOV      r1,r4
0000fc  4640              MOV      r0,r8
0000fe  f7fffffe          BL       GPIO_WriteBit
000102  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000104  f7fffffe          BL       delay_spi
;;;553    				spi_send((u8)0x04);											delay_spi(zad_spi);
000108  2004              MOVS     r0,#4
00010a  f7fffffe          BL       spi_send
00010e  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000110  f7fffffe          BL       delay_spi
;;;554    				spi_send((u8) 0x08); 										delay_spi(zad_spi);	
000114  2008              MOVS     r0,#8
000116  f7fffffe          BL       spi_send
00011a  6970              LDR      r0,[r6,#0x14]  ; zad_spi
00011c  f7fffffe          BL       delay_spi
;;;555    				GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(zad_spi2);
000120  2201              MOVS     r2,#1
000122  4621              MOV      r1,r4
000124  4640              MOV      r0,r8
000126  e0a4              B        |L7.626|
                  |L7.296|
000128  466f              MOV      r7,sp                 ;501
;;;556    			}
;;;557    			return ;
;;;558    		}
;;;559    		if (kol>7)
00012a  2907              CMP      r1,#7
00012c  d902              BLS      |L7.308|
;;;560    			viv=tabl[8];
00012e  f89d5008          LDRB     r5,[sp,#8]
000132  e002              B        |L7.314|
                  |L7.308|
;;;561    		else
;;;562    			viv=tabl[kol%8];
000134  f0010007          AND      r0,r1,#7
000138  5c3d              LDRB     r5,[r7,r0]
                  |L7.314|
;;;563    		
;;;564    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(zad_spi);
00013a  2200              MOVS     r2,#0
00013c  4621              MOV      r1,r4
00013e  4640              MOV      r0,r8
000140  f7fffffe          BL       GPIO_WriteBit
000144  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000146  f7fffffe          BL       delay_spi
;;;565    		spi_send((u8)0x01);											delay_spi(zad_spi);
00014a  2001              MOVS     r0,#1
00014c  f7fffffe          BL       spi_send
000150  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000152  f7fffffe          BL       delay_spi
;;;566    		spi_send((u8) viv); 										delay_spi(zad_spi);	
000156  4628              MOV      r0,r5
000158  f7fffffe          BL       spi_send
00015c  6970              LDR      r0,[r6,#0x14]  ; zad_spi
00015e  f7fffffe          BL       delay_spi
;;;567    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(zad_spi2);
000162  2201              MOVS     r2,#1
000164  4621              MOV      r1,r4
000166  4640              MOV      r0,r8
000168  f7fffffe          BL       GPIO_WriteBit
00016c  69b0              LDR      r0,[r6,#0x18]  ; zad_spi2
00016e  f7fffffe          BL       delay_spi
;;;568    		
;;;569    		if (kol<8)
000172  78b0              LDRB     r0,[r6,#2]  ; kol
000174  2808              CMP      r0,#8
000176  d201              BCS      |L7.380|
;;;570    			viv=0;
000178  2500              MOVS     r5,#0
00017a  e00a              B        |L7.402|
                  |L7.380|
;;;571    		else
;;;572    		{
;;;573    			kol=kol-8;
00017c  3808              SUBS     r0,r0,#8
00017e  b2c0              UXTB     r0,r0
000180  70b0              STRB     r0,[r6,#2]
;;;574    			if (kol>7)
000182  2807              CMP      r0,#7
000184  d902              BLS      |L7.396|
;;;575    				viv=tabl[8];
000186  f89d5008          LDRB     r5,[sp,#8]
00018a  e002              B        |L7.402|
                  |L7.396|
;;;576    			else
;;;577    				viv=tabl[kol%8];
00018c  f0000007          AND      r0,r0,#7
000190  5c3d              LDRB     r5,[r7,r0]
                  |L7.402|
;;;578    		}
;;;579    		
;;;580    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(zad_spi);
000192  2200              MOVS     r2,#0
000194  4621              MOV      r1,r4
000196  4640              MOV      r0,r8
000198  f7fffffe          BL       GPIO_WriteBit
00019c  6970              LDR      r0,[r6,#0x14]  ; zad_spi
00019e  f7fffffe          BL       delay_spi
;;;581    		spi_send((u8)0x02);											delay_spi(zad_spi);
0001a2  2002              MOVS     r0,#2
0001a4  f7fffffe          BL       spi_send
0001a8  6970              LDR      r0,[r6,#0x14]  ; zad_spi
0001aa  f7fffffe          BL       delay_spi
;;;582    		spi_send((u8)viv); 											delay_spi(zad_spi);	
0001ae  4628              MOV      r0,r5
0001b0  f7fffffe          BL       spi_send
0001b4  6970              LDR      r0,[r6,#0x14]  ; zad_spi
0001b6  f7fffffe          BL       delay_spi
;;;583    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(zad_spi2);
0001ba  2201              MOVS     r2,#1
0001bc  4621              MOV      r1,r4
0001be  4640              MOV      r0,r8
0001c0  f7fffffe          BL       GPIO_WriteBit
0001c4  69b0              LDR      r0,[r6,#0x18]  ; zad_spi2
0001c6  f7fffffe          BL       delay_spi
;;;584    	
;;;585    		if (kol<8)
0001ca  78b0              LDRB     r0,[r6,#2]  ; kol
0001cc  2808              CMP      r0,#8
0001ce  d201              BCS      |L7.468|
;;;586    			viv=0;
0001d0  2500              MOVS     r5,#0
0001d2  e00a              B        |L7.490|
                  |L7.468|
;;;587    		else
;;;588    		{
;;;589    			kol=kol-8;
0001d4  3808              SUBS     r0,r0,#8
0001d6  b2c0              UXTB     r0,r0
0001d8  70b0              STRB     r0,[r6,#2]
;;;590    			if (kol>7)
0001da  2807              CMP      r0,#7
0001dc  d902              BLS      |L7.484|
;;;591    				viv=tabl[8];
0001de  f89d5008          LDRB     r5,[sp,#8]
0001e2  e002              B        |L7.490|
                  |L7.484|
;;;592    			else
;;;593    				viv=tabl[kol%8];
0001e4  f0000007          AND      r0,r0,#7
0001e8  5c3d              LDRB     r5,[r7,r0]
                  |L7.490|
;;;594    		}
;;;595    		
;;;596    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(zad_spi);
0001ea  2200              MOVS     r2,#0
0001ec  4621              MOV      r1,r4
0001ee  4640              MOV      r0,r8
0001f0  f7fffffe          BL       GPIO_WriteBit
0001f4  6970              LDR      r0,[r6,#0x14]  ; zad_spi
0001f6  f7fffffe          BL       delay_spi
;;;597    		spi_send((u8)0x03);delay_spi(zad_spi);
0001fa  2003              MOVS     r0,#3
0001fc  f7fffffe          BL       spi_send
000200  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000202  f7fffffe          BL       delay_spi
;;;598    		spi_send((u8)viv); delay_spi(zad_spi);	
000206  4628              MOV      r0,r5
000208  f7fffffe          BL       spi_send
00020c  6970              LDR      r0,[r6,#0x14]  ; zad_spi
00020e  f7fffffe          BL       delay_spi
;;;599    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(zad_spi2);
000212  2201              MOVS     r2,#1
000214  4621              MOV      r1,r4
000216  4640              MOV      r0,r8
000218  f7fffffe          BL       GPIO_WriteBit
00021c  69b0              LDR      r0,[r6,#0x18]  ; zad_spi2
00021e  f7fffffe          BL       delay_spi
;;;600    
;;;601    		if (kol<8)
000222  78b0              LDRB     r0,[r6,#2]  ; kol
000224  2808              CMP      r0,#8
000226  d201              BCS      |L7.556|
;;;602    			viv=0;
000228  2500              MOVS     r5,#0
00022a  e00a              B        |L7.578|
                  |L7.556|
;;;603    		else
;;;604    		{
;;;605    			kol=kol-8;
00022c  3808              SUBS     r0,r0,#8
00022e  b2c0              UXTB     r0,r0
000230  70b0              STRB     r0,[r6,#2]
;;;606    			if (kol>7)
000232  2807              CMP      r0,#7
000234  d902              BLS      |L7.572|
;;;607    				viv=tabl[8];
000236  f89d5008          LDRB     r5,[sp,#8]
00023a  e002              B        |L7.578|
                  |L7.572|
;;;608    			else
;;;609    				viv=tabl[kol%8];
00023c  f0000007          AND      r0,r0,#7
000240  5c3d              LDRB     r5,[r7,r0]
                  |L7.578|
;;;610    		}
;;;611    		
;;;612    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(zad_spi);
000242  2200              MOVS     r2,#0
000244  4621              MOV      r1,r4
000246  4647              MOV      r7,r8
000248  4640              MOV      r0,r8
00024a  f7fffffe          BL       GPIO_WriteBit
00024e  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000250  f7fffffe          BL       delay_spi
;;;613    		spi_send((u8)0x04);delay_spi(zad_spi);
000254  2004              MOVS     r0,#4
000256  f7fffffe          BL       spi_send
00025a  6970              LDR      r0,[r6,#0x14]  ; zad_spi
00025c  f7fffffe          BL       delay_spi
;;;614    		spi_send((u8)viv); delay_spi(zad_spi);	
000260  4628              MOV      r0,r5
000262  f7fffffe          BL       spi_send
000266  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000268  f7fffffe          BL       delay_spi
;;;615    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(zad_spi2);
00026c  2201              MOVS     r2,#1
00026e  4621              MOV      r1,r4
000270  4638              MOV      r0,r7
                  |L7.626|
000272  f7fffffe          BL       GPIO_WriteBit
000276  69b0              LDR      r0,[r6,#0x18]         ;555  ; zad_spi2
000278  f7fffffe          BL       delay_spi
;;;616    	//	kol=kol%8;			
;;;617    
;;;618    	
;;;619    }
00027c  e8bd83fe          POP      {r1-r9,pc}
;;;620    
                          ENDP

                  |L7.640|
000280  00                DCB      0
000281  0103070f          DCB      1,3,"\a",15,31,"?",127,255,0
000285  1f3f7fff
000289  00      
00028a  00                DCB      0
00028b  00                DCB      0
                  |L7.652|
                          DCD      ||.data||
                  |L7.656|
                          DCD      0x40020000

                          AREA ||i.indicate_test||, CODE, READONLY, ALIGN=2

                  indicate_test PROC
;;;1221   
;;;1222   void indicate_test(u8 numb_ind, u8 test_numb)
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;1223   {
;;;1224   	uint16_t  pin=0;
000004  2500              MOVS     r5,#0
000006  460c              MOV      r4,r1                 ;1223
;;;1225   	u8 i=0;
;;;1226   	
;;;1227   			switch (numb_ind)
000008  2805              CMP      r0,#5
00000a  d20d              BCS      |L8.40|
00000c  e8dff000          TBB      [pc,r0]
000010  03050709          DCB      0x03,0x05,0x07,0x09
000014  0b00              DCB      0x0b,0x00
;;;1228   			{
;;;1229   				case 0x00:  // CS0
;;;1230   					pin=GPIO_Pin_0;
000016  2501              MOVS     r5,#1
;;;1231   					break;
000018  e006              B        |L8.40|
;;;1232   
;;;1233   				case 0x01:  // CS1
;;;1234   					pin=GPIO_Pin_1;
00001a  2502              MOVS     r5,#2
;;;1235   					break;
00001c  e004              B        |L8.40|
;;;1236   
;;;1237   				case 0x02:  // CS2
;;;1238   					pin=GPIO_Pin_2;
00001e  2504              MOVS     r5,#4
;;;1239   					break;
000020  e002              B        |L8.40|
;;;1240   
;;;1241   				case 0x03:  // CS3
;;;1242   					pin=GPIO_Pin_3;
000022  2508              MOVS     r5,#8
;;;1243   					break;
000024  e000              B        |L8.40|
;;;1244   
;;;1245   				case 0x04:  // CS4
;;;1246   					pin=GPIO_Pin_4;
000026  2510              MOVS     r5,#0x10
                  |L8.40|
;;;1247   					break;								
;;;1248   			}
;;;1249   			
;;;1250   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      //   GPIOB.2
000028  4eb5              LDR      r6,|L8.768|
00002a  2200              MOVS     r2,#0
00002c  4629              MOV      r1,r5
00002e  4630              MOV      r0,r6
000030  f7fffffe          BL       GPIO_WriteBit
;;;1251   				delay_spi(1000);
000034  f44f777a          MOV      r7,#0x3e8
000038  4638              MOV      r0,r7
00003a  f7fffffe          BL       delay_spi
;;;1252   				spi_send(0x0f);delay_spi(1000);
00003e  200f              MOVS     r0,#0xf
000040  f7fffffe          BL       spi_send
000044  4638              MOV      r0,r7
000046  f7fffffe          BL       delay_spi
;;;1253   				spi_send(0x00); delay_spi(1000);
00004a  2000              MOVS     r0,#0
00004c  f7fffffe          BL       spi_send
000050  4638              MOV      r0,r7
000052  f7fffffe          BL       delay_spi
;;;1254   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      //   GPIOB.2
000056  2201              MOVS     r2,#1
000058  4629              MOV      r1,r5
00005a  4630              MOV      r0,r6
00005c  f7fffffe          BL       GPIO_WriteBit
;;;1255   				delay_spi(10000);
000060  f2427810          MOV      r8,#0x2710
000064  4640              MOV      r0,r8
000066  f7fffffe          BL       delay_spi
;;;1256   			
;;;1257     if (test_numb==8)
;;;1258   	{
;;;1259   				
;;;1260   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      
;;;1261   				delay_spi(1000);
;;;1262   				spi_send((u8) 0);delay_spi(1000);
;;;1263   				spi_send((u8) symb_code[0]); delay_spi(1000);		
00006a  f8df9298          LDR      r9,|L8.772|
00006e  2c08              CMP      r4,#8                 ;1257
000070  d17e              BNE      |L8.368|
000072  2200              MOVS     r2,#0                 ;1260
000074  4629              MOV      r1,r5                 ;1260
000076  4630              MOV      r0,r6                 ;1260
000078  f7fffffe          BL       GPIO_WriteBit
00007c  4638              MOV      r0,r7                 ;1261
00007e  f7fffffe          BL       delay_spi
000082  2000              MOVS     r0,#0                 ;1262
000084  f7fffffe          BL       spi_send
000088  4638              MOV      r0,r7                 ;1262
00008a  f7fffffe          BL       delay_spi
00008e  464c              MOV      r4,r9
000090  f8990000          LDRB     r0,[r9,#0]  ; symb_code
000094  f7fffffe          BL       spi_send
000098  4638              MOV      r0,r7
00009a  f7fffffe          BL       delay_spi
;;;1264   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      
00009e  2201              MOVS     r2,#1
0000a0  4629              MOV      r1,r5
0000a2  4630              MOV      r0,r6
0000a4  f7fffffe          BL       GPIO_WriteBit
;;;1265   			  delay_spi(10000);			
0000a8  4640              MOV      r0,r8
0000aa  f7fffffe          BL       delay_spi
;;;1266   
;;;1267   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      
0000ae  2200              MOVS     r2,#0
0000b0  4629              MOV      r1,r5
0000b2  4630              MOV      r0,r6
0000b4  f7fffffe          BL       GPIO_WriteBit
;;;1268   				delay_spi(1000);
0000b8  4638              MOV      r0,r7
0000ba  f7fffffe          BL       delay_spi
;;;1269   				spi_send((u8) 1);delay_spi(1000);
0000be  2001              MOVS     r0,#1
0000c0  f7fffffe          BL       spi_send
0000c4  4638              MOV      r0,r7
0000c6  f7fffffe          BL       delay_spi
;;;1270   				spi_send((u8) symb_code[1]); delay_spi(1000);		
0000ca  7860              LDRB     r0,[r4,#1]  ; symb_code
0000cc  f7fffffe          BL       spi_send
0000d0  4638              MOV      r0,r7
0000d2  f7fffffe          BL       delay_spi
;;;1271   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      
0000d6  2201              MOVS     r2,#1
0000d8  4629              MOV      r1,r5
0000da  4630              MOV      r0,r6
0000dc  f7fffffe          BL       GPIO_WriteBit
;;;1272   			  delay_spi(10000);	
0000e0  4640              MOV      r0,r8
0000e2  f7fffffe          BL       delay_spi
;;;1273   
;;;1274   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      
0000e6  2200              MOVS     r2,#0
0000e8  4629              MOV      r1,r5
0000ea  4630              MOV      r0,r6
0000ec  f7fffffe          BL       GPIO_WriteBit
;;;1275   				delay_spi(1000);
0000f0  4638              MOV      r0,r7
0000f2  f7fffffe          BL       delay_spi
;;;1276   				spi_send((u8) 2);delay_spi(1000);
0000f6  2002              MOVS     r0,#2
0000f8  f7fffffe          BL       spi_send
0000fc  4638              MOV      r0,r7
0000fe  f7fffffe          BL       delay_spi
;;;1277   				spi_send((u8) symb_code[2]); delay_spi(1000);		
000102  78a0              LDRB     r0,[r4,#2]  ; symb_code
000104  f7fffffe          BL       spi_send
000108  4638              MOV      r0,r7
00010a  f7fffffe          BL       delay_spi
;;;1278   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      
00010e  2201              MOVS     r2,#1
000110  4629              MOV      r1,r5
000112  4630              MOV      r0,r6
000114  f7fffffe          BL       GPIO_WriteBit
;;;1279   			  delay_spi(10000);	
000118  4640              MOV      r0,r8
00011a  f7fffffe          BL       delay_spi
;;;1280   				
;;;1281   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      
00011e  2200              MOVS     r2,#0
000120  4629              MOV      r1,r5
000122  4630              MOV      r0,r6
000124  f7fffffe          BL       GPIO_WriteBit
;;;1282   				delay_spi(1000);
000128  4638              MOV      r0,r7
00012a  f7fffffe          BL       delay_spi
;;;1283   				spi_send((u8) 3);delay_spi(1000);
00012e  2003              MOVS     r0,#3
000130  f7fffffe          BL       spi_send
000134  4638              MOV      r0,r7
000136  f7fffffe          BL       delay_spi
;;;1284   				spi_send((u8) symb_code[3]); delay_spi(1000);		
00013a  78e0              LDRB     r0,[r4,#3]  ; symb_code
00013c  f7fffffe          BL       spi_send
000140  4638              MOV      r0,r7
000142  f7fffffe          BL       delay_spi
;;;1285   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      
000146  2201              MOVS     r2,#1
000148  4629              MOV      r1,r5
00014a  4630              MOV      r0,r6
00014c  f7fffffe          BL       GPIO_WriteBit
;;;1286   			  delay_spi(10000);	
000150  4640              MOV      r0,r8
000152  f7fffffe          BL       delay_spi
;;;1287   				
;;;1288   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      
000156  2200              MOVS     r2,#0
000158  4629              MOV      r1,r5
00015a  4630              MOV      r0,r6
00015c  f7fffffe          BL       GPIO_WriteBit
;;;1289   				delay_spi(1000);
000160  4638              MOV      r0,r7
000162  f7fffffe          BL       delay_spi
;;;1290   				spi_send((u8) 4);delay_spi(1000);
000166  2004              MOVS     r0,#4
000168  f7fffffe          BL       spi_send
00016c  4638              MOV      r0,r7
00016e  e000              B        |L8.370|
                  |L8.368|
000170  e07f              B        |L8.626|
                  |L8.370|
000172  f7fffffe          BL       delay_spi
;;;1291   				spi_send((u8) symb_code[4]); delay_spi(1000);		
000176  7920              LDRB     r0,[r4,#4]  ; symb_code
000178  f7fffffe          BL       spi_send
00017c  4638              MOV      r0,r7
00017e  f7fffffe          BL       delay_spi
;;;1292   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      
000182  2201              MOVS     r2,#1
000184  4629              MOV      r1,r5
000186  4630              MOV      r0,r6
000188  f7fffffe          BL       GPIO_WriteBit
;;;1293   			  delay_spi(10000);	
00018c  4640              MOV      r0,r8
00018e  f7fffffe          BL       delay_spi
;;;1294   
;;;1295   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      
000192  2200              MOVS     r2,#0
000194  4629              MOV      r1,r5
000196  4630              MOV      r0,r6
000198  f7fffffe          BL       GPIO_WriteBit
;;;1296   				delay_spi(1000);
00019c  4638              MOV      r0,r7
00019e  f7fffffe          BL       delay_spi
;;;1297   				spi_send((u8) 5);delay_spi(1000);
0001a2  2005              MOVS     r0,#5
0001a4  f7fffffe          BL       spi_send
0001a8  4638              MOV      r0,r7
0001aa  f7fffffe          BL       delay_spi
;;;1298   				spi_send((u8) symb_code[5]); delay_spi(1000);		
0001ae  7960              LDRB     r0,[r4,#5]  ; symb_code
0001b0  f7fffffe          BL       spi_send
0001b4  4638              MOV      r0,r7
0001b6  f7fffffe          BL       delay_spi
;;;1299   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      
0001ba  2201              MOVS     r2,#1
0001bc  4629              MOV      r1,r5
0001be  4630              MOV      r0,r6
0001c0  f7fffffe          BL       GPIO_WriteBit
;;;1300   			  delay_spi(10000);	
0001c4  4640              MOV      r0,r8
0001c6  f7fffffe          BL       delay_spi
;;;1301   				
;;;1302   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      
0001ca  2200              MOVS     r2,#0
0001cc  4629              MOV      r1,r5
0001ce  4630              MOV      r0,r6
0001d0  f7fffffe          BL       GPIO_WriteBit
;;;1303   				delay_spi(1000);
0001d4  4638              MOV      r0,r7
0001d6  f7fffffe          BL       delay_spi
;;;1304   				spi_send((u8) 6);delay_spi(1000);
0001da  2006              MOVS     r0,#6
0001dc  f7fffffe          BL       spi_send
0001e0  4638              MOV      r0,r7
0001e2  f7fffffe          BL       delay_spi
;;;1305   				spi_send((u8) symb_code[6]); delay_spi(1000);		
0001e6  79a0              LDRB     r0,[r4,#6]  ; symb_code
0001e8  f7fffffe          BL       spi_send
0001ec  4638              MOV      r0,r7
0001ee  f7fffffe          BL       delay_spi
;;;1306   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      
0001f2  2201              MOVS     r2,#1
0001f4  4629              MOV      r1,r5
0001f6  4630              MOV      r0,r6
0001f8  f7fffffe          BL       GPIO_WriteBit
;;;1307   			  delay_spi(10000);	
0001fc  4640              MOV      r0,r8
0001fe  f7fffffe          BL       delay_spi
;;;1308   				
;;;1309   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      
000202  2200              MOVS     r2,#0
000204  4629              MOV      r1,r5
000206  4630              MOV      r0,r6
000208  f7fffffe          BL       GPIO_WriteBit
;;;1310   				delay_spi(1000);
00020c  4638              MOV      r0,r7
00020e  f7fffffe          BL       delay_spi
;;;1311   				spi_send((u8) 7);delay_spi(1000);
000212  2007              MOVS     r0,#7
000214  f7fffffe          BL       spi_send
000218  4638              MOV      r0,r7
00021a  f7fffffe          BL       delay_spi
;;;1312   				spi_send((u8) symb_code[7]); delay_spi(1000);		
00021e  79e0              LDRB     r0,[r4,#7]  ; symb_code
000220  f7fffffe          BL       spi_send
000224  4638              MOV      r0,r7
000226  f7fffffe          BL       delay_spi
;;;1313   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      
00022a  2201              MOVS     r2,#1
00022c  4629              MOV      r1,r5
00022e  4630              MOV      r0,r6
000230  f7fffffe          BL       GPIO_WriteBit
;;;1314   			  delay_spi(10000);	
000234  4640              MOV      r0,r8
000236  f7fffffe          BL       delay_spi
;;;1315   				
;;;1316   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      
00023a  2200              MOVS     r2,#0
00023c  4629              MOV      r1,r5
00023e  4630              MOV      r0,r6
000240  f7fffffe          BL       GPIO_WriteBit
;;;1317   				delay_spi(1000);
000244  4638              MOV      r0,r7
000246  f7fffffe          BL       delay_spi
;;;1318   				spi_send((u8) 8);delay_spi(1000);
00024a  2008              MOVS     r0,#8
00024c  f7fffffe          BL       spi_send
000250  4638              MOV      r0,r7
000252  f7fffffe          BL       delay_spi
;;;1319   				spi_send((u8) symb_code[8]); delay_spi(1000);		
000256  7a20              LDRB     r0,[r4,#8]  ; symb_code
000258  f7fffffe          BL       spi_send
00025c  4638              MOV      r0,r7
00025e  f7fffffe          BL       delay_spi
;;;1320   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      
000262  2201              MOVS     r2,#1
000264  4629              MOV      r1,r5
000266  4630              MOV      r0,r6
000268  f7fffffe          BL       GPIO_WriteBit
;;;1321   			  delay_spi(10000);
00026c  4640              MOV      r0,r8
00026e  f7fffffe          BL       delay_spi
                  |L8.626|
;;;1322   			}
;;;1323   
;;;1324   			if (1)
;;;1325   			{
;;;1326   				for (i=1;i<8;i++)
000272  2401              MOVS     r4,#1
                  |L8.628|
;;;1327   				{	
;;;1328   						GPIO_WriteBit(GPIOA, pin, Bit_RESET);      
000274  2200              MOVS     r2,#0
000276  4629              MOV      r1,r5
000278  4630              MOV      r0,r6
00027a  f7fffffe          BL       GPIO_WriteBit
;;;1329   						delay_spi(1000);
00027e  4638              MOV      r0,r7
000280  f7fffffe          BL       delay_spi
;;;1330   						spi_send((u8) i); delay_spi(1000);
000284  4620              MOV      r0,r4
000286  f7fffffe          BL       spi_send
00028a  4638              MOV      r0,r7
00028c  f7fffffe          BL       delay_spi
;;;1331   						spi_send((u8) symb_code[1]); delay_spi(1000);		
000290  f8990001          LDRB     r0,[r9,#1]  ; symb_code
000294  f7fffffe          BL       spi_send
000298  4638              MOV      r0,r7
00029a  f7fffffe          BL       delay_spi
;;;1332   						GPIO_WriteBit(GPIOA, pin, Bit_SET);      
00029e  2201              MOVS     r2,#1
0002a0  4629              MOV      r1,r5
0002a2  4630              MOV      r0,r6
0002a4  f7fffffe          BL       GPIO_WriteBit
;;;1333   						delay_spi(10000);		
0002a8  4642              MOV      r2,r8
0002aa  4640              MOV      r0,r8
0002ac  f7fffffe          BL       delay_spi
0002b0  1c64              ADDS     r4,r4,#1              ;1326
0002b2  b2e4              UXTB     r4,r4                 ;1326
0002b4  2c08              CMP      r4,#8                 ;1326
0002b6  d3dd              BCC      |L8.628|
;;;1334   				}
;;;1335   			}
;;;1336   			
;;;1337   			if (9)
;;;1338   			{
;;;1339   				for (i=1;i<8;i++)
0002b8  2401              MOVS     r4,#1
0002ba  4690              MOV      r8,r2                 ;1255
                  |L8.700|
;;;1340   				{	
;;;1341   						GPIO_WriteBit(GPIOA, pin, Bit_RESET);      
0002bc  2200              MOVS     r2,#0
0002be  4629              MOV      r1,r5
0002c0  4630              MOV      r0,r6
0002c2  f7fffffe          BL       GPIO_WriteBit
;;;1342   						delay_spi(1000);
0002c6  4638              MOV      r0,r7
0002c8  f7fffffe          BL       delay_spi
;;;1343   						spi_send((u8) i); delay_spi(1000);
0002cc  4620              MOV      r0,r4
0002ce  f7fffffe          BL       spi_send
0002d2  4638              MOV      r0,r7
0002d4  f7fffffe          BL       delay_spi
;;;1344   						spi_send((u8) 0); delay_spi(1000);		
0002d8  2000              MOVS     r0,#0
0002da  f7fffffe          BL       spi_send
0002de  4638              MOV      r0,r7
0002e0  f7fffffe          BL       delay_spi
;;;1345   						GPIO_WriteBit(GPIOA, pin, Bit_SET);      
0002e4  2201              MOVS     r2,#1
0002e6  4629              MOV      r1,r5
0002e8  4630              MOV      r0,r6
0002ea  f7fffffe          BL       GPIO_WriteBit
;;;1346   						delay_spi(10000);		
0002ee  4640              MOV      r0,r8
0002f0  f7fffffe          BL       delay_spi
0002f4  1c64              ADDS     r4,r4,#1              ;1339
0002f6  b2e4              UXTB     r4,r4                 ;1339
0002f8  2c08              CMP      r4,#8                 ;1339
0002fa  d3df              BCC      |L8.700|
;;;1347   				}
;;;1348   			}
;;;1349   
;;;1350   }
0002fc  e8bd87f0          POP      {r4-r10,pc}
;;;1351   
                          ENDP

                  |L8.768|
                          DCD      0x40020000
                  |L8.772|
                          DCD      ||.data||+0x1c

                          AREA ||i.indicate_time||, CODE, READONLY, ALIGN=2

                  indicate_time PROC
;;;1476   
;;;1477   void indicate_time(u8 numb_ind, u8 hh, u8 mm, u8 en)
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;1478   {
;;;1479   		 	uint16_t  pin=0;
000004  2400              MOVS     r4,#0
000006  461e              MOV      r6,r3                 ;1478
000008  4691              MOV      r9,r2                 ;1478
00000a  460d              MOV      r5,r1                 ;1478
;;;1480   
;;;1481   
;;;1482   			switch (numb_ind)
00000c  2805              CMP      r0,#5
00000e  d20d              BCS      |L9.44|
000010  e8dff000          TBB      [pc,r0]
000014  03050709          DCB      0x03,0x05,0x07,0x09
000018  0b00              DCB      0x0b,0x00
;;;1483   			{
;;;1484   				case 0x00:  // CS0
;;;1485   					pin=GPIO_Pin_0;
00001a  2401              MOVS     r4,#1
;;;1486   					break;
00001c  e006              B        |L9.44|
;;;1487   
;;;1488   				case 0x01:  // CS1
;;;1489   					pin=GPIO_Pin_1;
00001e  2402              MOVS     r4,#2
;;;1490   					break;
000020  e004              B        |L9.44|
;;;1491   
;;;1492   				case 0x02:  // CS2
;;;1493   					pin=GPIO_Pin_2;
000022  2404              MOVS     r4,#4
;;;1494   					break;
000024  e002              B        |L9.44|
;;;1495   
;;;1496   				case 0x03:  // CS3
;;;1497   					pin=GPIO_Pin_3;
000026  2408              MOVS     r4,#8
;;;1498   					break;
000028  e000              B        |L9.44|
;;;1499   
;;;1500   				case 0x04:  // CS4
;;;1501   					pin=GPIO_Pin_4;
00002a  2410              MOVS     r4,#0x10
                  |L9.44|
;;;1502   					break;
;;;1503   								
;;;1504   			}
;;;1505   		
;;;1506   
;;;1507   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      //   GPIOB.2
00002c  f8df8158          LDR      r8,|L9.392|
000030  2200              MOVS     r2,#0
000032  4621              MOV      r1,r4
000034  4647              MOV      r7,r8
000036  4640              MOV      r0,r8
000038  f7fffffe          BL       GPIO_WriteBit
;;;1508   				delay_spi(100);
00003c  2064              MOVS     r0,#0x64
00003e  f7fffffe          BL       delay_spi
;;;1509   				spi_send(0x0f);delay_spi(100);
000042  200f              MOVS     r0,#0xf
000044  f7fffffe          BL       spi_send
000048  2064              MOVS     r0,#0x64
00004a  f7fffffe          BL       delay_spi
;;;1510   				spi_send(0x00); delay_spi(100);
00004e  2000              MOVS     r0,#0
000050  f7fffffe          BL       spi_send
000054  2064              MOVS     r0,#0x64
000056  f7fffffe          BL       delay_spi
;;;1511   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      //   GPIOB.2
00005a  2201              MOVS     r2,#1
00005c  4621              MOV      r1,r4
00005e  4638              MOV      r0,r7
000060  f7fffffe          BL       GPIO_WriteBit
;;;1512   				delay_spi(1000);
000064  f44f707a          MOV      r0,#0x3e8
000068  f7fffffe          BL       delay_spi
;;;1513   /*
;;;1514   			// registr intensivnost
;;;1515   			GPIO_WriteBit(GPIOA, pin, Bit_RESET);      //   GPIOA.0			
;;;1516   			delay_spi(100);
;;;1517   			spi_send(0x0A);	
;;;1518   			delay_spi(100);
;;;1519   			spi_send(0xFF);																	
;;;1520   			delay_spi(100);			
;;;1521   			GPIO_WriteBit(GPIOA, pin, Bit_SET);      //   GPIOA.0			
;;;1522   	*/
;;;1523   			GPIO_WriteBit(GPIOA, pin, Bit_RESET);      //   GPIOB.2 
00006c  2200              MOVS     r2,#0
00006e  4621              MOV      r1,r4
000070  4638              MOV      r0,r7
000072  f7fffffe          BL       GPIO_WriteBit
;;;1524   			delay_spi(100);
000076  2064              MOVS     r0,#0x64
000078  f7fffffe          BL       delay_spi
;;;1525   			spi_send(1);delay_spi(100);
00007c  2001              MOVS     r0,#1
00007e  f7fffffe          BL       spi_send
000082  2064              MOVS     r0,#0x64
000084  f7fffffe          BL       delay_spi
;;;1526   			if (hh/10==0)
;;;1527   				spi_send(0); 
;;;1528   			else
;;;1529   				spi_send(symb_code[hh/10]); 
000088  f04f0a0a          MOV      r10,#0xa
00008c  fbb5f7fa          UDIV     r7,r5,r10
000090  f8dfb0f8          LDR      r11,|L9.396|
000094  2d0a              CMP      r5,#0xa               ;1526
000096  d201              BCS      |L9.156|
000098  2000              MOVS     r0,#0                 ;1527
00009a  e001              B        |L9.160|
                  |L9.156|
00009c  f81b0007          LDRB     r0,[r11,r7]
                  |L9.160|
0000a0  f7fffffe          BL       spi_send
;;;1530   			delay_spi(100);	
0000a4  2064              MOVS     r0,#0x64
0000a6  f7fffffe          BL       delay_spi
;;;1531   			GPIO_WriteBit(GPIOA, pin, Bit_SET);     
0000aa  2201              MOVS     r2,#1
0000ac  4621              MOV      r1,r4
0000ae  4836              LDR      r0,|L9.392|
0000b0  f7fffffe          BL       GPIO_WriteBit
;;;1532   			delay_spi(1000);	
0000b4  f44f707a          MOV      r0,#0x3e8
0000b8  f7fffffe          BL       delay_spi
;;;1533   	
;;;1534   			GPIO_WriteBit(GPIOA, pin, Bit_RESET);      //   GPIOB.2 
0000bc  2200              MOVS     r2,#0
0000be  4621              MOV      r1,r4
0000c0  4831              LDR      r0,|L9.392|
0000c2  f7fffffe          BL       GPIO_WriteBit
;;;1535   			delay_spi(100);
0000c6  2064              MOVS     r0,#0x64
0000c8  f7fffffe          BL       delay_spi
;;;1536   			spi_send(2);delay_spi(100);
0000cc  2002              MOVS     r0,#2
0000ce  f7fffffe          BL       spi_send
0000d2  2064              MOVS     r0,#0x64
0000d4  f7fffffe          BL       delay_spi
;;;1537   			spi_send(0x80*en+symb_code[hh%10]); delay_spi(100);	
0000d8  fb0a5117          MLS      r1,r10,r7,r5
0000dc  46d0              MOV      r8,r10
0000de  f81b0001          LDRB     r0,[r11,r1]
0000e2  eb0010c6          ADD      r0,r0,r6,LSL #7
0000e6  f7fffffe          BL       spi_send
0000ea  2064              MOVS     r0,#0x64
0000ec  f7fffffe          BL       delay_spi
;;;1538   			GPIO_WriteBit(GPIOA, pin, Bit_SET);     
0000f0  2201              MOVS     r2,#1
0000f2  4621              MOV      r1,r4
0000f4  4824              LDR      r0,|L9.392|
0000f6  f7fffffe          BL       GPIO_WriteBit
;;;1539   			delay_spi(1000);				
0000fa  f44f707a          MOV      r0,#0x3e8
0000fe  f7fffffe          BL       delay_spi
;;;1540   			
;;;1541   			GPIO_WriteBit(GPIOA, pin, Bit_RESET);      //   GPIOB.2 
000102  2200              MOVS     r2,#0
000104  4621              MOV      r1,r4
000106  4820              LDR      r0,|L9.392|
000108  f7fffffe          BL       GPIO_WriteBit
;;;1542   			delay_spi(100);
00010c  2064              MOVS     r0,#0x64
00010e  f7fffffe          BL       delay_spi
;;;1543   			spi_send(3);delay_spi(100);
000112  2003              MOVS     r0,#3
000114  f7fffffe          BL       spi_send
000118  2064              MOVS     r0,#0x64
00011a  f7fffffe          BL       delay_spi
;;;1544   			spi_send(1*en+symb_code_min[mm/10]); delay_spi(100);	
00011e  fbb9f5f8          UDIV     r5,r9,r8
000122  4f1a              LDR      r7,|L9.396|
000124  370d              ADDS     r7,r7,#0xd
000126  5d78              LDRB     r0,[r7,r5]
000128  4430              ADD      r0,r0,r6
00012a  f7fffffe          BL       spi_send
00012e  2064              MOVS     r0,#0x64
000130  f7fffffe          BL       delay_spi
;;;1545   			GPIO_WriteBit(GPIOA, pin, Bit_SET);     
000134  2201              MOVS     r2,#1
000136  4621              MOV      r1,r4
000138  4813              LDR      r0,|L9.392|
00013a  f7fffffe          BL       GPIO_WriteBit
;;;1546   			delay_spi(1000);	
00013e  f44f707a          MOV      r0,#0x3e8
000142  f7fffffe          BL       delay_spi
;;;1547   
;;;1548   			GPIO_WriteBit(GPIOA, pin, Bit_RESET);      //   GPIOB.2 
000146  2200              MOVS     r2,#0
000148  4621              MOV      r1,r4
00014a  480f              LDR      r0,|L9.392|
00014c  f7fffffe          BL       GPIO_WriteBit
;;;1549   			delay_spi(100);
000150  2064              MOVS     r0,#0x64
000152  f7fffffe          BL       delay_spi
;;;1550   			spi_send(4);delay_spi(100);
000156  2004              MOVS     r0,#4
000158  f7fffffe          BL       spi_send
00015c  2064              MOVS     r0,#0x64
00015e  f7fffffe          BL       delay_spi
;;;1551   			spi_send(symb_code_min[mm%10]); delay_spi(100);	
000162  fb089115          MLS      r1,r8,r5,r9
000166  5c78              LDRB     r0,[r7,r1]
000168  f7fffffe          BL       spi_send
00016c  2064              MOVS     r0,#0x64
00016e  f7fffffe          BL       delay_spi
;;;1552   			GPIO_WriteBit(GPIOA, pin, Bit_SET);     
000172  2201              MOVS     r2,#1
000174  4621              MOV      r1,r4
000176  4804              LDR      r0,|L9.392|
000178  f7fffffe          BL       GPIO_WriteBit
;;;1553   			delay_spi(1000);	
00017c  e8bd5ff0          POP      {r4-r12,lr}
000180  f44f707a          MOV      r0,#0x3e8
000184  f7ffbffe          B.W      delay_spi
;;;1554   
;;;1555   		
;;;1556   }
;;;1557   
                          ENDP

                  |L9.392|
                          DCD      0x40020000
                  |L9.396|
                          DCD      ||.data||+0x1c

                          AREA ||i.init_ind||, CODE, READONLY, ALIGN=2

                  init_ind PROC
;;;1076   
;;;1077   void init_ind(u8 numb_ind, u8 kol_ind, u8 type_ind)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;1078   {
;;;1079   			uint16_t  pin=0;
000004  2500              MOVS     r5,#0
000006  4688              MOV      r8,r1                 ;1078
;;;1080   			u8 i=0;
;;;1081   //			u16  zad_spi=1000,zad_spi2=10000;
;;;1082   
;;;1083   
;;;1084   		  switch (numb_ind)
000008  2805              CMP      r0,#5
00000a  d20d              BCS      |L10.40|
00000c  e8dff000          TBB      [pc,r0]
000010  03050709          DCB      0x03,0x05,0x07,0x09
000014  0b00              DCB      0x0b,0x00
;;;1085   			{
;;;1086   				case 0x00:  // CS0
;;;1087   					pin=GPIO_Pin_0;
000016  2501              MOVS     r5,#1
;;;1088   					break;
000018  e006              B        |L10.40|
;;;1089   
;;;1090   				case 0x01:  // CS1
;;;1091   					pin=GPIO_Pin_1;
00001a  2502              MOVS     r5,#2
;;;1092   					break;
00001c  e004              B        |L10.40|
;;;1093   
;;;1094   				case 0x02:  // CS2
;;;1095   					pin=GPIO_Pin_2;
00001e  2504              MOVS     r5,#4
;;;1096   					break;
000020  e002              B        |L10.40|
;;;1097   
;;;1098   				case 0x03:  // CS3
;;;1099   					pin=GPIO_Pin_3;
000022  2508              MOVS     r5,#8
;;;1100   					break;
000024  e000              B        |L10.40|
;;;1101   
;;;1102   				case 0x04:  // CS4
;;;1103   					pin=GPIO_Pin_4;
000026  2510              MOVS     r5,#0x10
                  |L10.40|
;;;1104   					break;								
;;;1105   			}
;;;1106   			// shutdown off
;;;1107   			GPIO_WriteBit(GPIOA, pin, Bit_RESET);  delay_spi(zad_spi);		
000028  4f5b              LDR      r7,|L10.408|
00002a  2200              MOVS     r2,#0
00002c  4629              MOV      r1,r5
00002e  4638              MOV      r0,r7
000030  f7fffffe          BL       GPIO_WriteBit
000034  4e59              LDR      r6,|L10.412|
000036  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000038  f7fffffe          BL       delay_spi
;;;1108   			spi_send(0x0C);			delay_spi(zad_spi);
00003c  200c              MOVS     r0,#0xc
00003e  f7fffffe          BL       spi_send
000042  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000044  f7fffffe          BL       delay_spi
;;;1109   			spi_send(0x01);			delay_spi(zad_spi);			
000048  2001              MOVS     r0,#1
00004a  f7fffffe          BL       spi_send
00004e  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000050  f7fffffe          BL       delay_spi
;;;1110   			GPIO_WriteBit(GPIOA, pin, Bit_SET);      		delay_spi(zad_spi2);
000054  2201              MOVS     r2,#1
000056  4629              MOV      r1,r5
000058  4638              MOV      r0,r7
00005a  f7fffffe          BL       GPIO_WriteBit
00005e  69b0              LDR      r0,[r6,#0x18]  ; zad_spi2
000060  f7fffffe          BL       delay_spi
;;;1111   
;;;1112   		for (i=1;i<9;i++)
000064  2401              MOVS     r4,#1
                  |L10.102|
;;;1113   		{
;;;1114   			// blank all
;;;1115   			GPIO_WriteBit(GPIOA, pin, Bit_RESET);      delay_spi(zad_spi);
000066  2200              MOVS     r2,#0
000068  4629              MOV      r1,r5
00006a  4638              MOV      r0,r7
00006c  f7fffffe          BL       GPIO_WriteBit
000070  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000072  f7fffffe          BL       delay_spi
;;;1116   			spi_send((u8) i);					delay_spi(zad_spi);
000076  4620              MOV      r0,r4
000078  f7fffffe          BL       spi_send
00007c  6970              LDR      r0,[r6,#0x14]  ; zad_spi
00007e  f7fffffe          BL       delay_spi
;;;1117   			spi_send(0x00);					  delay_spi(zad_spi);			
000082  2000              MOVS     r0,#0
000084  f7fffffe          BL       spi_send
000088  6970              LDR      r0,[r6,#0x14]  ; zad_spi
00008a  f7fffffe          BL       delay_spi
;;;1118   			GPIO_WriteBit(GPIOA, pin, Bit_SET);      		delay_spi(zad_spi2);
00008e  2201              MOVS     r2,#1
000090  4629              MOV      r1,r5
000092  4638              MOV      r0,r7
000094  f7fffffe          BL       GPIO_WriteBit
000098  69b0              LDR      r0,[r6,#0x18]  ; zad_spi2
00009a  f7fffffe          BL       delay_spi
00009e  1c64              ADDS     r4,r4,#1              ;1112
0000a0  b2e4              UXTB     r4,r4                 ;1112
0000a2  2c09              CMP      r4,#9                 ;1112
0000a4  d3df              BCC      |L10.102|
;;;1119   		}
;;;1120   		
;;;1121   			// scan limit
;;;1122   			GPIO_WriteBit(GPIOA, pin, Bit_RESET);   			delay_spi(zad_spi);
0000a6  2200              MOVS     r2,#0
0000a8  4629              MOV      r1,r5
0000aa  4638              MOV      r0,r7
0000ac  f7fffffe          BL       GPIO_WriteBit
0000b0  6970              LDR      r0,[r6,#0x14]  ; zad_spi
0000b2  f7fffffe          BL       delay_spi
;;;1123   			spi_send(0x0B);				delay_spi(zad_spi);
0000b6  200b              MOVS     r0,#0xb
0000b8  f7fffffe          BL       spi_send
0000bc  6970              LDR      r0,[r6,#0x14]  ; zad_spi
0000be  f7fffffe          BL       delay_spi
;;;1124   			spi_send(kol_ind-1);	delay_spi(zad_spi);			
0000c2  f1a80001          SUB      r0,r8,#1
0000c6  b280              UXTH     r0,r0
0000c8  f7fffffe          BL       spi_send
0000cc  6970              LDR      r0,[r6,#0x14]  ; zad_spi
0000ce  f7fffffe          BL       delay_spi
;;;1125   			GPIO_WriteBit(GPIOA, pin, Bit_SET);      			delay_spi(zad_spi2);
0000d2  2201              MOVS     r2,#1
0000d4  4629              MOV      r1,r5
0000d6  4638              MOV      r0,r7
0000d8  f7fffffe          BL       GPIO_WriteBit
0000dc  69b0              LDR      r0,[r6,#0x18]  ; zad_spi2
0000de  f7fffffe          BL       delay_spi
;;;1126   			
;;;1127   			// registr intensivnost
;;;1128   			GPIO_WriteBit(GPIOA, pin, Bit_RESET);      delay_spi(zad_spi);
0000e2  2200              MOVS     r2,#0
0000e4  4629              MOV      r1,r5
0000e6  4638              MOV      r0,r7
0000e8  f7fffffe          BL       GPIO_WriteBit
0000ec  6970              LDR      r0,[r6,#0x14]  ; zad_spi
0000ee  f7fffffe          BL       delay_spi
;;;1129   			spi_send(0x0A);					delay_spi(zad_spi);
0000f2  200a              MOVS     r0,#0xa
0000f4  f7fffffe          BL       spi_send
0000f8  6970              LDR      r0,[r6,#0x14]  ; zad_spi
0000fa  f7fffffe          BL       delay_spi
;;;1130   			spi_send(0x0F);					delay_spi(zad_spi);			
0000fe  200f              MOVS     r0,#0xf
000100  f7fffffe          BL       spi_send
000104  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000106  f7fffffe          BL       delay_spi
;;;1131   			GPIO_WriteBit(GPIOA, pin, Bit_SET);     delay_spi(zad_spi2);
00010a  2201              MOVS     r2,#1
00010c  4629              MOV      r1,r5
00010e  4638              MOV      r0,r7
000110  f7fffffe          BL       GPIO_WriteBit
000114  69b0              LDR      r0,[r6,#0x18]  ; zad_spi2
000116  f7fffffe          BL       delay_spi
;;;1132   
;;;1133   	
;;;1134   		// test
;;;1135   			GPIO_WriteBit(GPIOA, pin, Bit_RESET);      delay_spi(zad_spi);
00011a  2200              MOVS     r2,#0
00011c  4629              MOV      r1,r5
00011e  4638              MOV      r0,r7
000120  f7fffffe          BL       GPIO_WriteBit
000124  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000126  f7fffffe          BL       delay_spi
;;;1136   			spi_send((u8) 0x0f);					delay_spi(zad_spi);
00012a  200f              MOVS     r0,#0xf
00012c  f7fffffe          BL       spi_send
000130  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000132  f7fffffe          BL       delay_spi
;;;1137   			spi_send(0x01);					delay_spi(zad_spi);			
000136  2001              MOVS     r0,#1
000138  f7fffffe          BL       spi_send
00013c  6970              LDR      r0,[r6,#0x14]  ; zad_spi
00013e  f7fffffe          BL       delay_spi
;;;1138   			GPIO_WriteBit(GPIOA, pin, Bit_SET);      delay_spi(zad_spi2);
000142  2201              MOVS     r2,#1
000144  4629              MOV      r1,r5
000146  4638              MOV      r0,r7
000148  f7fffffe          BL       GPIO_WriteBit
00014c  69b0              LDR      r0,[r6,#0x18]  ; zad_spi2
00014e  f7fffffe          BL       delay_spi
;;;1139   
;;;1140   		  delay_spi(zad_spi2*50);	
000152  69b0              LDR      r0,[r6,#0x18]  ; zad_spi2
000154  2132              MOVS     r1,#0x32
000156  4348              MULS     r0,r1,r0
000158  f7fffffe          BL       delay_spi
;;;1141   		
;;;1142   			GPIO_WriteBit(GPIOA, pin, Bit_RESET);      delay_spi(zad_spi);
00015c  2200              MOVS     r2,#0
00015e  4629              MOV      r1,r5
000160  4638              MOV      r0,r7
000162  f7fffffe          BL       GPIO_WriteBit
000166  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000168  f7fffffe          BL       delay_spi
;;;1143   			spi_send((u8) 0x0f);					delay_spi(zad_spi);
00016c  200f              MOVS     r0,#0xf
00016e  f7fffffe          BL       spi_send
000172  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000174  f7fffffe          BL       delay_spi
;;;1144   			spi_send(0x00);					delay_spi(zad_spi);			
000178  2000              MOVS     r0,#0
00017a  f7fffffe          BL       spi_send
00017e  6970              LDR      r0,[r6,#0x14]  ; zad_spi
000180  f7fffffe          BL       delay_spi
;;;1145   			GPIO_WriteBit(GPIOA, pin, Bit_SET);     delay_spi(zad_spi2);					
000184  2201              MOVS     r2,#1
000186  4629              MOV      r1,r5
000188  4638              MOV      r0,r7
00018a  f7fffffe          BL       GPIO_WriteBit
00018e  69b0              LDR      r0,[r6,#0x18]  ; zad_spi2
000190  e8bd41f0          POP      {r4-r8,lr}
000194  f7ffbffe          B.W      delay_spi
;;;1146   	//		test_ind_all();
;;;1147   	//	test_lin();
;;;1148   }
;;;1149   
                          ENDP

                  |L10.408|
                          DCD      0x40020000
                  |L10.412|
                          DCD      ||.data||

                          AREA ||i.main||, CODE, READONLY, ALIGN=2

                  main PROC
;;;1563   */
;;;1564   int main(void)
000000  b088              SUB      sp,sp,#0x20
;;;1565   { 
;;;1566   	u8 i=0;
;;;1567   	GPIO_InitTypeDef GPIO_InitStructure;
;;;1568     NVIC_InitTypeDef NVIC_InitStructure;
;;;1569     RCC_ClocksTypeDef RCC_ClockFreq;
;;;1570   	
;;;1571   	uint16_t data[32];
;;;1572   	
;;;1573   	TDateTime DT;
;;;1574   
;;;1575   
;;;1576     /* Initialize LEDS */
;;;1577     STM_EVAL_LEDInit(LED3);
000002  2001              MOVS     r0,#1
000004  f7fffffe          BL       STM_EVAL_LEDInit
;;;1578     STM_EVAL_LEDInit(LED4);
000008  2000              MOVS     r0,#0
00000a  f7fffffe          BL       STM_EVAL_LEDInit
;;;1579     STM_EVAL_LEDInit(LED5);
00000e  2002              MOVS     r0,#2
000010  f7fffffe          BL       STM_EVAL_LEDInit
;;;1580     STM_EVAL_LEDInit(LED6);
000014  2003              MOVS     r0,#3
000016  f7fffffe          BL       STM_EVAL_LEDInit
;;;1581    
;;;1582     /* Green Led On: start of application */
;;;1583   	STM_EVAL_LEDOn(LED3);
00001a  2001              MOVS     r0,#1
00001c  f7fffffe          BL       STM_EVAL_LEDOn
;;;1584   	STM_EVAL_LEDOn(LED4);
000020  2000              MOVS     r0,#0
000022  f7fffffe          BL       STM_EVAL_LEDOn
;;;1585   	STM_EVAL_LEDOn(LED5);
000026  2002              MOVS     r0,#2
000028  f7fffffe          BL       STM_EVAL_LEDOn
;;;1586   	STM_EVAL_LEDOn(LED6);	
00002c  2003              MOVS     r0,#3
00002e  f7fffffe          BL       STM_EVAL_LEDOn
;;;1587   	 
;;;1588     /* This function fills the RCC_ClockFreq structure with the current
;;;1589     frequencies of different on chip clocks (for debug purpose) **************/
;;;1590     RCC_GetClocksFreq(&RCC_ClockFreq);
000032  a804              ADD      r0,sp,#0x10
000034  f7fffffe          BL       RCC_GetClocksFreq
;;;1591     
;;;1592     /* Enable Clock Security System(CSS): this will generate an NMI exception
;;;1593     when HSE clock fails *****************************************************/
;;;1594     RCC_ClockSecuritySystemCmd(ENABLE);
000038  2001              MOVS     r0,#1
00003a  f7fffffe          BL       RCC_ClockSecuritySystemCmd
;;;1595     
;;;1596     /* Enable and configure RCC global IRQ channel, will be used to manage HSE ready 
;;;1597        and PLL ready interrupts. 
;;;1598        These interrupts are enabled in stm32f4xx_it.c file **********************/
;;;1599     NVIC_InitStructure.NVIC_IRQChannel = RCC_IRQn;
00003e  2005              MOVS     r0,#5
000040  f88d000c          STRB     r0,[sp,#0xc]
;;;1600     NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
000044  2500              MOVS     r5,#0
000046  f88d500d          STRB     r5,[sp,#0xd]
;;;1601     NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;  
00004a  f88d500e          STRB     r5,[sp,#0xe]
;;;1602     NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
00004e  2601              MOVS     r6,#1
000050  f88d600f          STRB     r6,[sp,#0xf]
;;;1603     NVIC_Init(&NVIC_InitStructure);
000054  a803              ADD      r0,sp,#0xc
000056  f7fffffe          BL       NVIC_Init
;;;1604   
;;;1605     /* Output clock on MCO2 pin(PC9) ****************************************/ 
;;;1606     /* Enable the GPIOC peripheral */ 
;;;1607     RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOC, ENABLE);
00005a  2101              MOVS     r1,#1
00005c  2004              MOVS     r0,#4
00005e  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;1608     
;;;1609     /* Configure MCO2 pin(PC9) in alternate function */
;;;1610     GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;
;;;1611     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;
000062  2703              MOVS     r7,#3
000064  f88d7009          STRB     r7,[sp,#9]
;;;1612     GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
000068  f04f0802          MOV      r8,#2
00006c  0270              LSLS     r0,r6,#9              ;1610
00006e  f88d8008          STRB     r8,[sp,#8]
000072  9001              STR      r0,[sp,#4]            ;1611
;;;1613     GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
000074  f88d500a          STRB     r5,[sp,#0xa]
;;;1614     GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;  
000078  f88d600b          STRB     r6,[sp,#0xb]
;;;1615     GPIO_Init(GPIOC, &GPIO_InitStructure);
00007c  a901              ADD      r1,sp,#4
00007e  4860              LDR      r0,|L11.512|
000080  f7fffffe          BL       GPIO_Init
;;;1616       
;;;1617     /* System clock selected to output on MCO2 pin(PC9)*/
;;;1618     RCC_MCO2Config(RCC_MCO2Source_SYSCLK, RCC_MCO2Div_2);
000084  0771              LSLS     r1,r6,#29
000086  2000              MOVS     r0,#0
000088  f7fffffe          BL       RCC_MCO2Config
;;;1619   
;;;1620   
;;;1621   
;;;1622       // ???????? RTC
;;;1623       rtc_Reset();
00008c  f7fffffe          BL       rtc_Reset
;;;1624       rtc_Init();
000090  f7fffffe          BL       rtc_Init
;;;1625    		
;;;1626   	
;;;1627   //	ADC_InitTypeDef  ADC_InitStructure;
;;;1628   	
;;;1629          
;;;1630     
;;;1631     /* Configure TIM4 Peripheral to manage LEDs lighting */
;;;1632     TIM_LED_Config();
000094  f7fffffe          BL       TIM_LED_Config
;;;1633     
;;;1634     /* Initialize the repeat status */
;;;1635     RepeatState = 0;
000098  485a              LDR      r0,|L11.516|
00009a  70c5              STRB     r5,[r0,#3]
;;;1636     LED_Toggle = 7;
00009c  495a              LDR      r1,|L11.520|
00009e  f04f0907          MOV      r9,#7
0000a2  f8819000          STRB     r9,[r1,#0]
;;;1637     
;;;1638   	// PC pin2
;;;1639     ADC3_CH12_DMA_Config();
0000a6  f7fffffe          BL       ADC3_CH12_DMA_Config
;;;1640     // Start ADC3 Software Conversion 
;;;1641     ADC_SoftwareStartConv(ADC3);
0000aa  4858              LDR      r0,|L11.524|
0000ac  f7fffffe          BL       ADC_SoftwareStartConv
;;;1642   	
;;;1643   	
;;;1644     
;;;1645   #if defined MEDIA_USB_KEY
;;;1646     
;;;1647     /* Initialize User Button */
;;;1648     STM_EVAL_PBInit(BUTTON_USER, BUTTON_MODE_EXTI);
0000b0  2101              MOVS     r1,#1
0000b2  2000              MOVS     r0,#0
0000b4  f7fffffe          BL       STM_EVAL_PBInit
;;;1649      
;;;1650     /* Init Host Library */
;;;1651     USBH_Init(&USB_OTG_Core, USB_OTG_FS_CORE_ID, &USB_Host, &USBH_MSC_cb, &USR_Callbacks);
0000b8  4855              LDR      r0,|L11.528|
0000ba  4a57              LDR      r2,|L11.536|
0000bc  9000              STR      r0,[sp,#0]
0000be  4b55              LDR      r3,|L11.532|
0000c0  2101              MOVS     r1,#1
0000c2  f5a26096          SUB      r0,r2,#0x4b0
0000c6  f7fffffe          BL       USBH_Init
;;;1652    
;;;1653   
;;;1654   
;;;1655   /*
;;;1656   SPI 1:
;;;1657   
;;;1658    nss - pa4
;;;1659    
;;;1660    sck - pa5
;;;1661    mosi - pa7
;;;1662    
;;;1663    miso - pa6
;;;1664   SPI 2:
;;;1665   
;;;1666    miso - pb14
;;;1667    mosi - pb15
;;;1668    sck - pb13
;;;1669    nss - pb12
;;;1670    
;;;1671   */
;;;1672   		spi1_init();
0000ca  f7fffffe          BL       spi1_init
;;;1673       spi2_init();
0000ce  f7fffffe          BL       spi2_init
;;;1674    
;;;1675   		
;;;1676   	
;;;1677   		RCC_APB2PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE); 	//port A
0000d2  2101              MOVS     r1,#1
0000d4  4608              MOV      r0,r1
0000d6  f7fffffe          BL       RCC_APB2PeriphClockCmd
;;;1678   		GPIO_InitStructure.GPIO_Pin   = GPIO_Pin_1|GPIO_Pin_0;  //  vivod for CS
;;;1679   		GPIO_InitStructure.GPIO_Mode  = GPIO_Mode_OUT;     			// rezim vivoda
0000da  f88d6008          STRB     r6,[sp,#8]
;;;1680   		GPIO_InitStructure.GPIO_OType = GPIO_OType_OD;          //  PP GPIO_OType_PP
0000de  f88d600a          STRB     r6,[sp,#0xa]
0000e2  9701              STR      r7,[sp,#4]            ;1679
;;;1681   		// gpio.GPIO_PuPd = GPIO_PuPd_DOWN;
;;;1682   		GPIO_InitStructure.GPIO_Speed = GPIO_Speed_2MHz;     //speed
0000e4  f88d5009          STRB     r5,[sp,#9]
;;;1683   		GPIO_Init(GPIOA, &GPIO_InitStructure); 
0000e8  a901              ADD      r1,sp,#4
0000ea  484c              LDR      r0,|L11.540|
0000ec  f7fffffe          BL       GPIO_Init
;;;1684   
;;;1685   
;;;1686   	indicators[0].numb=0;
0000f0  4c4b              LDR      r4,|L11.544|
;;;1687   	indicators[0].kol_cifr=8;
0000f2  2108              MOVS     r1,#8
;;;1688   	indicators[0].type_ind=0;
;;;1689   	indicators[0].yark=0x0f;
0000f4  220f              MOVS     r2,#0xf
0000f6  7025              STRB     r5,[r4,#0]            ;1686
0000f8  7061              STRB     r1,[r4,#1]            ;1687
0000fa  70a5              STRB     r5,[r4,#2]            ;1688
0000fc  70e2              STRB     r2,[r4,#3]
;;;1690   	indicators[0].rez_viv=0;   //   
0000fe  7125              STRB     r5,[r4,#4]
;;;1691   	indicators[0].chislo=0;
000100  80e5              STRH     r5,[r4,#6]
;;;1692   	indicators[0].pol_zap=0;
000102  7225              STRB     r5,[r4,#8]
;;;1693   	indicators[0].porog=0xffff;	
000104  f64f70ff          MOV      r0,#0xffff
000108  8160              STRH     r0,[r4,#0xa]
;;;1694   
;;;1695   	indicators[1].numb=1;
00010a  7326              STRB     r6,[r4,#0xc]
;;;1696   	indicators[1].kol_cifr=3;
00010c  7367              STRB     r7,[r4,#0xd]
;;;1697   	indicators[1].type_ind=0;
00010e  73a5              STRB     r5,[r4,#0xe]
;;;1698   	indicators[1].yark=0x0f;
000110  73e2              STRB     r2,[r4,#0xf]
;;;1699   	indicators[1].rez_viv=0;   //   
000112  7425              STRB     r5,[r4,#0x10]
;;;1700   	indicators[1].chislo=0;
000114  8265              STRH     r5,[r4,#0x12]
;;;1701   	indicators[1].pol_zap=0;
000116  7525              STRB     r5,[r4,#0x14]
;;;1702   	indicators[1].porog=0xffff;	
000118  82e0              STRH     r0,[r4,#0x16]
;;;1703   
;;;1704   //test_lin2();
;;;1705    
;;;1706   //	init_ind(indicators[0].numb, indicators[0].kol_cifr, indicators[0].type_ind);
;;;1707   //  init_ind(indicators[1].numb, indicators[1].kol_cifr, indicators[1].type_ind);
;;;1708   
;;;1709   	init_ind(indicators[0].numb, indicators[0].kol_cifr, indicators[0].type_ind);
00011a  462a              MOV      r2,r5
00011c  4610              MOV      r0,r2
00011e  f7fffffe          BL       init_ind
;;;1710     init_ind(indicators[1].numb, indicators[1].kol_cifr, indicators[1].type_ind);
000122  7ba2              LDRB     r2,[r4,#0xe]  ; indicators
000124  7b61              LDRB     r1,[r4,#0xd]  ; indicators
000126  7b20              LDRB     r0,[r4,#0xc]  ; indicators
000128  f7fffffe          BL       init_ind
;;;1711   
;;;1712   
;;;1713   // nastroika gpio
;;;1714   
;;;1715   //	GPIO_InitTypeDef  GPIO_InitStructure;                 
;;;1716   	RCC_APB2PeriphClockCmd(RCC_AHB1Periph_GPIOD, ENABLE); //port D
00012c  2101              MOVS     r1,#1
00012e  2008              MOVS     r0,#8
000130  f7fffffe          BL       RCC_APB2PeriphClockCmd
;;;1717   	GPIO_InitStructure.GPIO_Pin   = tx_pin_en|rx_pin_en;      //  vivod for control mod-rs485
000134  2018              MOVS     r0,#0x18
;;;1718   	GPIO_InitStructure.GPIO_Mode  = GPIO_Mode_OUT;     // rezim vivoda
000136  f88d6008          STRB     r6,[sp,#8]
;;;1719   	GPIO_InitStructure.GPIO_OType = GPIO_OType_OD;
;;;1720   	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;     //speed
;;;1721   	GPIO_Init(GPIOD, &GPIO_InitStructure);              
00013a  4c3a              LDR      r4,|L11.548|
00013c  9001              STR      r0,[sp,#4]            ;1718
00013e  f88d600a          STRB     r6,[sp,#0xa]          ;1719
000142  f88d8009          STRB     r8,[sp,#9]            ;1720
000146  a901              ADD      r1,sp,#4
000148  4620              MOV      r0,r4
00014a  f7fffffe          BL       GPIO_Init
;;;1722   
;;;1723   	UART2Init();
00014e  f7fffffe          BL       UART2Init
;;;1724   	
;;;1725   	GPIO_WriteBit(GPIOD, tx_pin_en, Bit_SET);      // GPIOD 4
000152  2201              MOVS     r2,#1
000154  2110              MOVS     r1,#0x10
000156  4620              MOV      r0,r4
000158  f7fffffe          BL       GPIO_WriteBit
;;;1726   	GPIO_WriteBit(GPIOD, rx_pin_en, Bit_SET);    //   GPIOD 3
00015c  2201              MOVS     r2,#1
00015e  2108              MOVS     r1,#8
000160  4620              MOV      r0,r4
000162  f7fffffe          BL       GPIO_WriteBit
;;;1727   	GPIOD->ODR ^= tx_pin_en;
000166  482f              LDR      r0,|L11.548|
000168  3014              ADDS     r0,r0,#0x14
00016a  6801              LDR      r1,[r0,#0]
00016c  f0810110          EOR      r1,r1,#0x10
000170  6001              STR      r1,[r0,#0]
;;;1728   
;;;1729   	
;;;1730   
;;;1731   NVIC_InitStructure.NVIC_IRQChannel = USART2_IRQn; //?????
000172  2026              MOVS     r0,#0x26
000174  f88d000c          STRB     r0,[sp,#0xc]
;;;1732   NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0; //?????????
000178  f88d500d          STRB     r5,[sp,#0xd]
;;;1733   NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;//????????? ?????????
00017c  f88d500e          STRB     r5,[sp,#0xe]
;;;1734   NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE; //???????? ?????
000180  f88d600f          STRB     r6,[sp,#0xf]
;;;1735   NVIC_Init(&NVIC_InitStructure); //??????????????
000184  a803              ADD      r0,sp,#0xc
000186  f7fffffe          BL       NVIC_Init
;;;1736   USART_ITConfig(USART2, USART_IT_RXNE, ENABLE);  //???????? ?????? ?????????? ??? ??? ?????
00018a  4c27              LDR      r4,|L11.552|
00018c  2201              MOVS     r2,#1
00018e  f2405125          MOV      r1,#0x525
000192  4620              MOV      r0,r4
000194  f7fffffe          BL       USART_ITConfig
;;;1737   USART_ITConfig(USART2, USART_IT_TC, ENABLE);  //???????? ?????? ?????????? ??? ??? ?????
000198  2201              MOVS     r2,#1
00019a  f2406126          MOV      r1,#0x626
00019e  4620              MOV      r0,r4
0001a0  f7fffffe          BL       USART_ITConfig
0001a4  4821              LDR      r0,|L11.556|
0001a6  2140              MOVS     r1,#0x40
0001a8  f04f24e0          MOV      r4,#0xe000e000
0001ac  6001              STR      r1,[r0,#0]
;;;1738   
;;;1739   
;;;1740   	NVIC_EnableIRQ (USART2_IRQn); // ????????? ?????????? ?? USART1
;;;1741   	/*
;;;1742     NVIC_EnableIRQ (ADC1_IRQn); // ????????? ?????????? ?? ???
;;;1743     NVIC_DisableIRQ (USART1_IRQn); // ????????? ???????
;;;1744     NVIC_DisableIRQ (ADC1_IRQn); // ??? ??? ????????? ?????????? ????
;;;1745   */
;;;1746   //	SendStringUSART2("start ver 1.0 /0"); 
;;;1747   /*
;;;1748   	txsize=10;
;;;1749   	tekper=0;
;;;1750   	for (i = 0; i < txsize ; i++)
;;;1751     {
;;;1752   		TxBuffer[i]=0x30+i;
;;;1753   	}
;;;1754   	USART_SendData(USART2, 0x3A);
;;;1755   */	
;;;1756   
;;;1757   	STM_EVAL_LEDOff(LED3);
0001ae  2001              MOVS     r0,#1
0001b0  f7fffffe          BL       STM_EVAL_LEDOff
;;;1758   	STM_EVAL_LEDOff(LED4);
0001b4  2000              MOVS     r0,#0
0001b6  f7fffffe          BL       STM_EVAL_LEDOff
;;;1759   	STM_EVAL_LEDOff(LED5);
0001ba  2002              MOVS     r0,#2
0001bc  f7fffffe          BL       STM_EVAL_LEDOff
;;;1760   	STM_EVAL_LEDOff(LED6);
0001c0  2003              MOVS     r0,#3
0001c2  f7fffffe          BL       STM_EVAL_LEDOff
;;;1761   	
;;;1762     /* SysTick end of count event each 10ms */
;;;1763     RCC_GetClocksFreq(&RCC_Clocks);
0001c6  4814              LDR      r0,|L11.536|
0001c8  3084              ADDS     r0,r0,#0x84
0001ca  f7fffffe          BL       RCC_GetClocksFreq
;;;1764     SysTick_Config(RCC_Clocks.HCLK_Frequency / 100);
0001ce  4812              LDR      r0,|L11.536|
0001d0  2164              MOVS     r1,#0x64
0001d2  3084              ADDS     r0,r0,#0x84
0001d4  6840              LDR      r0,[r0,#4]  ; RCC_Clocks
0001d6  fbb0f0f1          UDIV     r0,r0,r1
0001da  f1b07f80          CMP      r0,#0x1000000
0001de  d209              BCS      |L11.500|
0001e0  f020407f          BIC      r0,r0,#0xff000000
0001e4  1e40              SUBS     r0,r0,#1
0001e6  6160              STR      r0,[r4,#0x14]
0001e8  4911              LDR      r1,|L11.560|
0001ea  20f0              MOVS     r0,#0xf0
0001ec  7008              STRB     r0,[r1,#0]
0001ee  61a5              STR      r5,[r4,#0x18]
0001f0  f8c49010          STR      r9,[r4,#0x10]
                  |L11.500|
;;;1765   	
;;;1766       while (1)
;;;1767     {
;;;1768       /* Host Task handler */
;;;1769       USBH_Process(&USB_OTG_Core, &USB_Host);
0001f4  4908              LDR      r1,|L11.536|
0001f6  f5a16096          SUB      r0,r1,#0x4b0
0001fa  f7fffffe          BL       USBH_Process
0001fe  e7f9              B        |L11.500|
;;;1770     }
;;;1771     
;;;1772   #endif
;;;1773   	
;;;1774   
;;;1775     
;;;1776   }
;;;1777   
                          ENDP

                  |L11.512|
                          DCD      0x40020800
                  |L11.516|
                          DCD      ||.data||
                  |L11.520|
                          DCD      LED_Toggle
                  |L11.524|
                          DCD      0x40012200
                  |L11.528|
                          DCD      USR_Callbacks
                  |L11.532|
                          DCD      USBH_MSC_cb
                  |L11.536|
                          DCD      ||.bss||+0x4b0
                  |L11.540|
                          DCD      0x40020000
                  |L11.544|
                          DCD      ||.bss||+0x742
                  |L11.548|
                          DCD      0x40020c00
                  |L11.552|
                          DCD      0x40004400
                  |L11.556|
                          DCD      0xe000e104
                  |L11.560|
                          DCD      0xe000ed23

                          AREA ||i.norm_ind||, CODE, READONLY, ALIGN=2

                  norm_ind PROC
;;;1185   
;;;1186   void norm_ind(u8 numb_ind)
000000  b570              PUSH     {r4-r6,lr}
;;;1187   {
;;;1188   	uint16_t  pin=0;
000002  2400              MOVS     r4,#0
;;;1189   	
;;;1190   			switch (numb_ind)
000004  2805              CMP      r0,#5
000006  d20d              BCS      |L12.36|
000008  e8dff000          TBB      [pc,r0]
00000c  03050709          DCB      0x03,0x05,0x07,0x09
000010  0b00              DCB      0x0b,0x00
;;;1191   			{
;;;1192   				case 0x00:  // CS0
;;;1193   					pin=GPIO_Pin_0;
000012  2401              MOVS     r4,#1
;;;1194   					break;
000014  e006              B        |L12.36|
;;;1195   
;;;1196   				case 0x01:  // CS1
;;;1197   					pin=GPIO_Pin_1;
000016  2402              MOVS     r4,#2
;;;1198   					break;
000018  e004              B        |L12.36|
;;;1199   
;;;1200   				case 0x02:  // CS2
;;;1201   					pin=GPIO_Pin_2;
00001a  2404              MOVS     r4,#4
;;;1202   					break;
00001c  e002              B        |L12.36|
;;;1203   
;;;1204   				case 0x03:  // CS3
;;;1205   					pin=GPIO_Pin_3;
00001e  2408              MOVS     r4,#8
;;;1206   					break;
000020  e000              B        |L12.36|
;;;1207   
;;;1208   				case 0x04:  // CS4
;;;1209   					pin=GPIO_Pin_4;
000022  2410              MOVS     r4,#0x10
                  |L12.36|
;;;1210   					break;								
;;;1211   			}
;;;1212   			
;;;1213   
;;;1214   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      //   GPIOB.2
000024  4d0f              LDR      r5,|L12.100|
000026  2200              MOVS     r2,#0
000028  4621              MOV      r1,r4
00002a  4628              MOV      r0,r5
00002c  f7fffffe          BL       GPIO_WriteBit
;;;1215   				delay_spi(100);
000030  2064              MOVS     r0,#0x64
000032  f7fffffe          BL       delay_spi
;;;1216   				spi_send(0x0f);delay_spi(100);
000036  200f              MOVS     r0,#0xf
000038  f7fffffe          BL       spi_send
00003c  2064              MOVS     r0,#0x64
00003e  f7fffffe          BL       delay_spi
;;;1217   				spi_send(0x00); delay_spi(100);
000042  2000              MOVS     r0,#0
000044  f7fffffe          BL       spi_send
000048  2064              MOVS     r0,#0x64
00004a  f7fffffe          BL       delay_spi
;;;1218   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      //   GPIOB.2
00004e  2201              MOVS     r2,#1
000050  4621              MOV      r1,r4
000052  4628              MOV      r0,r5
000054  f7fffffe          BL       GPIO_WriteBit
;;;1219   				delay_spi(1000);
000058  e8bd4070          POP      {r4-r6,lr}
00005c  f44f707a          MOV      r0,#0x3e8
000060  f7ffbffe          B.W      delay_spi
;;;1220   }
;;;1221   
                          ENDP

                  |L12.100|
                          DCD      0x40020000

                          AREA ||i.settime||, CODE, READONLY, ALIGN=2

                  settime PROC
;;;262    
;;;263    void settime(void)
000000  480e              LDR      r0,|L13.60|
;;;264    {
;;;265    
;;;266    		RTC->ISR |= RTC_ISR_INIT;
000002  6801              LDR      r1,[r0,#0]
000004  f0410180          ORR      r1,r1,#0x80
000008  6001              STR      r1,[r0,#0]
                  |L13.10|
;;;267        while(!(RTC->ISR & RTC_ISR_INITF)) {}
00000a  6801              LDR      r1,[r0,#0]
00000c  0649              LSLS     r1,r1,#25
00000e  d5fc              BPL      |L13.10|
;;;268    			
;;;269    	//	rtc_SetDate(2, 6, 13, 7);
;;;270    		{
;;;271        uint32_t Tens, Units;
;;;272        uint32_t TempReg = 0;
;;;273    		uint8_t	Day=2,  Month=6,  Year=13,  DayOfWeek=7;
;;;274        
;;;275    
;;;276        TempReg = 0;
;;;277        {
;;;278            Tens  = (Year / 10) & 0x0f;          // ??????? ???
;;;279            Units = (Year - (Tens * 10)) & 0x0f; // ??????? ???
;;;280            
;;;281            TempReg |= (Tens  << 20); // YT, 20
;;;282            TempReg |= (Units << 16); // YU, 16
;;;283        }
;;;284    
;;;285        {
;;;286            Tens  = (Month / 10) & 0x01;          // ??????? ???????
;;;287            Units = (Month - (Tens * 10)) & 0x0f; // ??????? ???????
;;;288            
;;;289            TempReg |= (Tens  << 12); // MT, 12
;;;290            TempReg |= (Units << 8);  // MU, 8
;;;291        }
;;;292    
;;;293        {
;;;294            Tens  = (Day / 10) & 0x03;          // ??????? ????
;;;295            Units = (Day - (Tens * 10)) & 0x0f; // ??????? ????
;;;296            
;;;297            TempReg |= (Tens  << 4); // DT, 4
;;;298            TempReg |= (Units << 0);  // DU, 0
;;;299        }
;;;300    
;;;301        {
;;;302            TempReg |= ((DayOfWeek & 0x07) << 13); // WDU, 13
;;;303        }
;;;304        RTC->DR = TempReg;
000010  4b0a              LDR      r3,|L13.60|
000012  2200              MOVS     r2,#0                 ;286
000014  3b08              SUBS     r3,r3,#8
000016  490a              LDR      r1,|L13.64|
000018  6019              STR      r1,[r3,#0]
;;;305    		}
;;;306    			
;;;307    			
;;;308    //    rtc_SetTime(0, 0, 00);
;;;309    		
;;;310    		{
;;;311    			uint32_t Tens, Units;
;;;312    			uint32_t TempReg = 0;
;;;313    			uint8_t Hours=0,  Minutes=0,  Seconds=0;
;;;314        
;;;315        // ??????? ???? ????
;;;316        TempReg = 0;
;;;317        
;;;318        // ??????? ????
;;;319        {
;;;320            Tens  = (Hours / 10) & 0x03;          // ??????? ?????
;;;321            Units = (Hours - (Tens * 10)) & 0x0f; // ??????? ?????
;;;322            
;;;323            TempReg |= (Tens  << 20); // HT, 20
;;;324            TempReg |= (Units << 16); // HU, 16
;;;325        }
;;;326        // ??????? ??????
;;;327        {
;;;328            Tens  = (Minutes / 10) & 0x07;          // ??????? ?????
;;;329            Units = (Minutes - (Tens * 10)) & 0x0f; // ??????? ?????
;;;330            
;;;331            TempReg |= (Tens  << 12); // MNT, 12
;;;332            TempReg |= (Units << 8);  // MNU, 8
;;;333        }
;;;334        // ??????? ???????
;;;335        {
;;;336            Tens  = (Seconds / 10) & 0x07;          // ??????? ??????
;;;337            Units = (Seconds - (Tens * 10)) & 0x0f; // ??????? ??????
;;;338            
;;;339            TempReg |= (Tens  << 4); // ST, 4
;;;340            TempReg |= (Units << 0);  // SU, 0
;;;341        }
;;;342        
;;;343        // ?????????? ???? ??? ?????
;;;344        RTC->TR = TempReg;
00001a  1f19              SUBS     r1,r3,#4
00001c  600a              STR      r2,[r1,#0]
;;;345    		
;;;346    		}
;;;347            
;;;348        RTC->CR |= RTC_CR_FMT;
00001e  1d19              ADDS     r1,r3,#4
000020  680a              LDR      r2,[r1,#0]
000022  f0420240          ORR      r2,r2,#0x40
000026  600a              STR      r2,[r1,#0]
;;;349        RTC->ISR &= ~RTC_ISR_INIT;
000028  6801              LDR      r1,[r0,#0]
00002a  f0210180          BIC      r1,r1,#0x80
00002e  6001              STR      r1,[r0,#0]
;;;350    		RTC->WPR = 0xFF;
000030  4902              LDR      r1,|L13.60|
000032  20ff              MOVS     r0,#0xff
000034  3118              ADDS     r1,r1,#0x18
000036  6008              STR      r0,[r1,#0]
;;;351    	
;;;352    }
000038  4770              BX       lr
;;;353    
                          ENDP

00003a  0000              DCW      0x0000
                  |L13.60|
                          DCD      0x4000280c
                  |L13.64|
                          DCD      0x0013e602

                          AREA ||i.sohr_backup||, CODE, READONLY, ALIGN=1

                  sohr_backup PROC
;;;353    
;;;354    void sohr_backup(u16 kol_byte,uint8_t* buf)
000000  4770              BX       lr
;;;355    {
;;;356    
;;;357    }
;;;358    
                          ENDP


                          AREA ||i.spi1_init||, CODE, READONLY, ALIGN=2

                  spi1_init PROC
;;;395    
;;;396    void spi1_init() {
000000  b530              PUSH     {r4,r5,lr}
;;;397    	SPI_InitTypeDef spi1;
;;;398    	 GPIO_InitTypeDef gpio;
;;;399    	
;;;400        RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA,ENABLE);  // ???????????? ?????
000002  2101              MOVS     r1,#1
000004  b087              SUB      sp,sp,#0x1c           ;396
000006  4608              MOV      r0,r1
000008  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;401        RCC_APB2PeriphClockCmd(RCC_APB2Periph_SPI1,ENABLE);  // ???????????? SPI1 
00000c  2101              MOVS     r1,#1
00000e  0308              LSLS     r0,r1,#12
000010  f7fffffe          BL       RCC_APB2PeriphClockCmd
;;;402       
;;;403        GPIO_StructInit(&gpio);
000014  a805              ADD      r0,sp,#0x14
000016  f7fffffe          BL       GPIO_StructInit
;;;404        gpio.GPIO_Pin = GPIO_Pin_5 | GPIO_Pin_6 | GPIO_Pin_7;
00001a  20e0              MOVS     r0,#0xe0
;;;405        gpio.GPIO_Mode = GPIO_Mode_AF;
00001c  9005              STR      r0,[sp,#0x14]
00001e  2002              MOVS     r0,#2
000020  f88d0018          STRB     r0,[sp,#0x18]
;;;406        gpio.GPIO_Speed = GPIO_Speed_2MHz;
000024  2400              MOVS     r4,#0
000026  f88d4019          STRB     r4,[sp,#0x19]
;;;407        gpio.GPIO_OType = GPIO_OType_PP;
00002a  f88d401a          STRB     r4,[sp,#0x1a]
;;;408        gpio.GPIO_PuPd = GPIO_PuPd_DOWN;
;;;409        GPIO_Init(GPIOA,&gpio);
00002e  4d1a              LDR      r5,|L15.152|
000030  f88d001b          STRB     r0,[sp,#0x1b]         ;408
000034  a905              ADD      r1,sp,#0x14
000036  4628              MOV      r0,r5
000038  f7fffffe          BL       GPIO_Init
;;;410        GPIO_PinAFConfig(GPIOA,GPIO_PinSource5,GPIO_AF_SPI1);
00003c  2205              MOVS     r2,#5
00003e  4611              MOV      r1,r2
000040  4628              MOV      r0,r5
000042  f7fffffe          BL       GPIO_PinAFConfig
;;;411        GPIO_PinAFConfig(GPIOA,GPIO_PinSource6,GPIO_AF_SPI1);
000046  2205              MOVS     r2,#5
000048  2106              MOVS     r1,#6
00004a  4628              MOV      r0,r5
00004c  f7fffffe          BL       GPIO_PinAFConfig
;;;412        GPIO_PinAFConfig(GPIOA,GPIO_PinSource7,GPIO_AF_SPI1);
000050  2205              MOVS     r2,#5
000052  2107              MOVS     r1,#7
000054  4628              MOV      r0,r5
000056  f7fffffe          BL       GPIO_PinAFConfig
;;;413        SPI_I2S_DeInit(SPI1);
00005a  4d10              LDR      r5,|L15.156|
00005c  4628              MOV      r0,r5
00005e  f7fffffe          BL       SPI_I2S_DeInit
;;;414        
;;;415        SPI_StructInit(&spi1);
000062  4668              MOV      r0,sp
000064  f7fffffe          BL       SPI_StructInit
;;;416        spi1.SPI_Mode = SPI_Mode_Master;
000068  f44f7082          MOV      r0,#0x104
00006c  f8ad0002          STRH     r0,[sp,#2]
;;;417        spi1.SPI_DataSize = SPI_DataSize_8b; //SPI_DataSize_16b;		
;;;418        spi1.SPI_NSS = SPI_NSS_Soft;
000070  1568              ASRS     r0,r5,#21
000072  f8ad000a          STRH     r0,[sp,#0xa]
;;;419    
;;;420      spi1.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_256;
000076  2038              MOVS     r0,#0x38
000078  f8ad000c          STRH     r0,[sp,#0xc]
00007c  f8ad4004          STRH     r4,[sp,#4]            ;417
;;;421      spi1.SPI_FirstBit = SPI_FirstBit_MSB;
000080  f8ad400e          STRH     r4,[sp,#0xe]
;;;422    	
;;;423        SPI_Init(SPI1,&spi1);
000084  4669              MOV      r1,sp
000086  4628              MOV      r0,r5
000088  f7fffffe          BL       SPI_Init
;;;424        SPI_Cmd(SPI1,ENABLE);
00008c  2101              MOVS     r1,#1
00008e  4628              MOV      r0,r5
000090  f7fffffe          BL       SPI_Cmd
;;;425    }
000094  b007              ADD      sp,sp,#0x1c
000096  bd30              POP      {r4,r5,pc}
;;;426    
                          ENDP

                  |L15.152|
                          DCD      0x40020000
                  |L15.156|
                          DCD      0x40013000

                          AREA ||i.spi2_init||, CODE, READONLY, ALIGN=2

                  spi2_init PROC
;;;427    
;;;428    void spi2_init() {
000000  b530              PUSH     {r4,r5,lr}
000002  b087              SUB      sp,sp,#0x1c
;;;429    	SPI_InitTypeDef spi2;
;;;430    	 GPIO_InitTypeDef gpio;
;;;431    	
;;;432        RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOB,ENABLE);
000004  2101              MOVS     r1,#1
000006  2002              MOVS     r0,#2
000008  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;433        RCC_APB1PeriphClockCmd(RCC_APB1Periph_SPI2,ENABLE);
00000c  2101              MOVS     r1,#1
00000e  0388              LSLS     r0,r1,#14
000010  f7fffffe          BL       RCC_APB1PeriphClockCmd
;;;434       
;;;435        GPIO_StructInit(&gpio);
000014  a805              ADD      r0,sp,#0x14
000016  f7fffffe          BL       GPIO_StructInit
;;;436        gpio.GPIO_Pin = GPIO_Pin_13 | GPIO_Pin_14 | GPIO_Pin_15;
00001a  f44f4060          MOV      r0,#0xe000
;;;437        gpio.GPIO_Mode = GPIO_Mode_AF;
00001e  9005              STR      r0,[sp,#0x14]
000020  2002              MOVS     r0,#2
000022  f88d0018          STRB     r0,[sp,#0x18]
;;;438        gpio.GPIO_Speed = GPIO_Speed_50MHz;
000026  f88d0019          STRB     r0,[sp,#0x19]
;;;439        gpio.GPIO_OType = GPIO_OType_PP;
00002a  2400              MOVS     r4,#0
00002c  f88d401a          STRB     r4,[sp,#0x1a]
;;;440        gpio.GPIO_PuPd = GPIO_PuPd_DOWN;
;;;441        GPIO_Init(GPIOB,&gpio);
000030  4d17              LDR      r5,|L16.144|
000032  f88d001b          STRB     r0,[sp,#0x1b]         ;440
000036  a905              ADD      r1,sp,#0x14
000038  4628              MOV      r0,r5
00003a  f7fffffe          BL       GPIO_Init
;;;442        GPIO_PinAFConfig(GPIOB,GPIO_PinSource13,GPIO_AF_SPI2);
00003e  2205              MOVS     r2,#5
000040  210d              MOVS     r1,#0xd
000042  4628              MOV      r0,r5
000044  f7fffffe          BL       GPIO_PinAFConfig
;;;443        GPIO_PinAFConfig(GPIOB,GPIO_PinSource14,GPIO_AF_SPI2);
000048  2205              MOVS     r2,#5
00004a  210e              MOVS     r1,#0xe
00004c  4628              MOV      r0,r5
00004e  f7fffffe          BL       GPIO_PinAFConfig
;;;444        GPIO_PinAFConfig(GPIOB,GPIO_PinSource15,GPIO_AF_SPI2);
000052  2205              MOVS     r2,#5
000054  210f              MOVS     r1,#0xf
000056  4628              MOV      r0,r5
000058  f7fffffe          BL       GPIO_PinAFConfig
;;;445        SPI_I2S_DeInit(SPI2);
00005c  4d0d              LDR      r5,|L16.148|
00005e  4628              MOV      r0,r5
000060  f7fffffe          BL       SPI_I2S_DeInit
;;;446        
;;;447        SPI_StructInit(&spi2);
000064  4668              MOV      r0,sp
000066  f7fffffe          BL       SPI_StructInit
;;;448        spi2.SPI_Mode = SPI_Mode_Slave;
;;;449        spi2.SPI_DataSize = SPI_DataSize_16b;
00006a  14e9              ASRS     r1,r5,#19
;;;450        spi2.SPI_NSS = SPI_NSS_Soft;
00006c  1088              ASRS     r0,r1,#2
00006e  f8ad1004          STRH     r1,[sp,#4]            ;449
000072  f8ad000a          STRH     r0,[sp,#0xa]
000076  f8ad4002          STRH     r4,[sp,#2]            ;448
;;;451        SPI_Init(SPI2,&spi2);
00007a  4669              MOV      r1,sp
00007c  4628              MOV      r0,r5
00007e  f7fffffe          BL       SPI_Init
;;;452        SPI_Cmd(SPI2,ENABLE);
000082  2101              MOVS     r1,#1
000084  4628              MOV      r0,r5
000086  f7fffffe          BL       SPI_Cmd
;;;453    }
00008a  b007              ADD      sp,sp,#0x1c
00008c  bd30              POP      {r4,r5,pc}
;;;454    
                          ENDP

00008e  0000              DCW      0x0000
                  |L16.144|
                          DCD      0x40020400
                  |L16.148|
                          DCD      0x40003800

                          AREA ||i.spi_init||, CODE, READONLY, ALIGN=2

                  spi_init PROC
;;;358    
;;;359    void spi_init(){
000000  b570              PUSH     {r4-r6,lr}
;;;360    
;;;361    		GPIO_InitTypeDef GPIO_InitStructure;
;;;362        GPIO_InitTypeDef gpio;
;;;363    	  SPI_InitTypeDef spi1;
;;;364    	
;;;365        RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA,ENABLE);  // ???????????? ?????
000002  2101              MOVS     r1,#1
000004  b08a              SUB      sp,sp,#0x28           ;359
000006  4608              MOV      r0,r1
000008  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;366        RCC_APB2PeriphClockCmd(RCC_APB2Periph_SPI1,ENABLE);  // ???????????? SPI1
00000c  2101              MOVS     r1,#1
00000e  0308              LSLS     r0,r1,#12
000010  f7fffffe          BL       RCC_APB2PeriphClockCmd
;;;367    
;;;368        GPIO_StructInit(&gpio);
000014  4668              MOV      r0,sp
000016  f7fffffe          BL       GPIO_StructInit
;;;369    
;;;370         gpio.GPIO_Pin   = GPIO_Pin_4;   // NSS
00001a  2010              MOVS     r0,#0x10
;;;371         gpio.GPIO_Mode  = GPIO_Mode_OUT;
00001c  9000              STR      r0,[sp,#0]
00001e  2001              MOVS     r0,#1
000020  f88d0004          STRB     r0,[sp,#4]
;;;372         gpio.GPIO_Speed = GPIO_Speed_50MHz;
000024  2402              MOVS     r4,#2
000026  f88d4005          STRB     r4,[sp,#5]
;;;373         gpio.GPIO_OType = GPIO_OType_PP;
00002a  2500              MOVS     r5,#0
;;;374         gpio.GPIO_PuPd  = GPIO_PuPd_NOPULL;
;;;375         GPIO_Init(GPIOA, &GPIO_InitStructure);
00002c  4e20              LDR      r6,|L17.176|
00002e  f88d5006          STRB     r5,[sp,#6]            ;373
000032  f88d5007          STRB     r5,[sp,#7]            ;374
000036  a907              ADD      r1,sp,#0x1c
000038  4630              MOV      r0,r6
00003a  f7fffffe          BL       GPIO_Init
;;;376    
;;;377        gpio.GPIO_Pin = GPIO_Pin_5 | GPIO_Pin_6 | GPIO_Pin_7;
;;;378        gpio.GPIO_Mode = GPIO_Mode_AF;
00003e  f88d4004          STRB     r4,[sp,#4]
000042  20e0              MOVS     r0,#0xe0              ;377
;;;379        gpio.GPIO_Speed = GPIO_Speed_50MHz;
000044  f88d4005          STRB     r4,[sp,#5]
000048  9000              STR      r0,[sp,#0]            ;378
;;;380        gpio.GPIO_OType = GPIO_OType_PP;
00004a  f88d5006          STRB     r5,[sp,#6]
;;;381        gpio.GPIO_PuPd = GPIO_PuPd_DOWN;
00004e  f88d4007          STRB     r4,[sp,#7]
;;;382        GPIO_Init(GPIOA,&gpio);
000052  4669              MOV      r1,sp
000054  4630              MOV      r0,r6
000056  f7fffffe          BL       GPIO_Init
;;;383        GPIO_PinAFConfig(GPIOA,GPIO_PinSource5,GPIO_AF_SPI1);   
00005a  2205              MOVS     r2,#5
00005c  4611              MOV      r1,r2
00005e  4630              MOV      r0,r6
000060  f7fffffe          BL       GPIO_PinAFConfig
;;;384        GPIO_PinAFConfig(GPIOA,GPIO_PinSource6,GPIO_AF_SPI1);
000064  2205              MOVS     r2,#5
000066  2106              MOVS     r1,#6
000068  4630              MOV      r0,r6
00006a  f7fffffe          BL       GPIO_PinAFConfig
;;;385        GPIO_PinAFConfig(GPIOA,GPIO_PinSource7,GPIO_AF_SPI1);
00006e  2205              MOVS     r2,#5
000070  2107              MOVS     r1,#7
000072  4630              MOV      r0,r6
000074  f7fffffe          BL       GPIO_PinAFConfig
;;;386        SPI_I2S_DeInit(SPI1);
000078  4c0e              LDR      r4,|L17.180|
00007a  4620              MOV      r0,r4
00007c  f7fffffe          BL       SPI_I2S_DeInit
;;;387    
;;;388        SPI_StructInit(&spi1);
000080  a802              ADD      r0,sp,#8
000082  f7fffffe          BL       SPI_StructInit
;;;389        spi1.SPI_Mode = SPI_Mode_Master;
000086  f44f7182          MOV      r1,#0x104
00008a  f8ad100a          STRH     r1,[sp,#0xa]
;;;390        spi1.SPI_DataSize = SPI_DataSize_16b;
00008e  14e1              ASRS     r1,r4,#19
000090  f8ad100c          STRH     r1,[sp,#0xc]
;;;391        spi1.SPI_NSS = SPI_NSS_Soft;
000094  1089              ASRS     r1,r1,#2
000096  f8ad1012          STRH     r1,[sp,#0x12]
;;;392        SPI_Init(SPI1,&spi1);
00009a  a902              ADD      r1,sp,#8
00009c  4620              MOV      r0,r4
00009e  f7fffffe          BL       SPI_Init
;;;393        SPI_Cmd(SPI1,ENABLE);
0000a2  2101              MOVS     r1,#1
0000a4  4620              MOV      r0,r4
0000a6  f7fffffe          BL       SPI_Cmd
;;;394    }
0000aa  b00a              ADD      sp,sp,#0x28
0000ac  bd70              POP      {r4-r6,pc}
;;;395    
                          ENDP

0000ae  0000              DCW      0x0000
                  |L17.176|
                          DCD      0x40020000
                  |L17.180|
                          DCD      0x40013000

                          AREA ||i.spi_receve||, CODE, READONLY, ALIGN=2

                  spi_receve PROC
;;;459    }
;;;460    uint16_t spi_receve() {
000000  b510              PUSH     {r4,lr}
;;;461    		uint16_t received;
;;;462        while (SPI_I2S_GetFlagStatus(SPI2, SPI_I2S_FLAG_RXNE) == RESET);  // ???? ???? ?????? ???????
000002  4c06              LDR      r4,|L18.28|
                  |L18.4|
000004  2101              MOVS     r1,#1
000006  4620              MOV      r0,r4
000008  f7fffffe          BL       SPI_I2S_GetFlagStatus
00000c  2800              CMP      r0,#0
00000e  d0f9              BEQ      |L18.4|
;;;463        received = SPI_I2S_ReceiveData(SPI2);
000010  4620              MOV      r0,r4
000012  e8bd4010          POP      {r4,lr}
000016  f7ffbffe          B.W      SPI_I2S_ReceiveData
;;;464        return received;
;;;465    }
;;;466    
                          ENDP

00001a  0000              DCW      0x0000
                  |L18.28|
                          DCD      0x40003800

                          AREA ||i.spi_send||, CODE, READONLY, ALIGN=2

                  spi_send PROC
;;;455    
;;;456    void spi_send(uint16_t data) {
000000  b510              PUSH     {r4,lr}
;;;457    	SPI_I2S_SendData(SPI1,data);
000002  4c06              LDR      r4,|L19.28|
000004  4601              MOV      r1,r0
000006  4620              MOV      r0,r4
000008  f7fffffe          BL       SPI_I2S_SendData
                  |L19.12|
;;;458        while(SPI_I2S_GetFlagStatus(SPI1,SPI_I2S_FLAG_TXE) == RESET);  // ???? ???? ?????? ?????
00000c  2102              MOVS     r1,#2
00000e  4620              MOV      r0,r4
000010  f7fffffe          BL       SPI_I2S_GetFlagStatus
000014  2800              CMP      r0,#0
000016  d0f9              BEQ      |L19.12|
;;;459    }
000018  bd10              POP      {r4,pc}
;;;460    uint16_t spi_receve() {
                          ENDP

00001a  0000              DCW      0x0000
                  |L19.28|
                          DCD      0x40013000

                          AREA ||i.test_ind||, CODE, READONLY, ALIGN=2

                  test_ind PROC
;;;1149   
;;;1150   void test_ind(u8 numb_ind)
000000  b570              PUSH     {r4-r6,lr}
;;;1151   {
;;;1152   	uint16_t  pin=0;
000002  2400              MOVS     r4,#0
;;;1153   	
;;;1154   			switch (numb_ind)
000004  2805              CMP      r0,#5
000006  d20d              BCS      |L20.36|
000008  e8dff000          TBB      [pc,r0]
00000c  03050709          DCB      0x03,0x05,0x07,0x09
000010  0b00              DCB      0x0b,0x00
;;;1155   			{
;;;1156   				case 0x00:  // CS0
;;;1157   					pin=GPIO_Pin_0;
000012  2401              MOVS     r4,#1
;;;1158   					break;
000014  e006              B        |L20.36|
;;;1159   
;;;1160   				case 0x01:  // CS1
;;;1161   					pin=GPIO_Pin_1;
000016  2402              MOVS     r4,#2
;;;1162   					break;
000018  e004              B        |L20.36|
;;;1163   
;;;1164   				case 0x02:  // CS2
;;;1165   					pin=GPIO_Pin_2;
00001a  2404              MOVS     r4,#4
;;;1166   					break;
00001c  e002              B        |L20.36|
;;;1167   
;;;1168   				case 0x03:  // CS3
;;;1169   					pin=GPIO_Pin_3;
00001e  2408              MOVS     r4,#8
;;;1170   					break;
000020  e000              B        |L20.36|
;;;1171   
;;;1172   				case 0x04:  // CS4
;;;1173   					pin=GPIO_Pin_4;
000022  2410              MOVS     r4,#0x10
                  |L20.36|
;;;1174   					break;								
;;;1175   			}
;;;1176   			
;;;1177   
;;;1178   				GPIO_WriteBit(GPIOA, pin, Bit_RESET);      //   GPIOB.2
000024  4d0f              LDR      r5,|L20.100|
000026  2200              MOVS     r2,#0
000028  4621              MOV      r1,r4
00002a  4628              MOV      r0,r5
00002c  f7fffffe          BL       GPIO_WriteBit
;;;1179   				delay_spi(100);
000030  2064              MOVS     r0,#0x64
000032  f7fffffe          BL       delay_spi
;;;1180   				spi_send(0x0f);delay_spi(100);
000036  200f              MOVS     r0,#0xf
000038  f7fffffe          BL       spi_send
00003c  2064              MOVS     r0,#0x64
00003e  f7fffffe          BL       delay_spi
;;;1181   				spi_send(0x01); delay_spi(100);
000042  2001              MOVS     r0,#1
000044  f7fffffe          BL       spi_send
000048  2064              MOVS     r0,#0x64
00004a  f7fffffe          BL       delay_spi
;;;1182   				GPIO_WriteBit(GPIOA, pin, Bit_SET);      //   GPIOB.2
00004e  2201              MOVS     r2,#1
000050  4621              MOV      r1,r4
000052  4628              MOV      r0,r5
000054  f7fffffe          BL       GPIO_WriteBit
;;;1183   				delay_spi(1000);
000058  e8bd4070          POP      {r4-r6,lr}
00005c  f44f707a          MOV      r0,#0x3e8
000060  f7ffbffe          B.W      delay_spi
;;;1184   }
;;;1185   
                          ENDP

                  |L20.100|
                          DCD      0x40020000

                          AREA ||i.test_ind_all||, CODE, READONLY, ALIGN=2

                  test_ind_all PROC
;;;478    
;;;479    void test_ind_all(void)
000000  b510              PUSH     {r4,lr}
;;;480    {
;;;481    				GPIO_WriteBit(GPIOA, GPIO_Pin_0, Bit_RESET); 			
000002  4c24              LDR      r4,|L21.148|
000004  2200              MOVS     r2,#0
000006  2101              MOVS     r1,#1
000008  4620              MOV      r0,r4
00000a  f7fffffe          BL       GPIO_WriteBit
;;;482    				GPIO_WriteBit(GPIOA, GPIO_Pin_1, Bit_RESET); 
00000e  2200              MOVS     r2,#0
000010  2102              MOVS     r1,#2
000012  4620              MOV      r0,r4
000014  f7fffffe          BL       GPIO_WriteBit
;;;483    				GPIO_WriteBit(GPIOA, GPIO_Pin_2, Bit_RESET);  			
000018  2200              MOVS     r2,#0
00001a  2104              MOVS     r1,#4
00001c  4620              MOV      r0,r4
00001e  f7fffffe          BL       GPIO_WriteBit
;;;484    				GPIO_WriteBit(GPIOA, GPIO_Pin_3, Bit_RESET); 
000022  2200              MOVS     r2,#0
000024  2108              MOVS     r1,#8
000026  4620              MOV      r0,r4
000028  f7fffffe          BL       GPIO_WriteBit
;;;485    				GPIO_WriteBit(GPIOA, GPIO_Pin_4, Bit_RESET);     
00002c  2200              MOVS     r2,#0
00002e  2110              MOVS     r1,#0x10
000030  4620              MOV      r0,r4
000032  f7fffffe          BL       GPIO_WriteBit
;;;486    				delay_spi(100);
000036  2064              MOVS     r0,#0x64
000038  f7fffffe          BL       delay_spi
;;;487    				spi_send(0x0f);delay_spi(100);
00003c  200f              MOVS     r0,#0xf
00003e  f7fffffe          BL       spi_send
000042  2064              MOVS     r0,#0x64
000044  f7fffffe          BL       delay_spi
;;;488    				spi_send(0x01); delay_spi(100);
000048  2001              MOVS     r0,#1
00004a  f7fffffe          BL       spi_send
00004e  2064              MOVS     r0,#0x64
000050  f7fffffe          BL       delay_spi
;;;489    				GPIO_WriteBit(GPIOA, GPIO_Pin_0, Bit_SET); 			
000054  2201              MOVS     r2,#1
000056  4611              MOV      r1,r2
000058  4620              MOV      r0,r4
00005a  f7fffffe          BL       GPIO_WriteBit
;;;490    				GPIO_WriteBit(GPIOA, GPIO_Pin_1, Bit_SET); 
00005e  2201              MOVS     r2,#1
000060  2102              MOVS     r1,#2
000062  4620              MOV      r0,r4
000064  f7fffffe          BL       GPIO_WriteBit
;;;491    				GPIO_WriteBit(GPIOA, GPIO_Pin_2, Bit_SET);  			
000068  2201              MOVS     r2,#1
00006a  2104              MOVS     r1,#4
00006c  4620              MOV      r0,r4
00006e  f7fffffe          BL       GPIO_WriteBit
;;;492    				GPIO_WriteBit(GPIOA, GPIO_Pin_3, Bit_SET); 
000072  2201              MOVS     r2,#1
000074  2108              MOVS     r1,#8
000076  4620              MOV      r0,r4
000078  f7fffffe          BL       GPIO_WriteBit
;;;493    				GPIO_WriteBit(GPIOA, GPIO_Pin_4, Bit_SET);   
00007c  2201              MOVS     r2,#1
00007e  2110              MOVS     r1,#0x10
000080  4620              MOV      r0,r4
000082  f7fffffe          BL       GPIO_WriteBit
;;;494    				delay_spi(1000);
000086  e8bd4010          POP      {r4,lr}
00008a  f44f707a          MOV      r0,#0x3e8
00008e  f7ffbffe          B.W      delay_spi
;;;495    }
;;;496    
                          ENDP

000092  0000              DCW      0x0000
                  |L21.148|
                          DCD      0x40020000

                          AREA ||i.test_lin||, CODE, READONLY, ALIGN=2

                  test_lin PROC
;;;734    
;;;735    void test_lin(void)
000000  2001              MOVS     r0,#1
;;;736    {
;;;737    		u8 i=0, z=0;
000002  2400              MOVS     r4,#0
;;;738    	
;;;739    	uint16_t  pin=GPIO_Pin_0;
000004  4680              MOV      r8,r0
;;;740    	uint16_t  pin_c=GPIO_Pin_1;	
000006  2702              MOVS     r7,#2
;;;741    	// test lineika
;;;742    	
;;;743    		GPIO_WriteBit(GPIOA, pin, Bit_RESET);
000008  4622              MOV      r2,r4
00000a  4601              MOV      r1,r0
00000c  4dfe              LDR      r5,|L22.1032|
00000e  4628              MOV      r0,r5
000010  f7fffffe          BL       GPIO_WriteBit
;;;744    		GPIO_WriteBit(GPIOA, pin_c, Bit_RESET); 
000014  2200              MOVS     r2,#0
000016  4639              MOV      r1,r7
000018  4628              MOV      r0,r5
00001a  f7fffffe          BL       GPIO_WriteBit
;;;745    				delay_spi(100);
00001e  2064              MOVS     r0,#0x64
000020  f7fffffe          BL       delay_spi
;;;746    				spi_send(0x01);delay_spi(100);
000024  2001              MOVS     r0,#1
000026  f7fffffe          BL       spi_send
00002a  2064              MOVS     r0,#0x64
00002c  f7fffffe          BL       delay_spi
;;;747    				spi_send(0); delay_spi(100);	
000030  2000              MOVS     r0,#0
000032  f7fffffe          BL       spi_send
000036  2064              MOVS     r0,#0x64
000038  f7fffffe          BL       delay_spi
;;;748    		GPIO_WriteBit(GPIOA, pin_c, Bit_SET);
00003c  2201              MOVS     r2,#1
00003e  4639              MOV      r1,r7
000040  4628              MOV      r0,r5
000042  f7fffffe          BL       GPIO_WriteBit
;;;749    		GPIO_WriteBit(GPIOA, pin, Bit_SET);	
000046  2201              MOVS     r2,#1
000048  4641              MOV      r1,r8
00004a  4628              MOV      r0,r5
00004c  f7fffffe          BL       GPIO_WriteBit
;;;750    	
;;;751    			delay_spi(1000);
000050  f44f767a          MOV      r6,#0x3e8
000054  4630              MOV      r0,r6
000056  f7fffffe          BL       delay_spi
;;;752    		GPIO_WriteBit(GPIOA, pin, Bit_RESET);
00005a  2200              MOVS     r2,#0
00005c  4641              MOV      r1,r8
00005e  4628              MOV      r0,r5
000060  f7fffffe          BL       GPIO_WriteBit
;;;753    		GPIO_WriteBit(GPIOA, pin_c, Bit_RESET); 
000064  2200              MOVS     r2,#0
000066  4639              MOV      r1,r7
000068  4628              MOV      r0,r5
00006a  f7fffffe          BL       GPIO_WriteBit
;;;754    				delay_spi(100);
00006e  2064              MOVS     r0,#0x64
000070  f7fffffe          BL       delay_spi
;;;755    				spi_send(0x02);delay_spi(100);
000074  2002              MOVS     r0,#2
000076  f7fffffe          BL       spi_send
00007a  2064              MOVS     r0,#0x64
00007c  f7fffffe          BL       delay_spi
;;;756    				spi_send(0); delay_spi(100);	
000080  2000              MOVS     r0,#0
000082  f7fffffe          BL       spi_send
000086  2064              MOVS     r0,#0x64
000088  f7fffffe          BL       delay_spi
;;;757    		GPIO_WriteBit(GPIOA, pin_c, Bit_SET);
00008c  2201              MOVS     r2,#1
00008e  4639              MOV      r1,r7
000090  4628              MOV      r0,r5
000092  f7fffffe          BL       GPIO_WriteBit
;;;758    		GPIO_WriteBit(GPIOA, pin, Bit_SET);	
000096  2201              MOVS     r2,#1
000098  4641              MOV      r1,r8
00009a  4628              MOV      r0,r5
00009c  f7fffffe          BL       GPIO_WriteBit
;;;759    		
;;;760    			delay_spi(1000);
0000a0  4630              MOV      r0,r6
0000a2  f7fffffe          BL       delay_spi
;;;761    		GPIO_WriteBit(GPIOA, pin, Bit_RESET);			
0000a6  2200              MOVS     r2,#0
0000a8  4641              MOV      r1,r8
0000aa  4628              MOV      r0,r5
0000ac  f7fffffe          BL       GPIO_WriteBit
;;;762    					GPIO_WriteBit(GPIOA, pin_c, Bit_RESET); 
0000b0  2200              MOVS     r2,#0
0000b2  4639              MOV      r1,r7
0000b4  4628              MOV      r0,r5
0000b6  f7fffffe          BL       GPIO_WriteBit
;;;763    				delay_spi(100);
0000ba  2064              MOVS     r0,#0x64
0000bc  f7fffffe          BL       delay_spi
;;;764    				spi_send(0x03);delay_spi(100);
0000c0  2003              MOVS     r0,#3
0000c2  f7fffffe          BL       spi_send
0000c6  2064              MOVS     r0,#0x64
0000c8  f7fffffe          BL       delay_spi
;;;765    				spi_send(0); delay_spi(100);	
0000cc  2000              MOVS     r0,#0
0000ce  f7fffffe          BL       spi_send
0000d2  2064              MOVS     r0,#0x64
0000d4  f7fffffe          BL       delay_spi
;;;766    		GPIO_WriteBit(GPIOA, pin_c, Bit_SET);
0000d8  2201              MOVS     r2,#1
0000da  4639              MOV      r1,r7
0000dc  4628              MOV      r0,r5
0000de  f7fffffe          BL       GPIO_WriteBit
;;;767    		GPIO_WriteBit(GPIOA, pin, Bit_SET);	
0000e2  2201              MOVS     r2,#1
0000e4  4641              MOV      r1,r8
0000e6  4628              MOV      r0,r5
0000e8  f7fffffe          BL       GPIO_WriteBit
;;;768    		
;;;769    			delay_spi(1000);
0000ec  4630              MOV      r0,r6
0000ee  f7fffffe          BL       delay_spi
;;;770    		GPIO_WriteBit(GPIOA, pin, Bit_RESET);			
0000f2  2200              MOVS     r2,#0
0000f4  4641              MOV      r1,r8
0000f6  4628              MOV      r0,r5
0000f8  f7fffffe          BL       GPIO_WriteBit
;;;771    					GPIO_WriteBit(GPIOA, pin_c, Bit_RESET); 
0000fc  2200              MOVS     r2,#0
0000fe  4639              MOV      r1,r7
000100  4628              MOV      r0,r5
000102  f7fffffe          BL       GPIO_WriteBit
;;;772    				delay_spi(100);
000106  2064              MOVS     r0,#0x64
000108  f7fffffe          BL       delay_spi
;;;773    				spi_send(0x04);delay_spi(100);
00010c  2004              MOVS     r0,#4
00010e  f7fffffe          BL       spi_send
000112  2064              MOVS     r0,#0x64
000114  f7fffffe          BL       delay_spi
;;;774    				spi_send(0); delay_spi(100);	
000118  2000              MOVS     r0,#0
00011a  f7fffffe          BL       spi_send
00011e  2064              MOVS     r0,#0x64
000120  f7fffffe          BL       delay_spi
;;;775    		GPIO_WriteBit(GPIOA, pin_c, Bit_SET);
000124  2201              MOVS     r2,#1
000126  4639              MOV      r1,r7
000128  4628              MOV      r0,r5
00012a  f7fffffe          BL       GPIO_WriteBit
;;;776    		GPIO_WriteBit(GPIOA, pin, Bit_SET);	
00012e  2201              MOVS     r2,#1
000130  4641              MOV      r1,r8
000132  4628              MOV      r0,r5
000134  f7fffffe          BL       GPIO_WriteBit
;;;777    		
;;;778    			delay_spi(1000);
000138  4630              MOV      r0,r6
00013a  f7fffffe          BL       delay_spi
;;;779    		GPIO_WriteBit(GPIOA, pin, Bit_RESET);			
00013e  2200              MOVS     r2,#0
000140  4641              MOV      r1,r8
000142  4628              MOV      r0,r5
000144  f7fffffe          BL       GPIO_WriteBit
;;;780    					GPIO_WriteBit(GPIOA, pin_c, Bit_RESET); 
000148  2200              MOVS     r2,#0
00014a  4639              MOV      r1,r7
00014c  4628              MOV      r0,r5
00014e  f7fffffe          BL       GPIO_WriteBit
;;;781    				delay_spi(100);
000152  2064              MOVS     r0,#0x64
000154  f7fffffe          BL       delay_spi
;;;782    				spi_send(0x05);delay_spi(100);
000158  2005              MOVS     r0,#5
00015a  f7fffffe          BL       spi_send
00015e  2064              MOVS     r0,#0x64
000160  f7fffffe          BL       delay_spi
;;;783    				spi_send(0); delay_spi(100);	
000164  2000              MOVS     r0,#0
000166  f7fffffe          BL       spi_send
00016a  2064              MOVS     r0,#0x64
00016c  f7fffffe          BL       delay_spi
;;;784    		GPIO_WriteBit(GPIOA, pin_c, Bit_SET);
000170  2201              MOVS     r2,#1
000172  4639              MOV      r1,r7
000174  4628              MOV      r0,r5
000176  f7fffffe          BL       GPIO_WriteBit
;;;785    		GPIO_WriteBit(GPIOA, pin, Bit_SET);	
00017a  2201              MOVS     r2,#1
00017c  4641              MOV      r1,r8
00017e  4628              MOV      r0,r5
000180  f7fffffe          BL       GPIO_WriteBit
;;;786    		
;;;787    			delay_spi(1000);
000184  4630              MOV      r0,r6
000186  f7fffffe          BL       delay_spi
;;;788    		GPIO_WriteBit(GPIOA, pin, Bit_RESET);			
00018a  2200              MOVS     r2,#0
00018c  4641              MOV      r1,r8
00018e  4628              MOV      r0,r5
000190  f7fffffe          BL       GPIO_WriteBit
;;;789    					GPIO_WriteBit(GPIOA, pin_c, Bit_RESET); 
000194  2200              MOVS     r2,#0
000196  4639              MOV      r1,r7
000198  4628              MOV      r0,r5
00019a  f7fffffe          BL       GPIO_WriteBit
;;;790    				delay_spi(100);
00019e  2064              MOVS     r0,#0x64
0001a0  f7fffffe          BL       delay_spi
;;;791    				spi_send(0x06);delay_spi(100);
0001a4  2006              MOVS     r0,#6
0001a6  f7fffffe          BL       spi_send
0001aa  2064              MOVS     r0,#0x64
0001ac  f7fffffe          BL       delay_spi
;;;792    				spi_send(0); delay_spi(100);	
0001b0  2000              MOVS     r0,#0
0001b2  f7fffffe          BL       spi_send
0001b6  2064              MOVS     r0,#0x64
0001b8  f7fffffe          BL       delay_spi
;;;793    		GPIO_WriteBit(GPIOA, pin_c, Bit_SET);
0001bc  2201              MOVS     r2,#1
0001be  4639              MOV      r1,r7
0001c0  4628              MOV      r0,r5
0001c2  f7fffffe          BL       GPIO_WriteBit
;;;794    		GPIO_WriteBit(GPIOA, pin, Bit_SET);	
0001c6  2201              MOVS     r2,#1
0001c8  4641              MOV      r1,r8
0001ca  4628              MOV      r0,r5
0001cc  f7fffffe          BL       GPIO_WriteBit
;;;795    		
;;;796    			delay_spi(1000);
0001d0  4630              MOV      r0,r6
0001d2  f7fffffe          BL       delay_spi
;;;797    		GPIO_WriteBit(GPIOA, pin, Bit_RESET);			
0001d6  2200              MOVS     r2,#0
0001d8  4641              MOV      r1,r8
0001da  4628              MOV      r0,r5
0001dc  f7fffffe          BL       GPIO_WriteBit
;;;798    					GPIO_WriteBit(GPIOA, pin_c, Bit_RESET); 
0001e0  2200              MOVS     r2,#0
0001e2  4639              MOV      r1,r7
0001e4  4628              MOV      r0,r5
0001e6  f7fffffe          BL       GPIO_WriteBit
;;;799    				delay_spi(100);
0001ea  2064              MOVS     r0,#0x64
0001ec  f7fffffe          BL       delay_spi
;;;800    				spi_send(0x07);delay_spi(100);
0001f0  2007              MOVS     r0,#7
0001f2  f7fffffe          BL       spi_send
0001f6  2064              MOVS     r0,#0x64
0001f8  f7fffffe          BL       delay_spi
;;;801    				spi_send(0); delay_spi(100);	
0001fc  2000              MOVS     r0,#0
0001fe  f7fffffe          BL       spi_send
000202  2064              MOVS     r0,#0x64
000204  f7fffffe          BL       delay_spi
;;;802    		GPIO_WriteBit(GPIOA, pin_c, Bit_SET);
000208  2201              MOVS     r2,#1
00020a  4639              MOV      r1,r7
00020c  4628              MOV      r0,r5
00020e  f7fffffe          BL       GPIO_WriteBit
;;;803    		GPIO_WriteBit(GPIOA, pin, Bit_SET);		
000212  2201              MOVS     r2,#1
000214  4641              MOV      r1,r8
000216  4628              MOV      r0,r5
000218  f7fffffe          BL       GPIO_WriteBit
;;;804    			delay_spi(1000);
00021c  4630              MOV      r0,r6
00021e  f7fffffe          BL       delay_spi
;;;805    					GPIO_WriteBit(GPIOA, pin, Bit_RESET);
000222  2200              MOVS     r2,#0
000224  4641              MOV      r1,r8
000226  4628              MOV      r0,r5
000228  f7fffffe          BL       GPIO_WriteBit
;;;806    					GPIO_WriteBit(GPIOA, pin_c, Bit_RESET); 
00022c  2200              MOVS     r2,#0
00022e  4639              MOV      r1,r7
000230  4628              MOV      r0,r5
000232  f7fffffe          BL       GPIO_WriteBit
;;;807    				delay_spi(100);
000236  2064              MOVS     r0,#0x64
000238  f7fffffe          BL       delay_spi
;;;808    				spi_send(0x08);delay_spi(100);
00023c  2008              MOVS     r0,#8
00023e  f7fffffe          BL       spi_send
000242  2064              MOVS     r0,#0x64
000244  f7fffffe          BL       delay_spi
;;;809    				spi_send(0); delay_spi(100);	
000248  2000              MOVS     r0,#0
00024a  f7fffffe          BL       spi_send
00024e  2064              MOVS     r0,#0x64
000250  f7fffffe          BL       delay_spi
;;;810    		GPIO_WriteBit(GPIOA, pin_c, Bit_SET);
000254  2201              MOVS     r2,#1
000256  4639              MOV      r1,r7
000258  4628              MOV      r0,r5
00025a  f7fffffe          BL       GPIO_WriteBit
;;;811    		GPIO_WriteBit(GPIOA, pin, Bit_SET);	
00025e  2201              MOVS     r2,#1
000260  4641              MOV      r1,r8
000262  4628              MOV      r0,r5
000264  f7fffffe          BL       GPIO_WriteBit
;;;812    			delay_spi(1000);
000268  4630              MOV      r0,r6
00026a  f7fffffe          BL       delay_spi
;;;813    	
;;;814    			
;;;815    			// scan limit
;;;816    			GPIO_WriteBit(GPIOA, pin_c, Bit_RESET); 
00026e  2200              MOVS     r2,#0
000270  4639              MOV      r1,r7
000272  4628              MOV      r0,r5
000274  f7fffffe          BL       GPIO_WriteBit
;;;817    			GPIO_WriteBit(GPIOA, pin, Bit_RESET);      //   GPIOA.0			
000278  2200              MOVS     r2,#0
00027a  4641              MOV      r1,r8
00027c  4628              MOV      r0,r5
00027e  f7fffffe          BL       GPIO_WriteBit
;;;818    			delay_spi(100);
000282  2064              MOVS     r0,#0x64
000284  f7fffffe          BL       delay_spi
;;;819    			spi_send(0x0B);
000288  200b              MOVS     r0,#0xb
00028a  f7fffffe          BL       spi_send
;;;820    			delay_spi(100);
00028e  2064              MOVS     r0,#0x64
000290  f7fffffe          BL       delay_spi
;;;821    			spi_send(1);
000294  2001              MOVS     r0,#1
000296  f7fffffe          BL       spi_send
;;;822    			delay_spi(100);			
00029a  2064              MOVS     r0,#0x64
00029c  f7fffffe          BL       delay_spi
;;;823    			GPIO_WriteBit(GPIOA, pin_c, Bit_SET);  
0002a0  2201              MOVS     r2,#1
0002a2  4639              MOV      r1,r7
0002a4  4628              MOV      r0,r5
0002a6  f7fffffe          BL       GPIO_WriteBit
;;;824    			GPIO_WriteBit(GPIOA, pin, Bit_SET);  
0002aa  2201              MOVS     r2,#1
0002ac  4641              MOV      r1,r8
0002ae  4628              MOV      r0,r5
0002b0  f7fffffe          BL       GPIO_WriteBit
;;;825    			
;;;826    			delay_spi(1000);
0002b4  4630              MOV      r0,r6
0002b6  f7fffffe          BL       delay_spi
;;;827    		
;;;828    			// registr intensivnost
;;;829    
;;;830    				GPIO_WriteBit(GPIOA, pin, Bit_RESET);  
0002ba  2200              MOVS     r2,#0
0002bc  4641              MOV      r1,r8
0002be  4628              MOV      r0,r5
0002c0  f7fffffe          BL       GPIO_WriteBit
;;;831    			GPIO_WriteBit(GPIOA, pin_c, Bit_RESET);      //   GPIOA.0			
0002c4  2200              MOVS     r2,#0
0002c6  4639              MOV      r1,r7
0002c8  4628              MOV      r0,r5
0002ca  f7fffffe          BL       GPIO_WriteBit
;;;832    			delay_spi(100);
0002ce  2064              MOVS     r0,#0x64
0002d0  f7fffffe          BL       delay_spi
;;;833    			spi_send(0x0A);	
0002d4  200a              MOVS     r0,#0xa
0002d6  f7fffffe          BL       spi_send
;;;834    			delay_spi(100);
0002da  2064              MOVS     r0,#0x64
0002dc  f7fffffe          BL       delay_spi
;;;835    			spi_send(0x01);																	
0002e0  2001              MOVS     r0,#1
0002e2  f7fffffe          BL       spi_send
;;;836    			delay_spi(100);			
0002e6  2064              MOVS     r0,#0x64
0002e8  f7fffffe          BL       delay_spi
;;;837    			GPIO_WriteBit(GPIOA, pin_c, Bit_SET);  
0002ec  2201              MOVS     r2,#1
0002ee  4639              MOV      r1,r7
0002f0  4628              MOV      r0,r5
0002f2  f7fffffe          BL       GPIO_WriteBit
;;;838    			GPIO_WriteBit(GPIOA, pin, Bit_SET);  	
0002f6  2201              MOVS     r2,#1
0002f8  4641              MOV      r1,r8
0002fa  4628              MOV      r0,r5
0002fc  f7fffffe          BL       GPIO_WriteBit
;;;839    			// code B
;;;840    
;;;841    				GPIO_WriteBit(GPIOA, pin, Bit_RESET);  
000300  2200              MOVS     r2,#0
000302  4641              MOV      r1,r8
000304  4628              MOV      r0,r5
000306  f7fffffe          BL       GPIO_WriteBit
;;;842    			GPIO_WriteBit(GPIOA, pin_c, Bit_RESET);      //   GPIOA.0			
00030a  2200              MOVS     r2,#0
00030c  4639              MOV      r1,r7
00030e  4628              MOV      r0,r5
000310  f7fffffe          BL       GPIO_WriteBit
;;;843    			delay_spi(100);
000314  2064              MOVS     r0,#0x64
000316  f7fffffe          BL       delay_spi
;;;844    			spi_send(0x09);	
00031a  2009              MOVS     r0,#9
00031c  f7fffffe          BL       spi_send
;;;845    			delay_spi(100);
000320  2064              MOVS     r0,#0x64
000322  f7fffffe          BL       delay_spi
;;;846    			spi_send(0x00);																	
000326  2000              MOVS     r0,#0
000328  f7fffffe          BL       spi_send
;;;847    			delay_spi(100);			
00032c  2064              MOVS     r0,#0x64
00032e  f7fffffe          BL       delay_spi
;;;848    			GPIO_WriteBit(GPIOA, pin_c, Bit_SET);  	
000332  2201              MOVS     r2,#1
000334  4639              MOV      r1,r7
000336  4628              MOV      r0,r5
000338  f7fffffe          BL       GPIO_WriteBit
;;;849    			GPIO_WriteBit(GPIOA, pin, Bit_SET);  
00033c  2201              MOVS     r2,#1
00033e  4641              MOV      r1,r8
000340  4628              MOV      r0,r5
000342  f7fffffe          BL       GPIO_WriteBit
;;;850    
;;;851    				GPIO_WriteBit(GPIOA, pin, Bit_RESET);  
000346  2200              MOVS     r2,#0
000348  4641              MOV      r1,r8
00034a  4628              MOV      r0,r5
00034c  f7fffffe          BL       GPIO_WriteBit
;;;852    				GPIO_WriteBit(GPIOA, pin_c, Bit_RESET);      //   CS  GPIOA.0
000350  2200              MOVS     r2,#0
000352  4639              MOV      r1,r7
000354  4628              MOV      r0,r5
000356  f7fffffe          BL       GPIO_WriteBit
;;;853    			delay_spi(100);
00035a  2064              MOVS     r0,#0x64
00035c  f7fffffe          BL       delay_spi
;;;854    			spi_send(0x0C);
000360  200c              MOVS     r0,#0xc
000362  f7fffffe          BL       spi_send
;;;855    			delay_spi(100);
000366  2064              MOVS     r0,#0x64
000368  f7fffffe          BL       delay_spi
;;;856    			spi_send(0x01);
00036c  2001              MOVS     r0,#1
00036e  f7fffffe          BL       spi_send
;;;857    			delay_spi(100);			
000372  2064              MOVS     r0,#0x64
000374  f7fffffe          BL       delay_spi
;;;858    			GPIO_WriteBit(GPIOA, pin_c, Bit_SET);      //   GPIOA.0
000378  2201              MOVS     r2,#1
00037a  4639              MOV      r1,r7
00037c  4628              MOV      r0,r5
00037e  f7fffffe          BL       GPIO_WriteBit
;;;859    			GPIO_WriteBit(GPIOA, pin, Bit_SET);  
000382  2201              MOVS     r2,#1
000384  4641              MOV      r1,r8
000386  4628              MOV      r0,r5
000388  f7fffffe          BL       GPIO_WriteBit
;;;860    			delay_spi(1000);
00038c  4630              MOV      r0,r6
00038e  f7fffffe          BL       delay_spi
000392  46b1              MOV      r9,r6                 ;751
;;;861    
;;;862    /*
;;;863    
;;;864    
;;;865    				GPIO_WriteBit(GPIOA, pin_c, Bit_RESET);      //   CS  GPIOA.0
;;;866    			delay_spi(100);
;;;867    			spi_send(0x0C);
;;;868    			delay_spi(100);
;;;869    			spi_send(0x01);
;;;870    			delay_spi(100);			
;;;871    			GPIO_WriteBit(GPIOA, pin_c, Bit_SET);      //   GPIOA.0
;;;872    
;;;873    	
;;;874    			delay_spi(1000);
;;;875    			
;;;876    			// scan limit
;;;877    
;;;878    			GPIO_WriteBit(GPIOA, pin_c, Bit_RESET);      //   GPIOA.0			
;;;879    			delay_spi(100);
;;;880    			spi_send(0x0B);
;;;881    			delay_spi(100);
;;;882    			spi_send(7);
;;;883    			delay_spi(100);			
;;;884    			GPIO_WriteBit(GPIOA, pin_c, Bit_SET);  
;;;885    
;;;886    			
;;;887    			delay_spi(1000);
;;;888    		
;;;889    			// registr intensivnost
;;;890    
;;;891    			GPIO_WriteBit(GPIOA, pin_c, Bit_RESET);      //   GPIOA.0			
;;;892    			delay_spi(100);
;;;893    			spi_send(0x0A);	
;;;894    			delay_spi(100);
;;;895    			spi_send(0x01);																	
;;;896    			delay_spi(100);			
;;;897    			GPIO_WriteBit(GPIOA, pin_c, Bit_SET);  
;;;898    
;;;899    
;;;900    			// code B
;;;901    
;;;902    			GPIO_WriteBit(GPIOA, pin_c, Bit_RESET);      //   GPIOA.0			
;;;903    			delay_spi(100);
;;;904    			spi_send(0x09);	
;;;905    			delay_spi(100);
;;;906    			spi_send(0x00);																	
;;;907    			delay_spi(100);			
;;;908    			GPIO_WriteBit(GPIOA, pin_c, Bit_SET);  
;;;909    			
;;;910    		*/
;;;911    	
;;;912    	while (1)
;;;913    	{
;;;914    		/*
;;;915    		for (i=1;i<8;i++)
;;;916    		{
;;;917    GPIO_WriteBit(GPIOA, pin, Bit_RESET); 
;;;918    				delay_spi(100);
;;;919    				spi_send((u8)i);delay_spi(100);
;;;920    				spi_send((u8)0xAA); delay_spi(100);					
;;;921    GPIO_WriteBit(GPIOA, pin, Bit_SET); 
;;;922    			delay_spi(1000);
;;;923    		}
;;;924    		*/
;;;925    		
;;;926    		
;;;927    		 GPIO_WriteBit(GPIOA, pin, Bit_RESET); 
;;;928    		GPIO_WriteBit(GPIOA, pin_c, Bit_RESET); 
;;;929    				delay_spi(100);
;;;930    				spi_send(0x0f);delay_spi(100);
;;;931    				spi_send(0); delay_spi(100);					
;;;932    			GPIO_WriteBit(GPIOA, pin, Bit_SET); 
;;;933    		GPIO_WriteBit(GPIOA, pin_c, Bit_SET);
;;;934    		delay_spi(1000);
;;;935    
;;;936    
;;;937    		 GPIO_WriteBit(GPIOA, pin, Bit_RESET); 
;;;938    		GPIO_WriteBit(GPIOA, pin_c, Bit_RESET); 
;;;939    				delay_spi(100);
;;;940    				spi_send(0x01);delay_spi(100);
;;;941    				spi_send((u8)z); delay_spi(100);	
;;;942    		
;;;943    		  switch (z)
;;;944    			{
;;;945    				case 0x00:  
;;;946    					z=1;
;;;947    					break;
;;;948    
;;;949    				case 1:  
;;;950    					z=2;
;;;951    					break;
;;;952    
;;;953    				case 2:  
;;;954    					z=4;
;;;955    					break;
;;;956    
;;;957    				case 4:  
;;;958    					z=8;
;;;959    					break;
;;;960    
;;;961    				case 8:  
;;;962    					z=16;
;;;963    					break;
;;;964    
;;;965    				case 16:  
;;;966    					z=32;
;;;967    					break;
;;;968    
;;;969    				case 32:  
;;;970    					z=64;
;;;971    					break;
;;;972    
;;;973    				case 64:  
;;;974    					z=128;
;;;975    					break;
;;;976    
;;;977    				case 128:  
;;;978    					z=0;
;;;979    					break;
;;;980    
;;;981    				default:
;;;982    						z=0;
;;;983    					break;
;;;984    			}
;;;985    				
;;;986    				
;;;987    
;;;988    
;;;989    
;;;990    		GPIO_WriteBit(GPIOA, pin_c, Bit_SET);
;;;991    		 GPIO_WriteBit(GPIOA, pin, Bit_RESET); 		
;;;992    		
;;;993    		/*
;;;994    			GPIO_WriteBit(GPIOA, pin_c, Bit_RESET); 
;;;995    				delay_spi(100);
;;;996    				spi_send(0x0f);delay_spi(100);
;;;997    				spi_send(0); delay_spi(100);					
;;;998    			GPIO_WriteBit(GPIOA, pin_c, Bit_SET);
;;;999    	*/
;;;1000   		
;;;1001   		/*
;;;1002   				GPIO_WriteBit(GPIOA, pin, Bit_RESET); 
;;;1003   				delay_spi(100);
;;;1004   				spi_send(0x01);delay_spi(100);
;;;1005   				spi_send(0x00); delay_spi(100);					
;;;1006   			GPIO_WriteBit(GPIOA, pin, Bit_SET); 
;;;1007   delay_spi(1000);
;;;1008   				GPIO_WriteBit(GPIOA, pin, Bit_RESET); 
;;;1009   				delay_spi(100);
;;;1010   				spi_send(0x02);delay_spi(100);
;;;1011   				spi_send(0x00); delay_spi(100);					
;;;1012   			GPIO_WriteBit(GPIOA, pin, Bit_SET); 
;;;1013   delay_spi(1000);			
;;;1014   			GPIO_WriteBit(GPIOA, pin, Bit_RESET); 
;;;1015   				delay_spi(100);
;;;1016   				spi_send(0x03);delay_spi(100);
;;;1017   				spi_send(0x00); delay_spi(100);					
;;;1018   			GPIO_WriteBit(GPIOA, pin, Bit_SET); 
;;;1019   delay_spi(1000);			
;;;1020   			GPIO_WriteBit(GPIOA, pin, Bit_RESET); 
;;;1021   				delay_spi(100);
;;;1022   				spi_send(0x04);delay_spi(100);
;;;1023   				spi_send(0x00); delay_spi(100);					
;;;1024   			GPIO_WriteBit(GPIOA, pin, Bit_SET); 
;;;1025   delay_spi(1000);			
;;;1026   			GPIO_WriteBit(GPIOA, pin, Bit_RESET); 
;;;1027   				delay_spi(100);
;;;1028   				spi_send(0x05);delay_spi(100);
;;;1029   				spi_send(0x00); delay_spi(100);					
;;;1030   			GPIO_WriteBit(GPIOA, pin, Bit_SET); 
;;;1031   delay_spi(1000);			
;;;1032   			GPIO_WriteBit(GPIOA, pin, Bit_RESET); 
;;;1033   				delay_spi(100);
;;;1034   				spi_send(0x06);delay_spi(100);
;;;1035   				spi_send(0x00); delay_spi(100);					
;;;1036   			GPIO_WriteBit(GPIOA, pin, Bit_SET); 
;;;1037   delay_spi(1000);
;;;1038   			GPIO_WriteBit(GPIOA, pin, Bit_RESET); 
;;;1039   				delay_spi(100);
;;;1040   				spi_send(0x07);delay_spi(100);
;;;1041   				spi_send(0x00); delay_spi(100);					
;;;1042   			GPIO_WriteBit(GPIOA, pin, Bit_SET); 
;;;1043   	*/		
;;;1044   		for (i=1;i<200;i++)
;;;1045   			delay_spi(100000);
000394  4e1d              LDR      r6,|L22.1036|
                  |L22.918|
000396  2200              MOVS     r2,#0                 ;927
000398  4641              MOV      r1,r8                 ;927
00039a  4628              MOV      r0,r5                 ;927
00039c  f7fffffe          BL       GPIO_WriteBit
0003a0  2200              MOVS     r2,#0                 ;928
0003a2  4639              MOV      r1,r7                 ;928
0003a4  4628              MOV      r0,r5                 ;928
0003a6  f7fffffe          BL       GPIO_WriteBit
0003aa  2064              MOVS     r0,#0x64              ;929
0003ac  f7fffffe          BL       delay_spi
0003b0  200f              MOVS     r0,#0xf               ;930
0003b2  f7fffffe          BL       spi_send
0003b6  2064              MOVS     r0,#0x64              ;930
0003b8  f7fffffe          BL       delay_spi
0003bc  2000              MOVS     r0,#0                 ;931
0003be  f7fffffe          BL       spi_send
0003c2  2064              MOVS     r0,#0x64              ;931
0003c4  f7fffffe          BL       delay_spi
0003c8  2201              MOVS     r2,#1                 ;932
0003ca  4641              MOV      r1,r8                 ;932
0003cc  4628              MOV      r0,r5                 ;932
0003ce  f7fffffe          BL       GPIO_WriteBit
0003d2  2201              MOVS     r2,#1                 ;933
0003d4  4639              MOV      r1,r7                 ;933
0003d6  4628              MOV      r0,r5                 ;933
0003d8  f7fffffe          BL       GPIO_WriteBit
0003dc  4648              MOV      r0,r9                 ;934
0003de  f7fffffe          BL       delay_spi
0003e2  2200              MOVS     r2,#0                 ;937
0003e4  4641              MOV      r1,r8                 ;937
0003e6  4628              MOV      r0,r5                 ;937
0003e8  f7fffffe          BL       GPIO_WriteBit
0003ec  2200              MOVS     r2,#0                 ;938
0003ee  4639              MOV      r1,r7                 ;938
0003f0  4628              MOV      r0,r5                 ;938
0003f2  f7fffffe          BL       GPIO_WriteBit
0003f6  2064              MOVS     r0,#0x64              ;939
0003f8  f7fffffe          BL       delay_spi
0003fc  2001              MOVS     r0,#1                 ;940
0003fe  f7fffffe          BL       spi_send
000402  2064              MOVS     r0,#0x64              ;940
000404  e004              B        |L22.1040|
000406  0000              DCW      0x0000
                  |L22.1032|
                          DCD      0x40020000
                  |L22.1036|
                          DCD      0x000186a0
                  |L22.1040|
000410  f7fffffe          BL       delay_spi
000414  4620              MOV      r0,r4                 ;941
000416  f7fffffe          BL       spi_send
00041a  2064              MOVS     r0,#0x64              ;941
00041c  f7fffffe          BL       delay_spi
000420  2c08              CMP      r4,#8                 ;943
000422  d034              BEQ      |L22.1166|
000424  dc07              BGT      |L22.1078|
000426  b354              CBZ      r4,|L22.1150|
000428  2c01              CMP      r4,#1                 ;943
00042a  d02a              BEQ      |L22.1154|
00042c  2c02              CMP      r4,#2                 ;943
00042e  d02a              BEQ      |L22.1158|
000430  2c04              CMP      r4,#4                 ;943
000432  d106              BNE      |L22.1090|
000434  e029              B        |L22.1162|
                  |L22.1078|
000436  2c10              CMP      r4,#0x10              ;943
000438  d02b              BEQ      |L22.1170|
00043a  2c20              CMP      r4,#0x20              ;943
00043c  d02b              BEQ      |L22.1174|
00043e  2c40              CMP      r4,#0x40              ;943
000440  d02b              BEQ      |L22.1178|
                  |L22.1090|
000442  2400              MOVS     r4,#0                 ;978
                  |L22.1092|
000444  2201              MOVS     r2,#1                 ;990
000446  4639              MOV      r1,r7                 ;990
000448  4628              MOV      r0,r5                 ;990
00044a  f7fffffe          BL       GPIO_WriteBit
00044e  2200              MOVS     r2,#0                 ;991
000450  4641              MOV      r1,r8                 ;991
000452  4628              MOV      r0,r5                 ;991
000454  f7fffffe          BL       GPIO_WriteBit
000458  2201              MOVS     r2,#1                 ;1044
                  |L22.1114|
00045a  4630              MOV      r0,r6
00045c  f7fffffe          BL       delay_spi
000460  1c52              ADDS     r2,r2,#1              ;1044
000462  b2d2              UXTB     r2,r2                 ;1044
000464  2ac8              CMP      r2,#0xc8              ;1044
000466  d3f8              BCC      |L22.1114|
;;;1046   /*		
;;;1047   	GPIO_WriteBit(GPIOA, pin_c, Bit_RESET);
;;;1048   		 GPIO_WriteBit(GPIOA, pin, Bit_RESET); 
;;;1049   				delay_spi(100);
;;;1050   				spi_send(0x0f);delay_spi(100);
;;;1051   				spi_send(1); delay_spi(100);					
;;;1052   			GPIO_WriteBit(GPIOA, pin, Bit_SET);
;;;1053   			GPIO_WriteBit(GPIOA, pin_c, Bit_SET);
;;;1054   			*/
;;;1055   /*			
;;;1056   			delay_spi(1000);			
;;;1057   			GPIO_WriteBit(GPIOA, pin_c, Bit_RESET); 
;;;1058   				delay_spi(100);
;;;1059   				spi_send(0x01);delay_spi(100);
;;;1060   				spi_send(1); delay_spi(100);					
;;;1061   			GPIO_WriteBit(GPIOA, pin_c, Bit_SET);
;;;1062   */
;;;1063   	/*	
;;;1064   				GPIO_WriteBit(GPIOA, pin, Bit_RESET); 
;;;1065   				delay_spi(100);
;;;1066   				spi_send(0x01);delay_spi(100);
;;;1067   				spi_send(0x0f); delay_spi(100);					
;;;1068   			GPIO_WriteBit(GPIOA, pin, Bit_SET); 
;;;1069   */			
;;;1070   		for (i=1;i<200;i++)
000468  2201              MOVS     r2,#1
;;;1071   			delay_spi(9000);	
00046a  f2423328          MOV      r3,#0x2328
                  |L22.1134|
00046e  4618              MOV      r0,r3
000470  f7fffffe          BL       delay_spi
000474  1c52              ADDS     r2,r2,#1              ;1070
000476  b2d2              UXTB     r2,r2                 ;1070
000478  2ac8              CMP      r2,#0xc8              ;1070
00047a  d3f8              BCC      |L22.1134|
00047c  e78b              B        |L22.918|
                  |L22.1150|
00047e  2401              MOVS     r4,#1                 ;946
000480  e7e0              B        |L22.1092|
                  |L22.1154|
000482  2402              MOVS     r4,#2                 ;950
000484  e7de              B        |L22.1092|
                  |L22.1158|
000486  2404              MOVS     r4,#4                 ;954
000488  e7dc              B        |L22.1092|
                  |L22.1162|
00048a  2408              MOVS     r4,#8                 ;958
00048c  e7da              B        |L22.1092|
                  |L22.1166|
00048e  2410              MOVS     r4,#0x10              ;962
000490  e7d8              B        |L22.1092|
                  |L22.1170|
000492  2420              MOVS     r4,#0x20              ;966
000494  e7d6              B        |L22.1092|
                  |L22.1174|
000496  2440              MOVS     r4,#0x40              ;970
000498  e7d4              B        |L22.1092|
                  |L22.1178|
00049a  2480              MOVS     r4,#0x80              ;974
00049c  e7d2              B        |L22.1092|
;;;1072   	
;;;1073   		
;;;1074   	}
;;;1075   }
;;;1076   
                          ENDP


                          AREA ||i.test_lin2||, CODE, READONLY, ALIGN=2

                  test_lin2 PROC
;;;620    
;;;621    void test_lin2(void)
000000  2001              MOVS     r0,#1
;;;622    {
;;;623    		u8 i=0, z=0;	
;;;624    		uint16_t  pin=GPIO_Pin_0;
;;;625    	
;;;626    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
000002  4c86              LDR      r4,|L23.540|
000004  4681              MOV      r9,r0                 ;624
000006  4601              MOV      r1,r0
000008  2200              MOVS     r2,#0
00000a  4620              MOV      r0,r4
00000c  f7fffffe          BL       GPIO_WriteBit
000010  2064              MOVS     r0,#0x64
000012  f7fffffe          BL       delay_spi
;;;627    		spi_send((u8)0x0F);delay_spi(100);
000016  200f              MOVS     r0,#0xf
000018  f7fffffe          BL       spi_send
00001c  2064              MOVS     r0,#0x64
00001e  f7fffffe          BL       delay_spi
;;;628    		spi_send((u8)1); delay_spi(100);	
000022  2001              MOVS     r0,#1
000024  f7fffffe          BL       spi_send
000028  2064              MOVS     r0,#0x64
00002a  f7fffffe          BL       delay_spi
;;;629    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);
00002e  2201              MOVS     r2,#1
000030  4649              MOV      r1,r9
000032  4620              MOV      r0,r4
000034  f7fffffe          BL       GPIO_WriteBit
000038  f44f777a          MOV      r7,#0x3e8
00003c  4638              MOV      r0,r7
00003e  f7fffffe          BL       delay_spi
;;;630    	
;;;631    			GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
000042  2200              MOVS     r2,#0
000044  4649              MOV      r1,r9
000046  4620              MOV      r0,r4
000048  f7fffffe          BL       GPIO_WriteBit
00004c  2064              MOVS     r0,#0x64
00004e  f7fffffe          BL       delay_spi
;;;632    		spi_send((u8)0x0F);delay_spi(100);
000052  200f              MOVS     r0,#0xf
000054  f7fffffe          BL       spi_send
000058  2064              MOVS     r0,#0x64
00005a  f7fffffe          BL       delay_spi
;;;633    		spi_send((u8)0); delay_spi(100);	
00005e  2000              MOVS     r0,#0
000060  f7fffffe          BL       spi_send
000064  2064              MOVS     r0,#0x64
000066  f7fffffe          BL       delay_spi
;;;634    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);
00006a  2201              MOVS     r2,#1
00006c  4649              MOV      r1,r9
00006e  4620              MOV      r0,r4
000070  f7fffffe          BL       GPIO_WriteBit
000074  4638              MOV      r0,r7
000076  f7fffffe          BL       delay_spi
;;;635    	
;;;636    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
00007a  2200              MOVS     r2,#0
00007c  4649              MOV      r1,r9
00007e  4620              MOV      r0,r4
000080  f7fffffe          BL       GPIO_WriteBit
000084  2064              MOVS     r0,#0x64
000086  f7fffffe          BL       delay_spi
;;;637    		spi_send((u8)0x0C);delay_spi(100);
00008a  200c              MOVS     r0,#0xc
00008c  f7fffffe          BL       spi_send
000090  2064              MOVS     r0,#0x64
000092  f7fffffe          BL       delay_spi
;;;638    		spi_send((u8)1); delay_spi(100);	
000096  2001              MOVS     r0,#1
000098  f7fffffe          BL       spi_send
00009c  2064              MOVS     r0,#0x64
00009e  f7fffffe          BL       delay_spi
;;;639    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);
0000a2  2201              MOVS     r2,#1
0000a4  4649              MOV      r1,r9
0000a6  4620              MOV      r0,r4
0000a8  f7fffffe          BL       GPIO_WriteBit
0000ac  4638              MOV      r0,r7
0000ae  f7fffffe          BL       delay_spi
;;;640    
;;;641    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
0000b2  2200              MOVS     r2,#0
0000b4  4649              MOV      r1,r9
0000b6  4620              MOV      r0,r4
0000b8  f7fffffe          BL       GPIO_WriteBit
0000bc  2064              MOVS     r0,#0x64
0000be  f7fffffe          BL       delay_spi
;;;642    		spi_send((u8)0x0B);delay_spi(100);
0000c2  200b              MOVS     r0,#0xb
0000c4  f7fffffe          BL       spi_send
0000c8  2064              MOVS     r0,#0x64
0000ca  f7fffffe          BL       delay_spi
;;;643    		spi_send((u8)7); delay_spi(100);	
0000ce  2007              MOVS     r0,#7
0000d0  f7fffffe          BL       spi_send
0000d4  2064              MOVS     r0,#0x64
0000d6  f7fffffe          BL       delay_spi
;;;644    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);	
0000da  2201              MOVS     r2,#1
0000dc  4649              MOV      r1,r9
0000de  4620              MOV      r0,r4
0000e0  f7fffffe          BL       GPIO_WriteBit
0000e4  4638              MOV      r0,r7
0000e6  f7fffffe          BL       delay_spi
;;;645    
;;;646    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
0000ea  2200              MOVS     r2,#0
0000ec  4649              MOV      r1,r9
0000ee  4620              MOV      r0,r4
0000f0  f7fffffe          BL       GPIO_WriteBit
0000f4  2064              MOVS     r0,#0x64
0000f6  f7fffffe          BL       delay_spi
;;;647    		spi_send((u8)0x0A);delay_spi(100);
0000fa  200a              MOVS     r0,#0xa
0000fc  f7fffffe          BL       spi_send
000100  2064              MOVS     r0,#0x64
000102  f7fffffe          BL       delay_spi
;;;648    		spi_send((u8)0xFF); delay_spi(100);	
000106  20ff              MOVS     r0,#0xff
000108  f7fffffe          BL       spi_send
00010c  2064              MOVS     r0,#0x64
00010e  f7fffffe          BL       delay_spi
;;;649    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);	
000112  2201              MOVS     r2,#1
000114  4649              MOV      r1,r9
000116  4620              MOV      r0,r4
000118  f7fffffe          BL       GPIO_WriteBit
00011c  4638              MOV      r0,r7
00011e  f7fffffe          BL       delay_spi
;;;650    	
;;;651    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
000122  2200              MOVS     r2,#0
000124  4649              MOV      r1,r9
000126  4620              MOV      r0,r4
000128  f7fffffe          BL       GPIO_WriteBit
00012c  2064              MOVS     r0,#0x64
00012e  f7fffffe          BL       delay_spi
;;;652    		spi_send((u8)0x09);delay_spi(100);
000132  2009              MOVS     r0,#9
000134  f7fffffe          BL       spi_send
000138  2064              MOVS     r0,#0x64
00013a  f7fffffe          BL       delay_spi
;;;653    		spi_send((u8)0); delay_spi(100);	
00013e  2000              MOVS     r0,#0
000140  f7fffffe          BL       spi_send
000144  2064              MOVS     r0,#0x64
000146  f7fffffe          BL       delay_spi
;;;654    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);	
00014a  2201              MOVS     r2,#1
00014c  4649              MOV      r1,r9
00014e  4620              MOV      r0,r4
000150  f7fffffe          BL       GPIO_WriteBit
000154  4638              MOV      r0,r7
000156  f7fffffe          BL       delay_spi
;;;655    	
;;;656    	
;;;657    	in=1;
00015a  4e31              LDR      r6,|L23.544|
00015c  2501              MOVS     r5,#1
;;;658    	poz=1;
;;;659    		while (1)
;;;660    		{
;;;661    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
;;;662    		spi_send((u8)0x01);delay_spi(100);
;;;663    		spi_send((u8)0); delay_spi(100);	
;;;664    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);
;;;665    	/*		
;;;666    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
;;;667    		spi_send((u8)0x02);delay_spi(100);
;;;668    		spi_send((u8)0xFF); delay_spi(100);	
;;;669    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);
;;;670    			
;;;671    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
;;;672    		spi_send((u8)0x07);delay_spi(100);
;;;673    		spi_send((u8)0xff); delay_spi(100);	
;;;674    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);
;;;675    			
;;;676    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
;;;677    		spi_send((u8)0x04);delay_spi(100);
;;;678    		spi_send((u8)0xFF); delay_spi(100);	
;;;679    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);
;;;680    			*/
;;;681    /*			
;;;682    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
;;;683    		spi_send(0x0f);delay_spi(100);
;;;684    		spi_send(0); delay_spi(100);	
;;;685    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);	
;;;686    			*/
;;;687    			/*
;;;688    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
;;;689    		spi_send((u8)2);delay_spi(100);
;;;690    		spi_send((u8)2); delay_spi(100);	
;;;691    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);
;;;692    			*/
;;;693    /*
;;;694    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
;;;695    		spi_send(poz);delay_spi(100);
;;;696    		spi_send(0x10); delay_spi(100);	
;;;697    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);	
;;;698    		
;;;699    			poz++;
;;;700    			if (poz>4)
;;;701    				poz=0;
;;;702    */			
;;;703    		for (i=1;i<200;i++)
;;;704    			delay_spi(100000);
00015e  f8df80c4          LDR      r8,|L23.548|
000162  7035              STRB     r5,[r6,#0]            ;657
000164  7075              STRB     r5,[r6,#1]            ;658
                  |L23.358|
000166  2200              MOVS     r2,#0                 ;661
000168  4649              MOV      r1,r9                 ;661
00016a  4620              MOV      r0,r4                 ;661
00016c  f7fffffe          BL       GPIO_WriteBit
000170  2064              MOVS     r0,#0x64              ;661
000172  f7fffffe          BL       delay_spi
000176  2001              MOVS     r0,#1                 ;662
000178  f7fffffe          BL       spi_send
00017c  2064              MOVS     r0,#0x64              ;662
00017e  f7fffffe          BL       delay_spi
000182  2000              MOVS     r0,#0                 ;663
000184  f7fffffe          BL       spi_send
000188  2064              MOVS     r0,#0x64              ;663
00018a  f7fffffe          BL       delay_spi
00018e  2201              MOVS     r2,#1                 ;664
000190  4649              MOV      r1,r9                 ;664
000192  4620              MOV      r0,r4                 ;664
000194  f7fffffe          BL       GPIO_WriteBit
000198  4638              MOV      r0,r7                 ;664
00019a  f7fffffe          BL       delay_spi
00019e  2201              MOVS     r2,#1                 ;703
0001a0  4643              MOV      r3,r8
                  |L23.418|
0001a2  4618              MOV      r0,r3
0001a4  f7fffffe          BL       delay_spi
0001a8  1c52              ADDS     r2,r2,#1              ;703
0001aa  b2d2              UXTB     r2,r2                 ;703
0001ac  2ac8              CMP      r2,#0xc8              ;703
0001ae  d3f8              BCC      |L23.418|
;;;705    			
;;;706    /*			
;;;707    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
;;;708    		spi_send(0x0f);delay_spi(100);
;;;709    		spi_send(1); delay_spi(100);	
;;;710    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);	
;;;711    */
;;;712    		
;;;713    		GPIO_WriteBit(GPIOA, pin, Bit_RESET); 	delay_spi(100);
0001b0  2200              MOVS     r2,#0
0001b2  4649              MOV      r1,r9
0001b4  4620              MOV      r0,r4
0001b6  f7fffffe          BL       GPIO_WriteBit
0001ba  2064              MOVS     r0,#0x64
0001bc  f7fffffe          BL       delay_spi
;;;714    		spi_send((u8)in);delay_spi(100);
0001c0  7830              LDRB     r0,[r6,#0]  ; in
0001c2  f7fffffe          BL       spi_send
0001c6  2064              MOVS     r0,#0x64
0001c8  f7fffffe          BL       delay_spi
;;;715    		spi_send((u8)poz); delay_spi(100);	
0001cc  7870              LDRB     r0,[r6,#1]  ; poz
0001ce  f7fffffe          BL       spi_send
0001d2  2064              MOVS     r0,#0x64
0001d4  f7fffffe          BL       delay_spi
;;;716    		GPIO_WriteBit(GPIOA, pin, Bit_SET);			delay_spi(1000);	
0001d8  2201              MOVS     r2,#1
0001da  4649              MOV      r1,r9
0001dc  4620              MOV      r0,r4
0001de  f7fffffe          BL       GPIO_WriteBit
0001e2  4638              MOV      r0,r7
0001e4  f7fffffe          BL       delay_spi
;;;717    		
;;;718    
;;;719    		if (poz>=128)
0001e8  7870              LDRB     r0,[r6,#1]  ; poz
0001ea  2880              CMP      r0,#0x80
0001ec  d307              BCC      |L23.510|
;;;720    		{
;;;721    		  in++;
0001ee  7830              LDRB     r0,[r6,#0]  ; in
0001f0  1c40              ADDS     r0,r0,#1
0001f2  b2c0              UXTB     r0,r0
0001f4  7030              STRB     r0,[r6,#0]
;;;722    			if (in>8)
0001f6  2808              CMP      r0,#8
0001f8  d900              BLS      |L23.508|
;;;723    					in=1;
0001fa  7035              STRB     r5,[r6,#0]
                  |L23.508|
;;;724    			poz=1;
0001fc  7075              STRB     r5,[r6,#1]
                  |L23.510|
;;;725    		}
;;;726    		poz=poz*2;	
0001fe  7870              LDRB     r0,[r6,#1]  ; poz
;;;727    		for (i=1;i<200;i++)
;;;728    			delay_spi(10000);
000200  f2427310          MOV      r3,#0x2710
000204  0040              LSLS     r0,r0,#1              ;726
000206  7070              STRB     r0,[r6,#1]            ;726
000208  2201              MOVS     r2,#1                 ;727
                  |L23.522|
00020a  4618              MOV      r0,r3
00020c  f7fffffe          BL       delay_spi
000210  1c52              ADDS     r2,r2,#1              ;727
000212  b2d2              UXTB     r2,r2                 ;727
000214  2ac8              CMP      r2,#0xc8              ;727
000216  d3f8              BCC      |L23.522|
000218  e7a5              B        |L23.358|
;;;729    		}
;;;730    }
;;;731    
                          ENDP

00021a  0000              DCW      0x0000
                  |L23.540|
                          DCD      0x40020000
                  |L23.544|
                          DCD      ||.data||
                  |L23.548|
                          DCD      0x000186a0

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  USB_OTG_Core
                          %        1200
                  USB_Host
                          %        132
                  RCC_Clocks
                          %        16
                  RxBuffer
                          %        255
                  TxBuffer
                          %        255
                  indicators
                          %        120

                          AREA ||area_number.26||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.26||, ||.bss||
                  kor
                          %        80

                          AREA ||area_number.27||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.bss||
                  Buf_adc_zap1
                          %        2000

                          AREA ||area_number.28||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.28||, ||.bss||
                  Buf_adc_zap2
                          %        2000

                          AREA ||area_number.29||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.29||, ||.bss||
                  Buf_zap
                          %        6000

                          AREA ||area_number.30||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.30||, ||.bss||
                  average
                          %        20

                          AREA ||area_number.31||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.31||, ||.bss||
                  summa
                          %        20

                          AREA ||area_number.32||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.32||, ||.bss||
                  ||fz||
                          %        20

                          AREA ||area_number.33||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.bss||
                  fz_average
                          %        20

                          AREA ||area_number.34||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.bss||
                  max
                          %        20

                          AREA ||.data||, DATA, ALIGN=2

                  ||in||
000000  00                DCB      0x00
                  poz
000001  00                DCB      0x00
                  kol
000002  00                DCB      0x00
                  RepeatState
000003  00                DCB      0x00
                  new_komand
000004  00                DCB      0x00
                  address
000005  01                DCB      0x01
                  txsize
000006  00                DCB      0x00
                  rxsize
000007  00                DCB      0x00
                  tekper
000008  00                DCB      0x00
                  tekpr
000009  00                DCB      0x00
                  CCR_Val
00000a  41ba              DCW      0x41ba
                  ADC3ConvertedValue
00000c  0000              DCW      0x0000
00000e  0000              DCB      0x00,0x00
                  tmp
                          DCD      0x00000000
                  zad_spi
                          DCD      0x00002710
                  zad_spi2
                          DCD      0x000186a0
                  symb_code
00001c  7e306d79          DCB      0x7e,0x30,0x6d,0x79
000020  335b5f70          DCB      0x33,0x5b,0x5f,0x70
000024  7f7b4f79          DCB      0x7f,0x7b,0x4f,0x79
000028  80                DCB      0x80
                  symb_code_min
000029  7e30ec            DCB      0x7e,0x30,0xec
00002c  f8b2dade          DCB      0xf8,0xb2,0xda,0xde
000030  70feface          DCB      0x70,0xfe,0xfa,0xce
000034  f801              DCB      0xf8,0x01

                          AREA ||area_number.37||, DATA, ALIGN=2

                          EXPORTAS ||area_number.37||, ||.data||
                  tick
                          DCD      0x00000000

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  number_buff
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=1

                          EXPORTAS ||area_number.39||, ||.data||
                  time_label
000000  0000              DCW      0x0000

                          AREA ||area_number.40||, DATA, ALIGN=1

                          EXPORTAS ||area_number.40||, ||.data||
                  por
000000  0000              DCW      0x0000

                          AREA ||area_number.41||, DATA, ALIGN=0

                          EXPORTAS ||area_number.41||, ||.data||
                  counter
000000  00                DCB      0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  tmp1
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  tmp2
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  tmp3
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  tmp4
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  ||sm||
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=1

                          EXPORTAS ||area_number.47||, ||.data||
                  ||cnt||
000000  0000              DCW      0x0000

                          AREA ||area_number.48||, DATA, ALIGN=1

                          EXPORTAS ||area_number.48||, ||.data||
                  kol_zap
000000  0000              DCW      0x0000

                          AREA ||area_number.49||, DATA, ALIGN=0

                          EXPORTAS ||area_number.49||, ||.data||
                  file_cr
000000  00                DCB      0x00

                          AREA ||area_number.50||, DATA, ALIGN=0

                          EXPORTAS ||area_number.50||, ||.data||
                  buffering
000000  00                DCB      0x00

                          AREA ||area_number.51||, DATA, ALIGN=1

                          EXPORTAS ||area_number.51||, ||.data||
                  ||del||
000000  0000              DCW      0x0000

                          AREA ||area_number.52||, DATA, ALIGN=1

                          EXPORTAS ||area_number.52||, ||.data||
                  minute
000000  0000              DCW      0x0000

                          AREA ||area_number.53||, DATA, ALIGN=1

                          EXPORTAS ||area_number.53||, ||.data||
                  pred_minute
000000  0000              DCW      0x0000

                          AREA ||area_number.54||, DATA, ALIGN=0

                          EXPORTAS ||area_number.54||, ||.data||
                  kol_average
000000  00                DCB      0x00

                          AREA ||area_number.55||, DATA, ALIGN=1

                          EXPORTAS ||area_number.55||, ||.data||
                  SPI1_Buffer_Tx
000000  01020304          DCW      0x0102,0x0304
000004  05060708          DCW      0x0506,0x0708
000008  090a0b0c          DCW      0x090a,0x0b0c
00000c  0d0e0f10          DCW      0x0d0e,0x0f10
000010  11121314          DCW      0x1112,0x1314
000014  15161718          DCW      0x1516,0x1718
000018  191a1b1c          DCW      0x191a,0x1b1c
00001c  1d1e1f20          DCW      0x1d1e,0x1f20
000020  21222324          DCW      0x2122,0x2324
000024  25262728          DCW      0x2526,0x2728
000028  292a2b2c          DCW      0x292a,0x2b2c
00002c  2d2e2f30          DCW      0x2d2e,0x2f30
000030  31323334          DCW      0x3132,0x3334
000034  35363738          DCW      0x3536,0x3738
000038  393a3b3c          DCW      0x393a,0x3b3c
00003c  3d3e3f40          DCW      0x3d3e,0x3f40

                          AREA ||area_number.56||, DATA, ALIGN=0

                          EXPORTAS ||area_number.56||, ||.data||
                  smes
000000  00                DCB      0x00

                          AREA ||area_number.57||, DATA, ALIGN=2

                          EXPORTAS ||area_number.57||, ||.data||
                  pr_tick
                          DCD      0x00000000

                          AREA ||area_number.58||, DATA, ALIGN=0

                          EXPORTAS ||area_number.58||, ||.data||
                  DT_zap
                          DCDU     0x00000000
000004  000000            DCB      0x00,0x00,0x00

                          AREA ||area_number.59||, DATA, ALIGN=1

                          EXPORTAS ||area_number.59||, ||.data||
                  bytesWritten
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.60||, DATA, ALIGN=1

                          EXPORTAS ||area_number.60||, ||.data||
                  zad
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.61||, DATA, ALIGN=1

                          EXPORTAS ||area_number.61||, ||.data||
                  ||ms||
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.62||, DATA, ALIGN=1

                          EXPORTAS ||area_number.62||, ||.data||
                  kolkor
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.63||, DATA, ALIGN=1

                          EXPORTAS ||area_number.63||, ||.data||
                  tekkor
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.64||, DATA, ALIGN=1

                          EXPORTAS ||area_number.64||, ||.data||
                  flper
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.65||, DATA, ALIGN=1

                          EXPORTAS ||area_number.65||, ||.data||
                  tmo
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.66||, DATA, ALIGN=1

                          EXPORTAS ||area_number.66||, ||.data||
                  pertmo
000000  0000              DCB      0x00,0x00

;*** Start embedded assembler ***

#line 1 "src\\main.c"
	AREA ||.emb_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___6_main_c_in____REV16|
#line 114 ".\\Libraries\\CMSIS\\core_cmInstr.h"
|__asm___6_main_c_in____REV16| PROC
#line 115

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.emb_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___6_main_c_in____REVSH|
#line 128
|__asm___6_main_c_in____REVSH| PROC
#line 129

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***

                  __ARM_use_no_argv EQU 0
